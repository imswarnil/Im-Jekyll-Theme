// scss/theme/_variables.scss

// =============================================================================
// 1. IM- THEME VARIABLES (Primary Source of Truth)
// =============================================================================

// -----------------------------------------------------------------------------
// Core Colors
// -----------------------------------------------------------------------------
$im-primary: #e53935; // Your specified primary red
$im-primary-light: lighten($im-primary, 15%);
$im-primary-dark: darken($im-primary, 10%);
$im-primary-invert: #ffffff; // Text color on primary background

$im-link-color: $im-primary; // Links use the primary color
$im-link-color-hover: $im-primary-dark;
$im-link-color-active: $im-primary-dark; // Explicitly define active state
$im-link-color-focus: $im-primary-dark;  // Explicitly define focus state
$im-link-color-invert: $im-primary-invert;

// If you need a distinct accent color for other elements (not links)
// $im-accent: #ANOTHER_COLOR;
// $im-accent-light: lighten($im-accent, 15%);
// $im-accent-dark: darken($im-accent, 10%);
// $im-accent-invert: #ffffff;

// -----------------------------------------------------------------------------
// Text & Typography Colors
// -----------------------------------------------------------------------------
$im-text: #383A42;
$im-text-light: #6A737D;
$im-text-strong: #24292E;
$im-text-headings: $im-text-strong;
$im-text-invert: #ffffff;
$im-text-placeholder: $im-text-light; // For input placeholders

// -----------------------------------------------------------------------------
// Background Colors
// -----------------------------------------------------------------------------
$im-body-background: #F9FAFB;
$im-content-background: #ffffff; // For cards, boxes, navbar etc.
$im-code-block-background: #282c34; // For <pre> blocks
$im-code-block-text: #abb2bf;
$im-inline-code-background: darken($im-body-background, 4%);
$im-inline-code-text: $im-primary-dark; // Or a specific color like $im-text-strong

// -----------------------------------------------------------------------------
// Border, Divider & Line Colors
// -----------------------------------------------------------------------------
$im-border-color: #E1E4E8;
$im-border-color-strong: #D1D5DA; // For hover/active states
$im-divider-color: #F1F2F6;       // For <hr> and subtle separators

// -----------------------------------------------------------------------------
// UI Element States (Success, Warning, Danger, Info)
// -----------------------------------------------------------------------------
$im-success: #28A745;
$im-success-light: lighten($im-success, 30%);
$im-success-dark: darken($im-success, 10%);
$im-success-invert: $im-text-invert;

$im-warning: #FFC107;
$im-warning-light: lighten($im-warning, 25%);
$im-warning-dark: darken($im-warning, 10%);
$im-warning-invert: $im-text-strong; // Dark text on yellow for readability

$im-danger: #DC3545;
$im-danger-light: lighten($im-danger, 25%);
$im-danger-dark: darken($im-danger, 10%);
$im-danger-invert: $im-text-invert;

$im-info: #17A2B8;
$im-info-light: lighten($im-info, 25%);
$im-info-dark: darken($im-info, 10%);
$im-info-invert: $im-text-invert;

// -----------------------------------------------------------------------------
// Specific Component Colors (IM-prefixed)
// -----------------------------------------------------------------------------
$im-input-background: $im-content-background;
$im-input-text: $im-text;
$im-input-border: $im-border-color;
$im-input-border-hover: $im-primary;
$im-input-border-focus: $im-primary;
$im-input-shadow-focus: rgba($im-primary, 0.25); // For the focus box-shadow color

$im-button-text: $im-primary-invert;
$im-button-background: $im-primary;
$im-button-border: $im-primary;
$im-button-hover-background: $im-primary-dark;
$im-button-hover-border: $im-primary-dark;
$im-button-active-background: darken($im-primary-dark, 5%);
$im-button-active-border: darken($im-primary-dark, 5%);
$im-button-focus-shadow: rgba($im-primary, 0.25);

$im-button-text-style-color: $im-text; // For .button.is-text
$im-button-text-style-hover-background: $im-divider-color; // A very light grey
$im-button-text-style-hover-color: $im-text-strong;

$im-navbar-background: $im-content-background;
$im-navbar-text: $im-text;
$im-navbar-text-hover: $im-primary;
$im-navbar-text-active: $im-primary;
$im-navbar-item-img-max-height: 2.25rem; // As used in Enji.dev
$im-navbar-height: 4.5rem;              // As used in Enji.dev
$im-navbar-shadow-color: rgba(desaturate(darken($im-primary, 20%), 30%), 0.06);
$im-navbar-dropdown-background: $im-content-background;
$im-navbar-dropdown-border: $im-divider-color;
$im-navbar-dropdown-item-hover-background: lighten($im-primary, 43%);
$im-navbar-dropdown-item-active-background: $im-primary;
$im-navbar-dropdown-item-active-text: $im-primary-invert;

$im-card-background: $im-content-background;
$im-card-text: $im-text;
$im-card-border: $im-divider-color; // Subtle border for cards
$im-card-header-text: $im-text-headings;
$im-card-footer-border: $im-divider-color;
$im-card-footer-text: $im-text-light;

$im-box-background: $im-content-background;
$im-box-text: $im-text;
$im-box-padding: 1.5rem; // Generous padding like Enji

$im-footer-background: $im-body-background;
$im-footer-text: $im-text-light;
$im-footer-border: $im-divider-color;

// -----------------------------------------------------------------------------
// Grid Lines
// -----------------------------------------------------------------------------
$im-grid-line-light-bg: rgba(desaturate(darken($im-primary, 15%), 25%), 0.07);
$im-grid-line-dark-bg: rgba(lighten($im-primary, 45%), 0.1);

// -----------------------------------------------------------------------------
// Font Families & Weights & Sizes
// -----------------------------------------------------------------------------
$im-family-sans-serif: "Outfit", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
$im-family-monospace: "Roboto Mono", "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;

$im-font-size-base: 16px;
$im-font-size-small: 0.875em;
$im-font-size-smaller: 0.75em; // For meta text, breadcrumbs etc.

$im-line-height-base: 1.65;
$im-line-height-heading: 1.2; // Tighter for headings

$im-font-weight-light: 300;
$im-font-weight-normal: 400;
$im-font-weight-medium: 500;
$im-font-weight-semibold: 600;
$im-font-weight-bold: 700;
$im-font-weight-extrabold: 800; // For main hero titles

// Specific text element styles
$im-strong-color: $im-text-strong;
$im-strong-weight: $im-font-weight-semibold;

$im-heading-default-weight: $im-font-weight-bold; // For h1-h6 tags
$im-title-default-weight: $im-font-weight-extrabold; // For .title class
$im-subtitle-default-weight: $im-font-weight-normal;
$im-subtitle-default-color: $im-text-light;

// -----------------------------------------------------------------------------
// Sizing, Radius & Spacing
// -----------------------------------------------------------------------------
$im-radius-small: 4px;
$im-radius: 6px;
$im-radius-large: 8px;
$im-radius-xlarge: 12px;
$im-radius-rounded: 9999px;

$im-block-spacing: 1.5rem; // Spacing after p, ul, etc.
$im-hr-margin: 1.5rem 0;
$im-hr-height: 1px;

// -----------------------------------------------------------------------------
// Shadows
// -----------------------------------------------------------------------------
$im-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.03);
$im-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.07), 0 1px 2px 0 rgba(0, 0, 0, 0.04);
$im-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
$im-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
$im-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.07), 0 10px 10px -5px rgba(0, 0, 0, 0.02);
$im-shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.04);

// =============================================================================
// 2. BULMA-EQUIVALENT VARIABLES (DERIVED *ONLY* FROM IM- VARS ABOVE)
//    These are for convenience or if any minimal Bulma SCSS is ever imported.
//    Our custom component SCSS should primarily use $im- variables.
// =============================================================================

// Generic
$body-background-color: $im-body-background;
$body-size: $im-font-size-base;
$body-color: $im-text;
$body-family: $im-family-sans-serif;
$body-weight: $im-font-weight-normal;
$body-line-height: $im-line-height-base;
$body-rendering: optimizeLegibility; // Standard good practice
$body-overflow-x: hidden; // Standard
$body-min-width: 320px; // Standard

// Colors
$primary: $im-primary;
$primary-light: $im-primary-light;
$primary-dark: $im-primary-dark;
$primary-invert: $im-primary-invert;

$link: $im-link-color;
$link-light: lighten($im-link-color, 15%); // Re-deriving for completeness
$link-dark: $im-link-color-hover;
$link-invert: $im-link-color-invert;
$link-hover: $im-link-color-hover; // Explicit $link-hover
$link-active: $im-link-color-active;
$link-focus: $im-link-color-focus;
$link-focus-border: $im-link-color-focus; // Bulma uses this

$info: $im-info;
$info-light: $im-info-light;
$info-dark: $im-info-dark;
$info-invert: $im-info-invert;

$success: $im-success;
$success-light: $im-success-light;
$success-dark: $im-success-dark;
$success-invert: $im-success-invert;

$warning: $im-warning;
$warning-light: $im-warning-light;
$warning-dark: $im-warning-dark;
$warning-invert: $im-warning-invert;

$danger: $im-danger;
$danger-light: $im-danger-light;
$danger-dark: $im-danger-dark;
$danger-invert: $im-danger-invert;

// Text related derived variables for Bulma context
$text: $im-text;
$text-invert: $im-text-invert;
$text-light: $im-text-light;
$text-strong: $im-text-strong;

// Greyscale derived for Bulma context
$black: $im-text-strong; // Strongest text as black
$black-bis: darken($im-text-strong, 5%);
$black-ter: darken($im-text-strong, 10%);

$grey-darker: $im-text; // Main text as darker grey
$grey-dark: lighten($im-text, 20%);
$grey: lighten($im-text, 40%);
$grey-light: $im-border-color;
$grey-lighter: $im-divider-color;
$grey-lightest: lighten($im-divider-color, 2%);

$white: $im-content-background;
$white-bis: lighten($im-body-background, 1%);
$white-ter: $im-body-background;

// Typography
$family-primary: $im-family-sans-serif;
$family-secondary: $im-family-sans-serif; // Assume same for now
$family-sans-serif: $im-family-sans-serif;
$family-monospace: $im-family-monospace;
$family-code: $im-family-monospace;

$weight-light: $im-font-weight-light;
$weight-normal: $im-font-weight-normal;
$weight-medium: $im-font-weight-medium;
$weight-semibold: $im-font-weight-semibold;
$weight-bold: $im-font-weight-bold;

$size-1: 3rem;
$size-2: 2.5rem;
$size-3: 2rem;
$size-4: 1.5rem;
$size-5: 1.25rem;
$size-6: 1rem;
$size-7: $im-font-size-small;

$title-color: $im-text-headings;
$title-weight: $im-title-default-weight;
$title-size: $size-2; // Default for .title class
$title-line-height: $im-line-height-heading;

$subtitle-color: $im-subtitle-default-color;
$subtitle-weight: $im-subtitle-default-weight;
$subtitle-size: $size-4; // Default for .subtitle class
$subtitle-line-height: $im-line-height-base;

// Layout & Spacing
$gap: 64px; // Bulma's default column gap (can be customized with classes)
$tablet: 769px;
$desktop: 1024px;
$widescreen: 1216px;
$fullhd: 1408px;
$container-max-width: $widescreen; // Enji.dev typical max-width for content
$container-offset: ($gap * 2);

$radius-small: $im-radius-small;
$radius: $im-radius;
$radius-large: $im-radius-large;
$radius-rounded: $im-radius-rounded;

// Elements (setting Bulma variables from IM values)
$border: $im-border-color; // Default border color
$border-hover: $im-border-color-strong; // Default border hover

$code-background: $im-inline-code-background;
$code: $im-inline-code-text;
$code-padding: 0.25em 0.5em 0.2em;

$pre-background-color: $im-code-block-background;
$pre-color: $im-code-block-text;
$pre-padding: 1.25em 1.5em;

$hr-background-color: $im-divider-color;
$hr-height: $im-hr-height;
$hr-margin: $im-hr-margin;

$strong-color: $im-strong-color;
$strong-weight: $im-strong-weight;

$block-spacing: $im-block-spacing;

// Bulma component variables set from IM values
$box-background-color: $im-box-background;
$box-color: $im-box-text;
$box-radius: $im-radius-large;
$box-shadow: $im-shadow-md;
$box-padding: $im-box-padding;

$button-color: $im-button-text;
$button-background-color: $im-button-background;
$button-border-color: $im-button-border;
$button-border-width: 1px; // Standard
$button-hover-color: $im-button-text; // Assuming text color doesn't change for main button hover
$button-hover-background-color: $im-button-hover-background;
$button-hover-border-color: $im-button-hover-border;
$button-active-color: $im-button-text;
$button-active-background-color: $im-button-active-background;
$button-active-border-color: $im-button-active-border;
$button-focus-border-color: $im-button-hover-border; // Or a specific focus color
$button-focus-box-shadow-size: 0 0 0 0.125em;
$button-focus-box-shadow-color: $im-button-focus-shadow;
$button-padding-vertical: calc(0.6em - #{$button-border-width});
$button-padding-horizontal: 1.25em;
$button-radius: $im-radius;

$button-text-color: $im-button-text-style-color; // For .is-text style
$button-text-hover-background-color: $im-button-text-style-hover-background;
$button-text-hover-color: $im-button-text-style-hover-color;
// Other button states like disabled, static can be added if needed

$input-color: $im-input-text;
$input-background-color: $im-input-background;
$input-border-color: $im-input-border;
$input-hover-border-color: $im-input-border-hover;
$input-focus-border-color: $im-input-border-focus;
$input-focus-box-shadow-color: $im-input-shadow-focus;
$input-placeholder-color: $im-text-placeholder;
$input-radius: $im-radius;
$input-height: 2.75em; // As per Enji.dev style
$input-shadow: $im-shadow-inner;
// Other input variables as needed

$navbar-background-color: $im-navbar-background;
$navbar-item-color: $im-navbar-text;
$navbar-item-hover-color: $im-navbar-text-hover;
$navbar-item-hover-background-color: transparent; // Enji style
$navbar-item-active-color: $im-navbar-text-active;
$navbar-item-active-background-color: transparent;
$navbar-height: $im-navbar-height;
$navbar-item-img-max-height: $im-navbar-item-img-max-height;
$navbar-box-shadow-color: $im-navbar-shadow-color;
$navbar-box-shadow-size: 0 2px 4px 0; // Standard shadow definition
$navbar-padding-vertical: 0.75rem; // Based on Enji
$navbar-padding-horizontal: 1rem;  // Based on Enji
$navbar-burger-color: $im-navbar-text; // Burger color
$navbar-dropdown-background-color: $im-navbar-dropdown-background;
$navbar-dropdown-border-top: 1px solid $im-navbar-dropdown-border;
$navbar-dropdown-item-hover-background-color: $im-navbar-dropdown-item-hover-background;
$navbar-dropdown-item-active-background-color: $im-navbar-dropdown-item-active-background;
$navbar-dropdown-item-active-color: $im-navbar-dropdown-item-active-text;
$navbar-dropdown-arrow: $im-primary; // Arrow in dropdowns
// Other navbar variables...

$card-background-color: $im-card-background;
$card-color: $im-card-text;
$card-radius: $im-radius-large;
$card-shadow: $im-shadow;
$card-header-color: $im-card-header-text;
$card-header-weight: $im-font-weight-semibold; // Enji card headers are semibold
$card-header-padding: 1.25rem 1.5rem; // Generous padding
$card-header-background-color: transparent; // No separate header bg
$card-header-shadow: none; // No shadow on card header
$card-content-padding: 1.5rem;
$card-footer-border-top: 1px solid $im-card-footer-border;
$card-footer-padding: 1.25rem 1.5rem;
$card-footer-color: $im-card-footer-text;
// Other card variables...

// Add more Bulma variable overrides here for other components as needed,
// always assigning them from your $im- prefixed variables.
// Examples:
$footer-background-color: $im-footer-background;
$footer-color: $im-footer-text;
$footer-padding: 3rem 1.5rem; // Standard padding
$footer-border-top: 1px solid $im-footer-border;

$table-cell-border: 1px solid $im-divider-color; // For table borders
$table-head-cell-border-width: 0 0 2px; // For table head
$table-head-cell-color: $im-text-strong;
$table-row-hover-background-color: $im-body-background;
// ... etc.

// scss/theme/_variables.scss

// ... (previous parts of _variables.scss) ...

// =============================================================================
// 3. DARK MODE THEME VARIABLES (IM-prefixed)
//    These will be applied when a .is-dark-mode class is on the html/body
// =============================================================================

$im-dark-primary: $im-primary;
$im-dark-primary-light: lighten($im-dark-primary, 10%);
$im-dark-primary-dark: darken($im-dark-primary, 5%);
$im-dark-primary-invert: $im-text-strong;

$im-dark-link-color: $im-primary-light;
$im-dark-link-color-hover: $im-primary;
$im-dark-link-color-active: $im-primary;
$im-dark-link-color-focus: $im-primary;
$im-dark-link-color-invert: $im-text-strong;

$im-dark-text: #c9d1d9;
$im-dark-text-light: #8b949e;
$im-dark-text-strong: #f0f6fc;
$im-dark-text-headings: $im-dark-text-strong;
$im-dark-text-invert: $im-text;
$im-dark-text-placeholder: $im-dark-text-light;

$im-dark-body-background: #0d1117;
$im-dark-content-background: #161b22;
$im-dark-code-block-background: #010409;
$im-dark-code-block-text: #c9d1d9;
$im-dark-inline-code-background: darken($im-dark-content-background, 5%);
$im-dark-inline-code-text: $im-primary-light;

$im-dark-border-color: #30363d;
$im-dark-border-color-strong: #8b949e;
$im-dark-divider-color: #21262d;

$im-dark-input-background: $im-dark-content-background;
$im-dark-input-text: $im-dark-text;
$im-dark-input-border: $im-dark-border-color;
$im-dark-input-border-hover: $im-primary-light;
$im-dark-input-border-focus: $im-primary-light;
$im-dark-input-shadow-focus: rgba($im-primary-light, 0.25);

$im-dark-button-text: $im-dark-primary-invert;
$im-dark-button-background: $im-dark-primary;
$im-dark-button-border: $im-dark-primary;
$im-dark-button-hover-background: $im-dark-primary-dark;
$im-dark-button-hover-border: $im-dark-primary-dark;
$im-dark-button-active-background: darken($im-dark-primary-dark, 5%);
$im-dark-button-active-border: darken($im-dark-primary-dark, 5%);
$im-dark-button-focus-shadow: rgba($im-dark-primary, 0.25);

$im-dark-button-text-style-color: $im-dark-text;
$im-dark-button-text-style-hover-background: $im-dark-divider-color;
$im-dark-button-text-style-hover-color: $im-dark-text-strong;

$im-dark-navbar-background: $im-dark-content-background;
$im-dark-navbar-text: $im-dark-text;
$im-dark-navbar-text-hover: $im-dark-primary;
$im-dark-navbar-text-active: $im-dark-primary;
$im-dark-navbar-shadow-color: rgba(black, 0.2);
// --- ADDED THESE LINES FOR THE FIX ---
$im-dark-navbar-dropdown-background: darken($im-dark-content-background, 3%);
$im-dark-navbar-dropdown-border: $im-dark-border-color;
$im-dark-navbar-dropdown-item-hover-background: lighten($im-dark-primary, 10%);
$im-dark-navbar-dropdown-item-active-background: $im-dark-primary;
$im-dark-navbar-dropdown-item-active-text: $im-dark-primary-invert;
// --- END OF ADDED LINES ---

$im-dark-card-background: $im-dark-content-background;
$im-dark-card-text: $im-dark-text;
$im-dark-card-border: $im-dark-border-color;
$im-dark-card-header-text: $im-dark-text-headings;
$im-dark-card-footer-border: $im-dark-border-color;
$im-dark-card-footer-text: $im-dark-text-light;

$im-dark-box-background: $im-dark-content-background;
$im-dark-box-text: $im-dark-text;

$im-dark-footer-background: $im-dark-body-background;
$im-dark-footer-text: $im-dark-text-light;
$im-dark-footer-border: $im-dark-border-color;

$im-dark-grid-line-body: $im-grid-line-dark-bg;
$im-dark-grid-line-hero: $im-grid-line-dark-bg;

// ... (rest of your _variables.scss file, including the Bulma-equivalent section)
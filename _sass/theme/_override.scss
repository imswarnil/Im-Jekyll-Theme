// _scss/theme/_overrides.scss

//-------------------------------------------------------------------
// 1. DEFINE CSS CUSTOM PROPERTIES (LIGHT MODE - DEFAULT)
// These mirror your provided theme variables.
//-------------------------------------------------------------------
:root {
  // Dynamic Ghost variables (provide fallbacks based on our static Sass vars)
  --gh-font-heading: #{$family-primary};
  --gh-font-body: #{$family-primary};

  // Accent Color (this will be used by many components)
  --ghost-accent-color: #{$primary}; // Value from _variables.scss
  --color-accent-foreground: #{if(lightness($primary) > 50, $static-black, $static-white)};

  // Core Colors
  --color-contrast: #{$static-black};
  --color-background: #{$static-background};
  --color-background-100: #{$static-grey-lightest};
  --color-background-200: #{$static-grey-lighter};
  --color-background-300: #{$static-grey-light};
  --color-foreground: #{$static-text};
  --color-secondary: #{$static-text-light};
  --color-mute: #{$static-grey};
  --color-border: #{$static-border};
  --color-success: #{$static-success};
  --color-error: #{$static-danger};
  --color-overlay: rgba(5, 5, 5, 0.7);

  // Font Families
  --font-family-headings: #{$family-primary};
  --font-family-body: #{$family-primary};
  --font-family-button: #{$family-primary};

  // Font Sizes
  --font-x-small: #{$size-7};
  --font-small: #{$size-6};
  --font-base: #{$body-size};
  --font-large: #{$size-4};

  // Font Weights
  --font-weight-light: #{$weight-light};
  --font-weight-regular: #{$weight-normal};
  --font-weight-medium: #{$weight-medium};
  --font-weight-semibold: #{$weight-semibold};
  --font-weight-bold: #{$weight-bold};

  // Spacings
  --spacing-1: 0.125rem;
  --spacing-2: 0.25rem;
  --spacing-3: 0.375rem;
  --spacing-4: 0.5rem;
  --spacing-5: 0.625rem;
  --spacing-6: 0.75rem;
  --spacing-7: 1rem;
  --spacing-8: 1.25rem;
  --spacing-9: 1.875rem;
  --spacing-10: 5rem;
  --spacing-11: 6.25rem;
  --vertical-rhythm: 1.5rem;

  // Border Radius
  --radius-1: #{$radius-small};
  --radius-2: #{$radius};
  --radius-3: #{$radius-large};
  --radius-4: 14px;
  --radius-5: 16px;
  // For fluid values, use clamp() or fixed fallbacks.
  // --radius-6: clamp(16px, 1.25vw + 10px, 30px); // Modern CSS
  --radius-6: 16px; // Fallback

  // Layout
  // --layout--padding: clamp(16px, 1.25vw + 10px, 30px); // Modern CSS
  --layout--padding: 1.5rem; // Fallback

  // Navbar
  --navbar--min-height: #{$navbar-height};

  // Button specifics from theme
  --button--padding-v: var(--spacing-4);
  --button--padding-h: var(--spacing-8);
  --button--min-height: 2.5rem;
  --button--font-size: var(--font-small);
  --button--font-weight: var(--font-weight-medium); // Note: Bulma buttons will use $button-weight
  --button--line-height: 1.5;
  --button--border-radius: calc(var(--button--min-height) * 0.5); // Effective radius 20px
  // These colors are for custom elements using these vars. Bulma buttons use their own color logic.
  --button--color: var(--color-accent-foreground);
  --button--background-color: var(--ghost-accent-color);
  --button-hover--color: var(--color-background);
  --button-hover--background-color: var(--color-contrast);
  --button-hover--opacity: 0.8;


  // Container Widths
  --container--width: #{$container-max-width};
  --container-wide--width: #{$widescreen};

  // Shadow
  --shadow: #{$card-shadow}; // Using the static shadow defined for cards

  color-scheme: light;
}

//-------------------------------------------------------------------
// 2. GLOBAL HTML & BODY STYLES (Using CSS Custom Properties)
//-------------------------------------------------------------------
html {
  background-color: var(--color-background);
  font-size: $body-size; // Set root font size for rem units
}

body {
  font-family: var(--font-family-body);
  font-weight: var(--font-weight-regular);
  color: var(--color-foreground);
  background-color: var(--color-background);
  line-height: $body-line-height;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

//-------------------------------------------------------------------
// 3. TYPOGRAPHY OVERRIDES (Using CSS Custom Properties)
// These will affect Bulma elements if their color/font is set to 'inherit'
// or if we directly target them.
//-------------------------------------------------------------------
h1, h2, h3, h4, h5, h6,
.title, .subtitle { // Target Bulma's classes
  font-family: var(--font-family-headings);
  color: var(--color-contrast);
  font-weight: var(--font-weight-semibold); // Theme default
  line-height: 1.2;
}

// Align Bulma's title sizes more with theme's heading font sizes if desired
.title {
  &.is-1 { font-size: 1.75rem; line-height: 1.1; }
  &.is-2 { font-size: 1.375rem; }
  &.is-3 { font-size: 1.25rem; }
  &.is-4 { font-size: 1.188rem; }
  &.is-5 { font-size: 1.125rem; }
  &.is-6 { font-size: 1rem; }
}
.subtitle {
  color: var(--color-secondary); // Subtitles use secondary color
  font-weight: var(--font-weight-regular); // Often lighter than titles
}


a {
  color: var(--ghost-accent-color); // Main link color
  text-decoration: underline;
  text-decoration-color: currentColor; // Or var(--ghost-accent-color)
  text-decoration-thickness: 0.075em;
  text-underline-offset: 0.15em;
  transition: color 0.1s ease, text-decoration-color 0.1s ease;

  &:hover {
    // The Sass variable $link-hover is used by Bulma for its :hover state
    // This CSS rule provides the theme's specific hover effect using CSS vars
    color: var(--ghost-accent-color); // Keep link color the same
    text-decoration-color: transparent; // Hide underline by making it transparent
  }
}

// Blockquotes
.content blockquote, blockquote { // Target Bulma's .content blockquote and global
  border-left: 2px solid var(--ghost-accent-color);
  color: var(--color-contrast);
  font-weight: var(--font-weight-medium);
  padding: var(--spacing-4) var(--spacing-7);
  background-color: transparent; // Ensure no Bulma default bg
  margin-left: 0;
  margin-right: 0;
}

// Code blocks
.content pre, pre {
  background-color: var(--color-background-100);
  border-radius: var(--radius-2);
  padding: var(--spacing-6) var(--spacing-7);
  box-shadow: inset 0 0 0 1px var(--color-border);
  color: var(--color-contrast);
  overflow-x: auto;
  font-size: var(--font-small); // Theme implies smaller font for pre

  code {
    background-color: transparent !important;
    color: inherit !important;
    padding: 0 !important;
    font-size: inherit !important; // Ensure code inside pre inherits pre's font-size
    box-shadow: none !important;
  }
}
.content :not(pre) > code, :not(pre) > code {
  background-color: var(--color-background-100);
  border-radius: var(--radius-1);
  padding: var(--spacing-2) var(--spacing-3);
  box-shadow: inset 0 0 0 1px var(--color-border);
  color: var(--color-contrast);
  font-size: 0.875em; // Relative to parent
}

//-------------------------------------------------------------------
// 4. BULMA COMPONENT SPECIFIC STYLING (Using CSS Custom Properties)
//-------------------------------------------------------------------

.button {
  font-family: var(--font-family-button);
  font-size: var(--button--font-size);
  font-weight: var(--font-weight-semibold); // Theme wants semibold
  min-height: var(--button--min-height);
  padding: var(--button--padding-v) var(--button--padding-h);
  border-radius: var(--button--border-radius); // Ensure theme's radius
  line-height: var(--button--line-height);
  transition: var(--button--transition, all 0.15s ease); // Use theme transition

  // For buttons that should use the theme's accent color directly
  // e.g. if you have a generic .button you want to style, or override .is-primary
  &.is-primary, &.is-accent { // Add an .is-accent class if you need it
    background-color: var(--button--background-color); // which is --ghost-accent-color
    color: var(--button--color); // which is --color-accent-foreground
    border-color: transparent; // Theme buttons are borderless
    &:hover, &:focus {
      background-color: var(--button-hover--background-color);
      color: var(--button-hover--color);
      opacity: var(--button-hover--opacity, 0.8);
    }
  }

  // Bulma's .is-light buttons themed
  &.is-light {
    background-color: var(--color-background-100);
    color: var(--color-contrast);
    border-color: transparent;
    &:hover, &:focus {
      background-color: var(--color-background-200);
    }
  }
}

.card {
  background-color: var(--color-background);
  border-radius: var(--radius-4);
  box-shadow: var(--shadow);
  color: var(--color-foreground);

  .card-header {
    background-color: transparent;
    box-shadow: none;
    border-bottom: 1px solid var(--color-border);
    .card-header-title {
      color: var(--color-contrast);
      font-family: var(--font-family-headings);
      font-weight: var(--font-weight-semibold);
    }
  }
  .card-image img {
    border-top-left-radius: calc(var(--radius-4) - 1px); // Adjust if card has internal border
    border-top-right-radius: calc(var(--radius-4) - 1px);
  }
  .card-content {
    padding: var(--spacing-8);
  }
  .card-footer {
    border-top: 1px solid var(--color-border);
    background-color: transparent;
    .card-footer-item {
      color: var(--ghost-accent-color); // Use themed accent for footer links
      &:hover {
        color: darken($static-primary, 10%); // Use Sass darken on the static color
      }
    }
  }
}

.box {
  background-color: var(--color-background);
  border-radius: var(--radius-2);
  box-shadow: var(--shadow);
  padding: var(--spacing-8);
  color: var(--color-foreground);
}

.navbar {
  min-height: var(--navbar--min-height);
  background-color: transparent; // Main navbar transparent, relies on :before
  box-shadow: none; // Remove default Bulma shadow if theme is flat

  &:before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--color-background);
    opacity: 0.95; // Slightly more opaque
    z-index: -1;
    // backdrop-filter: blur(8px); // Optional blur
  }

  .navbar-brand .navbar-item img {
    max-height: calc(var(--navbar--min-height) - var(--spacing-6)); // e.g., 58px - 12px = 46px
  }

  .navbar-item, .navbar-link {
    color: var(--color-foreground);
    font-family: var(--font-family-button);
    font-size: var(--font-small);
    font-weight: var(--font-weight-medium);
    &:hover, &.is-active {
      background-color: var(--color-background-100);
      color: var(--ghost-accent-color);
    }
  }
  .navbar-link::after {
    border-color: var(--color-secondary); // Arrow color
  }
  .navbar-dropdown {
    background-color: var(--dropdown--background-color, var(--color-background));
    border-radius: var(--radius-2);
    box-shadow: var(--shadow);
    border-top: none;
    .navbar-item {
      color: var(--color-foreground);
      &:hover {
        background-color: var(--color-background-100);
        color: var(--ghost-accent-color);
      }
    }
  }
}

// Forms
.input, .textarea, .select select {
  background-color: var(--color-background-100);
  border: 1px solid var(--color-border); // Ensure border is visible
  border-radius: var(--radius-1); // Or use $control-radius if set to match button
  color: var(--color-contrast);
  font-size: var(--font-small);
  font-weight: var(--font-weight-medium);
  // padding: var(--spacing-4) var(--spacing-6); // More theme-like padding

  &:hover {
    border-color: darken($static-border, 15%); // Use Sass darken on static value
  }
  &:focus, &.is-focused, &:active, &.is-active {
    border-color: var(--ghost-accent-color);
    // box-shadow: 0 0 0 0.125em rgba($primary, 0.25); // Using Sass var for focus shadow color
    box-shadow: 0 0 0 0.125em rgba(var(--ghost-accent-color), 0.25); // Using CSS var
  }
  &::placeholder {
    color: var(--color-mute);
  }
}
.select:not(.is-multiple):not(.is-loading)::after {
  border-color: var(--color-secondary);
  right: var(--spacing-7);
}

// Pagination
.pagination {
  .pagination-link, .pagination-previous, .pagination-next {
    border: 1px solid var(--color-border); // Explicit border
    color: var(--color-foreground);
    font-weight: var(--font-weight-medium);
    min-width: var(--button--min-height);
    height: var(--button--min-height);
    border-radius: var(--radius-1);
    background-color: var(--color-background); // Explicit background
    &:hover {
      border-color: var(--ghost-accent-color);
      color: var(--ghost-accent-color);
      background-color: var(--color-background-100);
    }
    &.is-current {
      background-color: var(--ghost-accent-color);
      border-color: var(--ghost-accent-color);
      color: var(--color-accent-foreground);
    }
    &:disabled { // Ensure disabled state is clear
        background-color: var(--color-background-100);
        border-color: var(--color-border);
        color: var(--color-mute);
        opacity: 0.7;
    }
  }
  .pagination-ellipsis {
    color: var(--color-mute);
    border: 1px solid transparent; // Match height of other items
    padding-left: 0.75em;
    padding-right: 0.75em;

  }
}

// Footer specific styling to match theme
.footer {
  background-color: var(--color-background-100);
  color: var(--color-secondary);
  padding: var(--spacing-10) var(--layout--padding);
  a {
    color: var(--color-foreground); // Or --color-contrast
    &:hover {
      color: var(--ghost-accent-color);
    }
  }
}

// Specific styling for your archive cards (from your last HTML)
.archive-column-cards {
  .post-item-box {
    background-color: var(--color-background);
    border-radius: var(--radius-2);
    box-shadow: var(--shadow);
    color: var(--color-foreground);
    .post-media-container {
      .image img, .video-thumbnail-container-column img {
        border-top-left-radius: var(--radius-2);
        border-top-right-radius: var(--radius-2);
      }
    }
    .content {
      padding: var(--spacing-7);
      .level-item .tag {
        font-size: var(--font-x-small);
        padding: var(--spacing-2) var(--spacing-4);
        // Color of tag is set by is-light and is-warning/etc in HTML
      }
      .title.is-5 {
        color: var(--color-contrast);
        font-family: var(--font-family-headings);
        font-weight: var(--font-weight-semibold);
      }
      .excerpt-text-column {
        color: var(--color-secondary);
        font-size: var(--font-small);
      }
      .message { // TLDR message
         background-color: var(--color-background-100);
         border-radius: var(--radius-1);
         color: var(--color-foreground); // Ensure text color for TLDR
         &.is-warning { background-color: mix($static-warning, $static-white, 15%); } // Lighter warning
         &.is-info { background-color: mix($static-info, $static-white, 15%); }     // Lighter info
         .message-body {
            border-left-width: 0;
            padding: var(--spacing-4) var(--spacing-6);
         }
      }
    }
    .post-item-footer {
      border-top: 1px solid var(--color-border);
      padding: var(--spacing-6);
      .tags .tag {
        background-color: var(--color-background-100);
        color: var(--color-secondary);
        font-size: var(--font-x-small);
      }
      .buttons .button.is-light { // Demo/Code buttons
        background-color: var(--color-background-100);
        color: var(--color-contrast);
        border-color: var(--color-border);
        &:hover {
          background-color: var(--color-background-200);
          border-color: darken($static-border, 10%);
        }
      }
      .buttons .button.is-dark.is-light { // For "Code" button to be themed
        background-color: var(--color-background-200); // Darker light
        color: var(--color-contrast);
        border-color: var(--color-border);
         &:hover {
          background-color: var(--color-background-300);
        }
      }
    }
  }

  .ad-placeholder-box, .newsletter-box-column {
    background-color: var(--color-background); // Match card background
    border-radius: var(--radius-2);
    box-shadow: var(--shadow);
  }
  .newsletter-box-column {
    background-color: var(--color-background-100); // Or a distinct color
    // If distinct color, ensure text contrasts
    // .title, .subtitle { color: var(--color-contrast); }
  }
}
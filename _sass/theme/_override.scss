// _scss/theme/_bulma_overrides.scss

// --- General Element Styling using Theme Vars ---
body {
  font-family: var(--font-family-body);
  color: var(--color-foreground);
  background-color: var(--color-background);
  font-weight: var(--font-weight-regular);
  font-size: var(--font-base);
  line-height: 1.6; // Slightly more spacious
}

.title, .subtitle {
  font-family: var(--font-family-headings);
  color: var(--color-contrast); // Ensure titles use the contrast color
}
.title {
  font-weight: var(--font-weight-semibold);
  // Sizes for .is-1 to .is-6 are mostly handled by $size-* Sass variables.
  // If you need to enforce theme's exact rem values:
  &.is-1 { font-size: 1.75rem; line-height: 1.1; } // Based on theme's h1
  &.is-2 { font-size: 1.375rem; }
  // ... etc.
}
.subtitle {
  color: var(--color-secondary);
  font-weight: var(--font-weight-regular);
}

a {
  color: var(--ghost-accent-color);
  text-decoration: underline;
  text-decoration-color: currentColor;
  text-decoration-thickness: 0.075em;
  text-underline-offset: 0.15em;
  transition: color 0.1s ease, text-decoration-color 0.1s ease;

  &:hover {
    color: var(--ghost-accent-color); // Or a slightly different hover accent
    text-decoration-color: transparent;
  }
}

// --- Bulma Component Theming using CSS Custom Properties ---
.button {
  font-family: var(--font-family-button);
  font-size: var(--button--font-size);
  font-weight: var(--font-weight-semibold); // Theme specific weight
  min-height: var(--button--min-height);
  padding: var(--button--padding-v) var(--button--padding-h);
  border-radius: var(--button--border-radius);
  line-height: var(--button--line-height);
  transition: var(--button--transition, background-color 0.15s ease, color 0.15s ease, opacity 0.15s ease);
  border-width: 0; // Theme buttons seem borderless

  &.is-primary {
    background-color: var(--button--background-color); // --ghost-accent-color
    color: var(--button--color); // --color-accent-foreground
    &:hover, &:focus {
      background-color: var(--button-hover--background-color);
      color: var(--button-hover--color);
      opacity: var(--button-hover--opacity, 0.8);
    }
  }

  &.is-light {
    background-color: var(--color-background-100);
    color: var(--color-contrast);
    &:hover, &:focus {
      background-color: var(--color-background-200);
    }
  }
  // Add more for .is-info, .is-success, .is-link etc. using theme variables
}

.card {
  background-color: var(--color-background);
  border-radius: var(--radius-4);
  box-shadow: var(--shadow);
  color: var(--color-foreground);
  overflow: hidden; // Important if card image should be clipped

  .card-header {
    background-color: transparent;
    box-shadow: none;
    border-bottom: 1px solid var(--color-border);
    padding: var(--spacing-6) var(--spacing-8); // Theme padding
    .card-header-title {
      padding: 0; // Reset Bulma padding
      color: var(--color-contrast);
      font-family: var(--font-family-headings);
      font-weight: var(--font-weight-semibold);
    }
  }

  .card-image {
    // If image is direct child and needs to be clipped by card's border-radius
    // Bulma's .card-image > figure > img structure.
    // No specific style needed if overflow:hidden on .card and img is 100% width/height.
  }

  .card-content {
    padding: var(--spacing-8); // Theme padding
  }

  .card-footer {
    border-top: 1px solid var(--color-border);
    background-color: transparent;
    padding: 0; // Reset default padding
    .card-footer-item {
      padding: var(--spacing-6) var(--spacing-8); // Theme padding
      color: var(--ghost-accent-color);
      &:hover {
        color: darken($static-primary, 10%); // Use Sass var for hover color calculation
        background-color: var(--color-background-100); // Subtle hover bg
      }
    }
  }
}

.box {
  background-color: var(--color-background);
  border-radius: var(--radius-2);
  box-shadow: var(--shadow);
  padding: var(--spacing-8);
  color: var(--color-foreground);
}

.navbar {
  min-height: var(--navbar--min-height);
  background-color: transparent; // Relies on :before pseudo-element
  box-shadow: none;

  &:before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--color-background);
    opacity: 0.95; // Or theme's specific opacity
    z-index: -1;
    backdrop-filter: blur(8px); // Add if desired
  }

  .navbar-brand {
    // padding-left: var(--layout--padding); // Theme might have padding here
    .navbar-item img {
      max-height: calc(var(--navbar--min-height) - var(--spacing-7));
    }
  }
  // .navbar-menu {
  //   padding-right: var(--layout--padding);
  // }

  .navbar-item, .navbar-link {
    color: var(--color-foreground); // Or contrast if navbar items are stronger
    font-family: var(--font-family-button);
    font-size: var(--font-small);
    font-weight: var(--font-weight-medium);
    padding: var(--spacing-4) var(--spacing-6); // Theme button-like padding
    &:hover, &.is-active {
      background-color: var(--color-background-100);
      color: var(--ghost-accent-color);
    }
  }
  .navbar-link::after { // Dropdown arrow
    border-color: var(--color-secondary);
  }
  .navbar-dropdown {
    background-color: var(--dropdown--background-color, var(--color-background));
    border-radius: var(--radius-2);
    box-shadow: var(--shadow);
    border: 1px solid var(--color-border); // Theme dropdowns might have border
    border-top-width: 0; // Usually connects to navbar item
    padding-top: var(--spacing-2);
    padding-bottom: var(--spacing-2);
    .navbar-item {
      padding-left: var(--spacing-6);
      padding-right: var(--spacing-6);
      color: var(--color-foreground);
      &:hover {
        background-color: var(--color-background-100);
        color: var(--ghost-accent-color);
      }
    }
  }
}

// Forms
.input, .textarea, .select select {
  background-color: var(--color-background-100);
  border: 1px solid var(--color-border);
  border-radius: var(--button--border-radius); // Match button's roundness
  color: var(--color-contrast);
  font-size: var(--font-small);
  font-weight: var(--font-weight-medium);
  min-height: var(--button--min-height); // Match button height
  padding: var(--spacing-4) var(--spacing-6); // Theme consistent padding

  &:hover {
    border-color: darken($static-border, 15%);
  }
  &:focus, &.is-focused, &:active, &.is-active {
    border-color: var(--ghost-accent-color);
    box-shadow: 0 0 0 0.125em rgba($static-primary, 0.25); // Use static color for rgba
  }
  &::placeholder {
    color: var(--color-mute);
  }
}
.select:not(.is-multiple):not(.is-loading)::after {
  border-color: var(--color-secondary);
  right: var(--spacing-7); // Adjust arrow position
}
label.label { // Bulma label
  color: var(--color-contrast);
  font-size: var(--font-small);
  font-weight: var(--font-weight-semibold); // Stronger labels
  margin-bottom: var(--spacing-4);
}

// Pagination (using CSS custom properties for colors)
.pagination {
  .pagination-link, .pagination-previous, .pagination-next {
    border: 1px solid var(--color-border);
    color: var(--color-foreground);
    font-weight: var(--font-weight-medium);
    min-width: var(--button--min-height);
    height: var(--button--min-height);
    padding-left: var(--spacing-6); // More padding
    padding-right: var(--spacing-6);
    border-radius: var(--button--border-radius); // Rounded like buttons
    background-color: var(--color-background);
    &:hover {
      border-color: var(--ghost-accent-color);
      color: var(--ghost-accent-color);
      background-color: var(--color-background-100);
    }
    &.is-current {
      background-color: var(--ghost-accent-color);
      border-color: var(--ghost-accent-color);
      color: var(--color-accent-foreground);
    }
    &:disabled {
      background-color: var(--color-background-100);
      border-color: var(--color-border);
      color: var(--color-mute);
      opacity: 0.7;
    }
  }
  .pagination-ellipsis {
    color: var(--color-mute);
    border: 1px solid transparent;
    padding-left: var(--spacing-5);
    padding-right: var(--spacing-5);
    min-width: var(--button--min-height);
    height: var(--button--min-height);
    display: inline-flex; // Align with other items
    align-items: center;
    justify-content: center;
  }
}


// --- Content Specific Styling (like .post-content from theme) ---
// This is where you'd style generic HTML elements within a specific wrapper,
// similar to how Tailwind's typography plugin or the theme's .post-content works.
.content { // Bulma's .content class
  h1, h2, h3, h4, h5, h6 {
    // Already styled globally, but can add margins here if needed
    // margin-top: var(--vertical-rhythm);
    // margin-bottom: calc(var(--vertical-rhythm) / 2);
  }

  ul, ol {
    margin-left: 0; // Reset Bulma's default indent if theme doesn't have it
    padding-left: var(--spacing-8); // Theme's list indent
    margin-top: var(--vertical-rhythm);
    margin-bottom: var(--vertical-rhythm);
    li {
      padding-left: 0; // Reset Bulma's padding on li if using custom markers
      position: relative;
      & + li {
        margin-top: var(--spacing-4); // Space between list items
      }
    }
  }

  ul > li::before { // Custom bullet points like theme
    content: "";
    position: absolute;
    left: calc(var(--spacing-8) * -1 + var(--spacing-2)); // Position relative to padding
    top: 0.65rem; // Align with text
    height: 0.25rem;
    width: 0.25rem;
    background-color: currentColor; // Or var(--color-secondary)
    border-radius: 50%;
  }
  // Add styles for nested lists if needed

  ol {
    list-style: decimal; // Or theme's specific ordered list style
    > li::marker {
      font-weight: var(--font-weight-medium);
      color: var(--color-secondary);
    }
  }

  // Figure captions
  figure figcaption {
    color: var(--color-secondary);
    font-size: var(--font-small);
    margin-top: var(--spacing-6);
    text-align: center;
  }

  // Hr
  hr {
    background-color: var(--color-border);
    height: 1px;
    border: none;
    margin: var(--spacing-9) 0; // Theme's vertical rhythm for hr
  }
}

// Your Archive Page Specific Styles
.archive-column-cards {
  .post-item-box {
    background-color: var(--color-background); // Use CSS var
    border-radius: var(--radius-2);
    box-shadow: var(--shadow);
    color: var(--color-foreground);

    .post-media-container {
      .image img, .video-thumbnail-container-column img {
        border-top-left-radius: var(--radius-2); // Match box radius
        border-top-right-radius: var(--radius-2);
      }
    }
    .content {
      // padding set by .box or .card-content, or add specific:
      // padding: var(--spacing-7);
      .level-item .tag {
        font-size: var(--font-x-small);
        padding: var(--spacing-2) var(--spacing-4);
        font-weight: var(--font-weight-medium);
      }
      .title.is-5 {
        color: var(--color-contrast);
        font-family: var(--font-family-headings);
        font-weight: var(--font-weight-semibold);
        margin-bottom: var(--spacing-4); // Adjust spacing
      }
      .excerpt-text-column {
        color: var(--color-secondary);
        font-size: var(--font-small);
        line-height: 1.5;
      }
      .message { // TLDR message
         background-color: var(--color-background-100);
         border-radius: var(--radius-1);
         color: var(--color-foreground);
         &.is-warning { background-color: rgba($static-warning, 0.1); } // Use static for rgba mix
         &.is-info { background-color: rgba($static-info, 0.1); }
         .message-body {
            border-left-width: 0;
            padding: var(--spacing-4) var(--spacing-6);
         }
      }
    }
    .post-item-footer {
      border-top: 1px solid var(--color-border);
      padding: var(--spacing-6);
      .tags .tag {
        background-color: var(--color-background-100);
        color: var(--color-secondary);
        font-size: var(--font-x-small);
        border-radius: var(--radius-1);
      }
      .buttons .button { // Demo/Code buttons specifically
        font-size: var(--font-x-small); // Smaller for these footer buttons
        min-height: auto;
        height: 2rem; // Smaller height
        padding: var(--spacing-2) var(--spacing-5);
        border-radius: var(--radius-1);
        &.is-light {
           background-color: var(--color-background-100);
           color: var(--color-contrast);
           border: 1px solid var(--color-border);
            &:hover {
              background-color: var(--color-background-200);
              border-color: darken($static-border, 10%);
            }
        }
        &.is-dark.is-light { // A common pattern for a "secondary light" button
           background-color: var(--color-background-200);
           color: var(--color-contrast);
           border: 1px solid var(--color-border);
           &:hover {
             background-color: var(--color-background-300);
           }
        }
      }
    }
  }

  // Ad/Newsletter placeholders
  .ad-placeholder-box, .newsletter-box-column {
    background-color: var(--color-background);
    border-radius: var(--radius-2);
    box-shadow: var(--shadow);
    // min-height:300px; from your HTML
    .title.is-5 { color: var(--color-contrast); }
    .subtitle.is-6 { color: var(--color-secondary); }
  }
  .newsletter-box-column {
    background-color: var(--color-background-100); // Or an accent
  }
}
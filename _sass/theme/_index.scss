@import "./syntax";
@import "./about";

// ==========================================================
// STEP 1: Define Design Tokens (Tailwind/Shadcn Inspired)
// SIMPLIFIED: Using PX for base $gap and related layout to avoid unit conflicts
// ==========================================================

// --- Fonts ---
$family-sans-serif: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !default;
$family-monospace: "Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !default;
$family-primary: $family-sans-serif;
$family-code: $family-monospace;

// --- Colors (Tailwind-like Palette - using Hex codes) ---
$white:    #ffffff;
$black:    #000000;
$gray-50:  #f9fafb;
$gray-100: #f3f4f6;
$gray-200: #e5e7eb;
$gray-300: #d1d5db;
$gray-400: #9ca3af;
$gray-500: #6b7280;
$gray-600: #4b5563;
$gray-700: #374151;
$gray-800: #1f2937;
$gray-900: #11182c;

$primary-color: #2563eb; // blue-600
// Define states with Hex codes to avoid SCSS functions if they cause issues
$primary-color-hover: #1d4ed8;  // Pre-calculated darker blue
$primary-color-active: #1e40af; // Pre-calculated darkest blue
// Use a simple pre-calculated rgba for focus ring
$primary-color-focus-ring: rgba(37, 99, 235, 0.25);

$info-color:    #0ea5e9; // sky-500
$success-color: #16a34a; // green-600
$warning-color: #f59e0b; // amber-500
$danger-color:  #dc2626; // red-600

// Calculate Inverts (findColorInvert is usually safe)
$primary-invert: findColorInvert($primary-color);
$info-invert:    findColorInvert($info-color);
$success-invert: findColorInvert($success-color);
$warning-invert: $gray-900; // Explicit dark text
$danger-invert:  findColorInvert($danger-color);
$link-invert:    $primary-invert;
$light-invert:   $gray-900;
$dark-invert:    $white;
$text-invert:    $white;

// --- Typography Sizes (rem units are generally safe here) ---
$size-1: 2.25rem;
$size-2: 1.875rem;
$size-3: 1.5rem;
$size-4: 1.25rem;
$size-5: 1.125rem;
$size-6: 1rem; // 16px base
$size-7: 0.875rem;
$size-normal: $size-6;
$size-small: $size-7;
$size-medium: $size-4;
$size-large: $size-2;

// --- Font Weights ---
$weight-light: 300;
$weight-normal: 400;
$weight-medium: 500;
$weight-semibold: 600;
$weight-bold: 700;

// --- Spacing (SIMPLIFICATION: Use PX for base $gap and block spacing) ---
$gap: 24px; // Example: Use 24px. Adjust value as needed.
$block-spacing: 16px; // Example: Use 16px (equiv. 1rem)

// Component Paddings (Can still use REM here)
$button-padding-vertical:   0.5rem;
$button-padding-horizontal: 1rem;
$input-padding-vertical:    0.5rem;
$input-padding-horizontal:  0.75rem;
$textarea-padding:          0.75rem;
$control-padding-vertical: $input-padding-vertical;
$control-padding-horizontal: $input-padding-horizontal;
$notification-padding: 1rem 1.25rem;
$section-padding: 3rem 1rem;
$section-padding-medium: 4rem 1.5rem;
$section-padding-large: 6rem 2rem;
$box-padding: 1.25rem;
$card-content-padding: 1rem;
$card-header-padding: 0.75rem 1rem;
$card-footer-padding: 0.75rem 1rem;

// --- Borders & Radius ---
$border-width: 1px;
$border-color: $gray-200;
$border-hover: $gray-300;
$border-focus: $primary-color;

// Radii can use rem safely
$radius-small:  0.125rem;
$radius:        0.375rem; // 6px (Default component radius)
$radius-medium: 0.5rem;   // 8px
$radius-large:  0.75rem;  // 12px
$radius-rounded: 9999px;

// --- Shadows ---
$shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); // Simple shadow definition

// --- Breakpoints (Define Explicitly with px) ---
$tablet: 769px;
$desktop: 1024px;
$widescreen: 1216px;
$fullhd: 1408px;

// --- Container Offset (Define Explicitly with px, matching $gap unit) ---
// Value should be 2 * $gap (defined above in px)
$container-offset: 48px; // e.g., 2 * 24px = 48px

// ==========================================================
// STEP 2: Map Tokens to Bulma Variables
// ==========================================================

// --- Core Semantic Colors ---
$primary: $primary-color;
$link:    $primary-color;
$info:    $info-color;
$success: $success-color;
$warning: $warning-color;
$danger:  $danger-color;

// --- Text ---
$body-size: $size-6;
$body-line-height: 1.5;
$body-color: $gray-700;
$text: $body-color;
$text-light: $gray-500;
$text-strong: $gray-900;

// --- Links ---
$link-hover: $primary-color-hover;
$link-hover-border: transparent;
$link-focus: $primary-color-hover;
$link-focus-border: $border-focus;
$link-active: $primary-color-active;
$link-active-border: $border-focus;
$link-visited: $link;

// --- Backgrounds & Borders ---
$body-background-color: $white;
$background: $gray-50;
$border: $border-color;
$border-hover: $border-hover;
$hr-background-color: $border-color;
$hr-height: $border-width;

// --- Light/Dark Theme Elements ---
$light: $gray-100;
$dark: $gray-800;

// --- Code Blocks ---
$code-family: $family-monospace;
$code: $danger-color;
$code-background: $gray-100;
$code-weight: $weight-normal;
$pre: $gray-800;
$pre-background: $gray-100;
$pre-padding: 1rem 1.25rem;

// --- Aggregate Color Maps (Simplified) ---
$colors: (
  "white": ($white, $black),
  "black": ($black, $white),
  "light": ($light, $light-invert),
  "dark": ($dark, $dark-invert),
  "primary": ($primary, $primary-invert),
  "link": ($link, $link-invert),
  "info": ($info, $info-invert),
  "success": ($success, $success-invert),
  "warning": ($warning, $warning-invert),
  "danger": ($danger, $danger-invert),
);
$shades: (
  "black-bis": #121212, "black-ter": #242424, "grey-darker": $gray-900, "grey-dark": $gray-800, "grey": $gray-600, "grey-light": $gray-400, "grey-lighter": $gray-200, "white-ter": #f5f5f5, "white-bis": #fafafa
);

// --- Typography Details ---
$title-color: $gray-900;
$title-weight: $weight-bold;
$subtitle-color: $gray-600;
$subtitle-weight: $weight-normal;
$strong-weight: $weight-bold;

// --- Borders & Radius ---
$input-radius: $radius;
$button-radius: $radius;
$box-radius: $radius-medium;
$card-radius: $radius-medium;
$tag-radius: $radius-small;
$tabs-link-active-border-bottom-color: $primary;

// --- Shadows ---
$box-shadow: $shadow;
$card-shadow: $shadow;

// --- Focus States ---
$input-focus-border-color: $border-focus;
$input-focus-box-shadow-size: 0 0 0 3px;
$input-focus-box-shadow-color: $primary-color-focus-ring;
$input-box-shadow: none; // Remove Bulma's default inset shadow
$textarea-focus-border-color: $border-focus;
$textarea-focus-box-shadow-size: $input-focus-box-shadow-size;
$textarea-focus-box-shadow-color: $primary-color-focus-ring;
$button-focus-border-color: $border-focus;
$button-focus-box-shadow-size: $input-focus-box-shadow-size;
$button-focus-box-shadow-color: $primary-color-focus-ring;
$button-focus-color: inherit;

// --- Component Specific Adjustments ---
$button-color: $gray-700;
$button-background-color: $white;
$button-border-color: $gray-300;
$button-border-width: $border-width;
$button-hover-color: $gray-800;
$button-hover-border-color: $gray-400;
$button-hover-background-color: $gray-50;
$button-active-color: $gray-900;
$button-active-border-color: $gray-400;
$button-active-background-color: $gray-100;
$button-text-color: $link;
$button-text-hover-background-color: $gray-100;
$button-text-hover-color: $link-hover;
$button-disabled-background-color: $white;
$button-disabled-border-color: $gray-200;
$button-disabled-shadow: none;
$button-disabled-opacity: 0.5;

$navbar-background-color: $white;
$navbar-height: 3.5rem;
$navbar-padding-vertical: 0;
$navbar-padding-horizontal: 1rem;
$navbar-box-shadow-size: 0 1px 2px 0;
$navbar-box-shadow-color: rgba(0, 0, 0, 0.05);
$navbar-item-color: $gray-600;
$navbar-item-hover-color: $gray-900;
$navbar-item-hover-background-color: $gray-50;
$navbar-item-active-color: $primary;
$navbar-item-active-background-color: $gray-50;
$navbar-tab-active-border-bottom-color: $primary;
$navbar-tab-active-color: $primary;
$navbar-dropdown-background-color: $white;
$navbar-dropdown-border-top: 1px solid $gray-100;
$navbar-dropdown-radius: $radius;
$navbar-dropdown-shadow: $shadow;
$navbar-divider-background-color: $gray-100;

$card-background-color: $white;
$card-header-background-color: transparent;
$card-header-color: $gray-900;
$card-header-weight: $weight-semibold;
$card-header-shadow: none;
$card-footer-border-top: 1px solid $gray-100;

$tag-background-color: $gray-100;
$tag-color: $gray-700;
// Use hex codes for tag variants to avoid lighten() function
$tag-primary-background-color: #dbeafe; // Lighter blue hex
$tag-primary-color: $primary;
$tag-info-background-color: #cffafe; // Lighter cyan hex
$tag-info-color: $info;
$tag-success-background-color: #dcfce7; // Lighter green hex
$tag-success-color: $success;
$tag-warning-background-color: #fef3c7; // Lighter amber hex
$tag-warning-color: $warning;
$tag-danger-background-color: #fee2e2; // Lighter red hex
$tag-danger-color: $danger;

$notification-background-color: $gray-50;
$notification-radius: $radius;
$notification-code-background-color: $white;
// Use hex codes for notification variants
$notification-primary-background-color: #dbeafe;
$notification-primary-color: $primary;
$notification-info-background-color: #cffafe;
$notification-info-color: $info;
$notification-success-background-color: #dcfce7;
$notification-success-color: $success;
$notification-warning-background-color: #fef3c7;
$notification-warning-color: $warning;
$notification-danger-background-color: #fee2e2;
$notification-danger-color: $danger;

$control-border-width: $border-width;
$control-height: 2.5em; // Uses em, generally safe
$control-line-height: 1.5;
$label-color: $gray-700;
$label-weight: $weight-medium;
$help-color: $gray-500;
$help-size: $size-small; // Uses rem, generally safeas
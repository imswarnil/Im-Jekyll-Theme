// index.scss - Single File SCSS for "IM" Themed Bulma Overrides

//------------------------------------------------------------------------------
// 1. SCSS Variables (im- prefix) - Static Color Definitions
//------------------------------------------------------------------------------

// Font
$im-font-primary: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
$im-font-weight-normal: 400;
$im-font-weight-medium: 500;
$im-font-weight-semibold: 600;
$im-font-weight-bold: 700;
$im-base-font-size: 16px;
$im-line-height-base: 1.65;

// Sizing & Spacing
$im-border-radius: 6px;
$im-spacing-unit: 1rem;
$im-section-padding-vertical: calc(#{$im-spacing-unit} * 3.5);
$im-content-padding: calc(#{$im-spacing-unit} * 1.5);

// Page Transition
$im-page-transition-duration: 0.3s;
$im-page-transition-timing-function: cubic-bezier(0.25, 0.8, 0.25, 1);
$im-page-transition-delay: 0.05s;
$im-page-transition-translateY: 15px;

// Grid Lines
$im-grid-spacing: 28px;
$im-grid-line-width: 1px;
$im-grid-fade-extent: 70%;

// --- Light Theme Static Colors ---
$im-light-color-primary: #e53935;
$im-light-color-primary-light: #ef5350;
$im-light-color-primary-dark: #c62828;
$im-light-color-primary-inverted: #FFFFFF;

$im-light-color-link: #3273dc;
$im-light-color-link-hover: darken($im-light-color-link, 10%);
$im-light-color-link-inverted: #FFFFFF;
$im-light-color-info: #209cee;
$im-light-color-info-inverted: #FFFFFF;
$im-light-color-success: #23d160;
$im-light-color-success-inverted: #FFFFFF;
$im-light-color-warning: #ffdd57;
$im-light-color-warning-inverted: rgba(0,0,0,0.7);
$im-light-color-danger: #ff3860;
$im-light-color-danger-inverted: #FFFFFF;

$im-light-color-text: #363636;
$im-light-color-text-light: #7a7a7a;
$im-light-color-text-strong: #363636;
$im-light-color-text-headings: #222;
$im-light-color-text-muted: #999;

$im-light-color-background: #f5f5f5;
$im-light-color-surface: #FFFFFF;
$im-light-color-border: #dbdbdb;
$im-light-color-border-light: #ededed;
$im-light-color-border-hover: #b5b5b5;

$im-light-color-input-bg: $im-light-color-surface;
$im-light-color-input-border: $im-light-color-border;
$im-light-color-input-shadow-focus: rgba(desaturate(red($im-light-color-primary), 0%), desaturate(green($im-light-color-primary),0%), desaturate(blue($im-light-color-primary),0%), 0.25);


$im-light-color-table-row-hover: #f9f9f9;
$im-light-color-code-background: #f0f0f0;
$im-light-color-pre-background: $im-light-color-code-background;
$im-light-color-pre-text: #4a4a4a;

$im-light-button-light-bg: #f0f0f0;
$im-light-button-light-border: #f0f0f0;
$im-light-button-light-text: $im-light-color-text;
$im-light-button-light-hover-bg: #e6e6e6;
$im-light-button-light-hover-border: #e6e6e6;

$im-light-grid-line-color-for-section: rgba(0, 0, 0, 0.05);
$im-light-grid-line-color-for-hero: rgba(255, 255, 255, 0.1);

$im-light-dark-mode-toggle-icon-color: $im-light-color-text;
$im-light-toggle-bg-off: #ccc;
$im-light-toggle-slider-color: white;
$im-light-toggle-icon-sun-color: #f39c12;
$im-light-toggle-icon-moon-color: white;


// --- Dark Theme Static Colors ---
$im-dark-color-primary: #f44336; // Slightly brighter red for dark
$im-dark-color-primary-light: #ff7961;
$im-dark-color-primary-dark: #ba000d;
$im-dark-color-primary-inverted: #FFFFFF;

$im-dark-color-link: #64b5f6; // Brighter link blue
$im-dark-color-link-hover: darken($im-dark-color-link, 10%);
$im-dark-color-link-inverted: #000000;
$im-dark-color-info: #4fc3f7;
$im-dark-color-info-inverted: #000000;
$im-dark-color-success: #81c784;
$im-dark-color-success-inverted: #000000;
$im-dark-color-warning: #ffd54f;
$im-dark-color-warning-inverted: rgba(0,0,0,0.85);
$im-dark-color-danger: #e57373;
$im-dark-color-danger-inverted: #000000;

$im-dark-color-text: #e0e0e0;
$im-dark-color-text-light: #bdbdbd;
$im-dark-color-text-strong: #f5f5f5;
$im-dark-color-text-headings: #ffffff;
$im-dark-color-text-muted: #9e9e9e;

$im-dark-color-background: #1e1e1e;
$im-dark-color-surface: #2c2c2c;
$im-dark-color-border: #424242;
$im-dark-color-border-light: #333333;
$im-dark-color-border-hover: #555555;

$im-dark-color-input-bg: #3a3a3a;
$im-dark-color-input-border: $im-dark-color-border;
$im-dark-color-input-shadow-focus: rgba(desaturate(red($im-dark-color-primary),0%), desaturate(green($im-dark-color-primary),0%), desaturate(blue($im-dark-color-primary),0%), 0.35);

$im-dark-color-table-row-hover: #383838;
$im-dark-color-code-background: #333333;
$im-dark-color-pre-background: $im-dark-color-code-background;
$im-dark-color-pre-text: #cccccc;

$im-dark-button-light-bg: #424242;
$im-dark-button-light-border: #424242;
$im-dark-button-light-text: $im-dark-color-text-headings;
$im-dark-button-light-hover-bg: #555555;
$im-dark-button-light-hover-border: #555555;

$im-dark-grid-line-color-for-section: rgba(255, 255, 255, 0.04);
$im-dark-grid-line-color-for-hero: rgba(255, 255, 255, 0.08);

$im-dark-dark-mode-toggle-icon-color: $im-dark-color-text-light;
$im-dark-toggle-bg-off: #424242;
$im-dark-toggle-slider-color: #e0e0e0;
$im-dark-toggle-icon-sun-color: #f1c40f;
$im-dark-toggle-icon-moon-color: #e0e0e0;


//------------------------------------------------------------------------------
// 2. CSS Custom Properties for Theming (:root for Light Mode Defaults)
//------------------------------------------------------------------------------
:root {
  --im-color-primary: #{$im-light-color-primary};
  --im-color-primary-light: #{$im-light-color-primary-light};
  --im-color-primary-dark: #{$im-light-color-primary-dark};
  --im-color-primary-inverted: #{$im-light-color-primary-inverted};

  --im-color-link: #{$im-light-color-link};
  --im-color-link-hover: #{$im-light-color-link-hover};
  --im-color-link-inverted: #{$im-light-color-link-inverted};
  --im-color-info: #{$im-light-color-info};
  --im-color-info-inverted: #{$im-light-color-info-inverted};
  --im-color-success: #{$im-light-color-success};
  --im-color-success-inverted: #{$im-light-color-success-inverted};
  --im-color-warning: #{$im-light-color-warning};
  --im-color-warning-inverted: #{$im-light-color-warning-inverted};
  --im-color-danger: #{$im-light-color-danger};
  --im-color-danger-inverted: #{$im-light-color-danger-inverted};

  --im-color-text: #{$im-light-color-text};
  --im-color-text-light: #{$im-light-color-text-light};
  --im-color-text-strong: #{$im-light-color-text-strong};
  --im-color-text-headings: #{$im-light-color-text-headings};
  --im-color-text-muted: #{$im-light-color-text-muted};
  --im-color-text-on-surface: var(--im-color-text);

  --im-color-background: #{$im-light-color-background};
  --im-color-surface: #{$im-light-color-surface};
  --im-color-border: #{$im-light-color-border};
  --im-color-border-light: #{$im-light-color-border-light};
  --im-color-border-hover: #{$im-light-color-border-hover};

  --im-color-input-bg: var(--im-color-surface);
  --im-color-input-border: var(--im-color-border);
  --im-color-input-shadow-focus: #{$im-light-color-input-shadow-focus};

  --im-color-table-row-hover: #{$im-light-color-table-row-hover};
  --im-color-code-background: #{$im-light-color-code-background};
  --im-color-pre-background: var(--im-color-code-background);
  --im-color-pre-text: #{$im-light-color-pre-text};

  --im-button-light-bg: #{$im-light-button-light-bg};
  --im-button-light-border: #{$im-light-button-light-border};
  --im-button-light-text: var(--im-color-text);
  --im-button-light-hover-bg: #{$im-light-button-light-hover-bg};
  --im-button-light-hover-border: #{$im-light-button-light-hover-border};

  --im-grid-line-color-for-section: #{$im-light-grid-line-color-for-section};
  --im-grid-line-color-for-hero: #{$im-light-grid-line-color-for-hero};

  --im-dark-mode-toggle-icon-color: var(--im-color-text);
  --im-toggle-bg-off: #{$im-light-toggle-bg-off};
  --im-toggle-bg-on: var(--im-color-primary);
  --im-toggle-slider-color: #{$im-light-toggle-slider-color};
  --im-toggle-icon-sun-color: #{$im-light-toggle-icon-sun-color};
  --im-toggle-icon-moon-color: #{$im-light-toggle-icon-moon-color};
}

//------------------------------------------------------------------------------
// 3. Mixins
//------------------------------------------------------------------------------
@mixin im-apply-fading-grid($line-color-var-name) {
  &::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%;
    z-index: 0;
    background-image:
      repeating-linear-gradient(to right, var(#{$line-color-var-name}) 0, var(#{$line-color-var-name}) $im-grid-line-width, transparent $im-grid-line-width, transparent $im-grid-spacing),
      repeating-linear-gradient(to bottom, var(#{$line-color-var-name}) 0, var(#{$line-color-var-name}) $im-grid-line-width, transparent $im-grid-line-width, transparent $im-grid-spacing);
    background-size: $im-grid-spacing $im-grid-spacing;
    background-position: center center;
    mask-image: radial-gradient(ellipse at center, black 0%, black $im-grid-fade-extent, transparent 100%);
    -webkit-mask-image: radial-gradient(ellipse at center, black 0%, black $im-grid-fade-extent, transparent 100%);
    pointer-events: none;
  }
}

//------------------------------------------------------------------------------
// 4. Animations (Page Transitions)
//------------------------------------------------------------------------------
@keyframes imPageFadeIn {
  from { opacity: 0; transform: translateY($im-page-transition-translateY); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes imPageFadeOut {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(-$im-page-transition-translateY); }
}

//------------------------------------------------------------------------------
// 5. Base Styles (HTML, Body, Typography)
//------------------------------------------------------------------------------
html {
  background-color: var(--im-color-background) !important;
  scroll-behavior: smooth;
  font-size: $im-base-font-size;
}
body {
  font-family: $im-font-primary !important;
  color: var(--im-color-text) !important;
  font-weight: $im-font-weight-normal !important;
  line-height: $im-line-height-base !important;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--im-color-background) !important;
  min-height: 100vh;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);
  &.im-page-is-loading { opacity: 0; }
  &.im-page-is-entering { animation: imPageFadeIn $im-page-transition-duration var(--im-page-transition-timing-function) forwards; animation-delay: $im-page-transition-delay; }
  &.im-page-is-exiting  { animation: imPageFadeOut $im-page-transition-duration var(--im-page-transition-timing-function) forwards !important; }
}
h1, h2, h3, h4, h5, h6, .title, .subtitle {
  font-family: $im-font-primary !important;
  color: var(--im-color-text-headings) !important;
  transition: color $im-page-transition-duration var(--im-page-transition-timing-function);
}
.title {
  font-weight: $im-font-weight-bold !important;
  line-height: 1.2 !important;
  margin-bottom: calc(#{$im-spacing-unit} * 1) !important;
  &.is-1 { font-size: 2.5rem !important; }
  &.is-2 { font-size: 2rem !important; }
  &.is-3 { font-size: 1.75rem !important; }
}
.subtitle {
  color: var(--im-color-text-light) !important;
  font-weight: $im-font-weight-normal !important;
  line-height: 1.5 !important;
  margin-bottom: calc(#{$im-spacing-unit} * 1.5) !important;
  &.is-3 { font-size: 1.25rem !important; }
  &.is-4 { font-size: 1.1rem !important; }
}
p { margin-bottom: $im-spacing-unit !important; }
a {
  color: var(--im-color-link) !important;
  text-decoration: none !important;
  transition: color 0.2s ease-in-out, opacity 0.2s ease-in-out;
  &:hover { color: var(--im-color-link-hover) !important; }
}
strong, b {
  color: var(--im-color-text-strong) !important;
  font-weight: $im-font-weight-bold !important;
  transition: color $im-page-transition-duration var(--im-page-transition-timing-function);
}
code {
  background-color: var(--im-color-code-background);
  color: var(--im-color-danger);
  padding: 0.25em 0.5em;
  border-radius: $im-border-radius * 0.5;
  font-size: 0.875em;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);
}
pre {
  background-color: var(--im-color-pre-background);
  color: var(--im-color-pre-text);
  padding: $im-spacing-unit * 1.25;
  border-radius: $im-border-radius;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);
  code { background-color: transparent; color: inherit; padding: 0; }
}
hr {
  background-color: var(--im-color-border-light) !important;
  height: 1px !important;
  margin: $im-spacing-unit * 1.5 0 !important;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function);
}

//------------------------------------------------------------------------------
// 6. Component Overrides
//------------------------------------------------------------------------------
.hero {
  position: relative; overflow: hidden;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function);
  &.is-primary { background-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;@include im-apply-fading-grid('--im-grid-line-color-for-hero');.title,.subtitle,strong{color:var(--im-color-primary-inverted)!important;}strong{font-weight:$im-font-weight-bold!important;}.field.is-grouped .icon.is-large{color:var(--im-color-primary-inverted)!important;opacity:0.8;&:hover{opacity:1;}}}
  &.is-link { background-color:var(--im-color-link)!important;color:var(--im-color-link-inverted)!important;.title,.subtitle,strong{color:var(--im-color-link-inverted)!important;}}
  &.is-info { background-color:var(--im-color-info)!important;color:var(--im-color-info-inverted)!important;.title,.subtitle,strong{color:var(--im-color-info-inverted)!important;}}
  &.is-success { background-color:var(--im-color-success)!important;color:var(--im-color-success-inverted)!important;.title,.subtitle,strong{color:var(--im-color-success-inverted)!important;}}
  &.is-warning { background-color:var(--im-color-warning)!important;color:var(--im-color-warning-inverted)!important;.title,.subtitle,strong{color:var(--im-color-warning-inverted)!important;}}
  &.is-danger { background-color:var(--im-color-danger)!important;color:var(--im-color-danger-inverted)!important;.title,.subtitle,strong{color:var(--im-color-danger-inverted)!important;}}
  .hero-head, .hero-body, .hero-foot { position: relative; z-index: 1; }
}
.button {
  font-family: $im-font-primary !important; font-weight: $im-font-weight-semibold !important; border-radius: $im-border-radius !important; padding: 0.6em 1.2em !important;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease !important;
  border-width: 1px !important;
  &:active { transform: translateY(1px); box-shadow: none; }
  &.is-primary { background-color:var(--im-color-primary)!important;border-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;&:hover{background-color:var(--im-color-primary-dark)!important;border-color:var(--im-color-primary-dark)!important;}&:focus,&.is-focused{box-shadow:0 0 0 0.125em var(--im-color-input-shadow-focus)!important;}}
  &.is-link { background-color:var(--im-color-link)!important;border-color:var(--im-color-link)!important;color:var(--im-color-link-inverted)!important;&:hover{background-color:darken($im-light-color-link,5%)!important;border-color:darken($im-light-color-link,5%)!important;}&:focus,&.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-light-color-link), green($im-light-color-link), blue($im-light-color-link),0.25)!important;}}
  &.is-info { background-color:var(--im-color-info)!important;border-color:var(--im-color-info)!important;color:var(--im-color-info-inverted)!important;&:hover{background-color:darken($im-light-color-info,5%)!important;border-color:darken($im-light-color-info,5%)!important;}&:focus,&.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-light-color-info), green($im-light-color-info), blue($im-light-color-info),0.25)!important;}}
  &.is-success { background-color:var(--im-color-success)!important;border-color:var(--im-color-success)!important;color:var(--im-color-success-inverted)!important;&:hover{background-color:darken($im-light-color-success,5%)!important;border-color:darken($im-light-color-success,5%)!important;}&:focus,&.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-light-color-success), green($im-light-color-success), blue($im-light-color-success),0.25)!important;}}
  &.is-warning { background-color:var(--im-color-warning)!important;border-color:var(--im-color-warning)!important;color:var(--im-color-warning-inverted)!important;&:hover{background-color:darken($im-light-color-warning,5%)!important;border-color:darken($im-light-color-warning,5%)!important;}&:focus,&.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-light-color-warning), green($im-light-color-warning), blue($im-light-color-warning),0.25)!important;}}
  &.is-danger { background-color:var(--im-color-danger)!important;border-color:var(--im-color-danger)!important;color:var(--im-color-danger-inverted)!important;&:hover{background-color:darken($im-light-color-danger,5%)!important;border-color:darken($im-light-color-danger,5%)!important;}&:focus,&.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-light-color-danger), green($im-light-color-danger), blue($im-light-color-danger),0.25)!important;}}
  .hero.is-primary &.is-light {&.is-outlined{background-color:transparent!important;border-color:var(--im-color-primary-inverted)!important;color:var(--im-color-primary-inverted)!important;&:hover{background-color:rgba(255,255,255,0.1)!important;}}&:not(.is-outlined){background-color:var(--im-color-primary-inverted)!important;border-color:var(--im-color-primary-inverted)!important;color:var(--im-color-primary)!important;&:hover{background-color:rgba(255,255,255,0.9)!important;border-color:rgba(255,255,255,0.9)!important;}}}
  &.is-light {background-color:var(--im-button-light-bg)!important;border-color:var(--im-button-light-border)!important;color:var(--im-button-light-text)!important;&:hover{background-color:var(--im-button-light-hover-bg)!important;border-color:var(--im-button-light-hover-border)!important;}}
  &.is-white {border-color:transparent!important;color:var(--im-color-text)!important;&:hover,&:focus{background-color:var(--im-color-background)!important;border-color:transparent!important;color:var(--im-color-text)!important;}}
  &.is-black {background-color:#0a0a0a!important;border-color:transparent!important;color:#fff!important;&:hover,&:focus{background-color:#000!important;border-color:transparent!important;color:#fff!important;}}
  &.is-ghost {border-color:transparent!important;color:var(--im-color-link)!important;text-decoration:none!important;&:hover{color:var(--im-color-link-hover)!important;text-decoration:underline!important;}}
}
.box, .card, .panel {
  background-color: var(--im-color-surface) !important; border-radius: $im-border-radius !important; box-shadow: 0 0.5em 1em -0.125em rgba(10,10,10,.1), 0 0px 0 1px rgba(10,10,10,.02) !important; border: 1px solid var(--im-color-border) !important; color: var(--im-color-text-on-surface) !important;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), border-color $im-page-transition-duration var(--im-page-transition-timing-function), box-shadow $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);
}
.box { padding: $im-content-padding !important; }
.card {
  padding: 0 !important;
  .card-header { box-shadow:none!important; border-bottom:1px solid var(--im-color-border); padding:0.75rem $im-content-padding; background-color:transparent!important; transition:border-color $im-page-transition-duration var(--im-page-transition-timing-function); .card-header-title{color:var(--im-color-text-headings)!important;font-weight:$im-font-weight-semibold!important;transition:color $im-page-transition-duration var(--im-page-transition-timing-function);}}
  .card-content{ padding:$im-content-padding!important; color:var(--im-color-text-on-surface)!important; transition:color $im-page-transition-duration var(--im-page-transition-timing-function);}
  .card-footer { border-top:1px solid var(--im-color-border); padding:0.75rem $im-content-padding; transition:border-color $im-page-transition-duration var(--im-page-transition-timing-function); }
  .card-image img { border-top-left-radius: $im-border-radius; border-top-right-radius: $im-border-radius; }
}
.panel {
  .panel-heading { background-color:var(--im-color-surface)!important; color:var(--im-color-text-headings)!important; border-bottom:1px solid var(--im-color-border)!important; border-top-left-radius:$im-border-radius!important; border-top-right-radius:$im-border-radius!important; font-weight:$im-font-weight-semibold; transition:background-color $im-page-transition-duration var(--im-page-transition-timing-function),color $im-page-transition-duration var(--im-page-transition-timing-function),border-color $im-page-transition-duration var(--im-page-transition-timing-function);}
  .panel-block, .panel-tabs a { border-color:var(--im-color-border)!important; color:var(--im-color-text-on-surface)!important; transition:border-color $im-page-transition-duration var(--im-page-transition-timing-function),color $im-page-transition-duration var(--im-page-transition-timing-function); &:hover{background-color:rgba(red($im-light-color-primary), green($im-light-color-primary), blue($im-light-color-primary),0.05)!important;}}
  .panel-tabs a.is-active { color:var(--im-color-primary)!important; border-bottom-color:var(--im-color-primary)!important;}
  .panel-icon { color:var(--im-color-text-muted)!important; transition:color $im-page-transition-duration var(--im-page-transition-timing-function);}
}
.section {
  padding: $im-section-padding-vertical 1.5rem !important; background-color: transparent !important; position: relative; overflow: hidden;
  &:not(.hero-body):not(.hero > .section) { @include im-apply-fading-grid('--im-grid-line-color-for-section'); }
  > .container { position: relative; z-index: 1; }
}
.navbar {
  background-color: var(--im-color-surface) !important; box-shadow: 0 2px 0 0 var(--im-color-background) !important; min-height: 3.25rem;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), box-shadow $im-page-transition-duration var(--im-page-transition-timing-function);
  .navbar-item, .navbar-link { color:var(--im-color-text)!important; font-weight:$im-font-weight-medium!important; transition:color $im-page-transition-duration var(--im-page-transition-timing-function),background-color $im-page-transition-duration var(--im-page-transition-timing-function); &:hover,&.is-active{background-color:transparent!important; color:var(--im-color-primary)!important;}}
  .navbar-brand .navbar-item { font-weight:$im-font-weight-bold!important; color:var(--im-color-text-headings)!important;}
  .navbar-burger { color:var(--im-color-text)!important; span{background-color:var(--im-color-text)!important; transition:background-color $im-page-transition-duration var(--im-page-transition-timing-function);}}
  &.is-primary, .hero-head &.is-transparent, .hero-head &.has-background-primary {
    background-color:var(--im-color-primary)!important; box-shadow:none!important;
    .navbar-item,.navbar-link{color:var(--im-color-primary-inverted)!important;&:hover,&.is-active{background-color:rgba(255,255,255,0.1)!important;color:var(--im-color-primary-inverted)!important;}}
    .navbar-brand .navbar-item{color:var(--im-color-primary-inverted)!important;}
    .navbar-burger{color:var(--im-color-primary-inverted)!important; span{background-color:var(--im-color-primary-inverted)!important;}}
  }
}
.footer {
  background-color: var(--im-color-background)!important; padding: calc(#{$im-spacing-unit} * 2.5) 1.5rem calc(#{$im-spacing-unit} * 2.5) !important; color: var(--im-color-text-light) !important; border-top: 1px solid var(--im-color-border-light);
  transition: color $im-page-transition-duration var(--im-page-transition-timing-function), border-color $im-page-transition-duration var(--im-page-transition-timing-function), background-color $im-page-transition-duration var(--im-page-transition-timing-function);
  a {color:var(--im-color-text)!important; font-weight:$im-font-weight-medium!important; &:hover{color:var(--im-color-primary)!important;}}
}
.input, .textarea, .select select {
  font-family: $im-font-primary !important; border-radius: $im-border-radius !important; border: 1px solid var(--im-color-input-border) !important; box-shadow: inset 0 0.0625em 0.125em rgba(10,10,10,.05) !important; background-color: var(--im-color-input-bg) !important; color: var(--im-color-text) !important;
  transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), border-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function), box-shadow $im-page-transition-duration var(--im-page-transition-timing-function);
  &::placeholder {color:var(--im-color-text-muted)!important; opacity:0.7; transition:color $im-page-transition-duration var(--im-page-transition-timing-function);}
  &:hover { border-color: var(--im-color-border-hover)!important;}
  &:focus,&.is-focused,&:active,&.is-active { border-color:var(--im-color-primary)!important; box-shadow:0 0 0 0.125em var(--im-color-input-shadow-focus)!important;}
}
.select:not(.is-multiple):not(.is-loading)::after { border-color:var(--im-color-primary)!important; transition:border-color $im-page-transition-duration var(--im-page-transition-timing-function);}
.checkbox, .radio { &:hover { color: var(--im-color-text)!important; }}
.label { color: var(--im-color-text-strong)!important; font-weight: $im-font-weight-bold!important;}
.help { color: var(--im-color-text-light)!important;}
.control.has-icons-left .icon, .control.has-icons-right .icon { color: var(--im-color-border)!important; transition: color $im-page-transition-duration var(--im-page-transition-timing-function); }
.input:focus ~ .icon, .textarea:focus ~ .icon, .select select:focus ~ .icon { color: var(--im-color-text-light)!important; }

.tags .tag { border-radius: $im-border-radius * 0.5 !important; margin-bottom: $im-spacing-unit * 0.5 !important; transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function), border-color $im-page-transition-duration var(--im-page-transition-timing-function);}
.tag:not(body) {
  background-color: var(--im-color-background) !important; color: var(--im-color-text) !important;
  &.is-primary { background-color:var(--im-color-primary)!important; color:var(--im-color-primary-inverted)!important;}
  &.is-link { background-color:var(--im-color-link)!important; color:var(--im-color-link-inverted)!important;}
  &.is-info { background-color:var(--im-color-info)!important; color:var(--im-color-info-inverted)!important;}
  &.is-success { background-color:var(--im-color-success)!important; color:var(--im-color-success-inverted)!important;}
  &.is-warning { background-color:var(--im-color-warning)!important; color:var(--im-color-warning-inverted)!important;}
  &.is-danger { background-color:var(--im-color-danger)!important; color:var(--im-color-danger-inverted)!important;}
  &.is-light { background-color:var(--im-button-light-bg)!important; color:var(--im-button-light-text)!important;}
  &.is-dark { background-color: var(--im-color-text-strong)!important; color: var(--im-color-background)!important;}
  &.is-black { background-color: #0a0a0a!important; color: #fff!important;}
  &.is-white { background-color: #fff!important; color: #0a0a0a!important; border: 1px solid var(--im-color-border);}
}
.tags.has-addons .tag:not(:last-child) { margin-right: 0 !important; border-top-right-radius: 0 !important; border-bottom-right-radius: 0 !important; }
.tags.has-addons .tag:not(:first-child){ margin-left: 0 !important; border-top-left-radius: 0 !important; border-bottom-left-radius: 0 !important; }

.notification, .message { border-radius: $im-border-radius !important; padding: $im-content-padding * 0.8 $im-content-padding $im-content-padding * 0.8 !important; transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function); strong { color: inherit !important; }}
.notification {
  background-color: var(--im-color-background) !important; color: var(--im-color-text) !important;
  &.is-primary { background-color:var(--im-color-primary)!important; color:var(--im-color-primary-inverted)!important;}
  &.is-link { background-color:var(--im-color-link)!important; color:var(--im-color-link-inverted)!important;}
  &.is-info { background-color:var(--im-color-info)!important; color:var(--im-color-info-inverted)!important;}
  &.is-success { background-color:var(--im-color-success)!important; color:var(--im-color-success-inverted)!important;}
  &.is-warning { background-color:var(--im-color-warning)!important; color:var(--im-color-warning-inverted)!important;}
  &.is-danger { background-color:var(--im-color-danger)!important; color:var(--im-color-danger-inverted)!important;}
  &.is-light { background-color:var(--im-button-light-bg)!important; color:var(--im-button-light-text)!important;}
}
.message {
  background-color: var(--im-color-surface) !important; box-shadow: 0 0.5em 1em -0.125em rgba(10,10,10,.1), 0 0px 0 1px rgba(10,10,10,.02) !important;
  .message-header { background-color: var(--im-color-text-strong) !important; color: var(--im-color-background) !important; border-bottom: 1px solid var(--im-color-border); font-weight: $im-font-weight-bold; border-top-left-radius: $im-border-radius !important; border-top-right-radius: $im-border-radius !important; transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);}
  .message-body { border-color: var(--im-color-border) !important; color: var(--im-color-text) !important; border-bottom-left-radius: $im-border-radius !important; border-bottom-right-radius: $im-border-radius !important; transition: border-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);}
  &.is-primary { .message-header{background-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;} .message-body{border-color:var(--im-color-primary)!important;}}
  &.is-link { .message-header{background-color:var(--im-color-link)!important;color:var(--im-color-link-inverted)!important;} .message-body{border-color:var(--im-color-link)!important;}}
  &.is-info { .message-header{background-color:var(--im-color-info)!important;color:var(--im-color-info-inverted)!important;} .message-body{border-color:var(--im-color-info)!important;}}
  &.is-success { .message-header{background-color:var(--im-color-success)!important;color:var(--im-color-success-inverted)!important;} .message-body{border-color:var(--im-color-success)!important;}}
  &.is-warning { .message-header{background-color:var(--im-color-warning)!important;color:var(--im-color-warning-inverted)!important;} .message-body{border-color:var(--im-color-warning)!important;}}
  &.is-danger { .message-header{background-color:var(--im-color-danger)!important;color:var(--im-color-danger-inverted)!important;} .message-body{border-color:var(--im-color-danger)!important;}}
}

.table{background-color:var(--im-color-surface)!important;color:var(--im-color-text)!important;th,td{border-color:var(--im-color-border-light)!important;transition:background-color $im-page-transition-duration var(--im-page-transition-timing-function),border-color $im-page-transition-duration var(--im-page-transition-timing-function),color $im-page-transition-duration var(--im-page-transition-timing-function);}th{color:var(--im-color-text-strong)!important;}thead th,thead td{border-width:0 0 2px!important;}tbody tr:last-child td,tbody tr:last-child th{border-bottom-width:0!important;}&.is-hoverable tbody tr:hover{background-color:var(--im-color-table-row-hover)!important;}&.is-striped tbody tr:nth-child(odd){background-color:var(--im-color-table-row-hover)!important;}&.is-bordered{th,td{border-width:1px!important;}}&.is-fullwidth{width:100%!important;}}
.progress{background-color:var(--im-color-border-light)!important;border-radius:$im-border-radius*2!important;&::-webkit-progress-bar{background-color:var(--im-color-border-light)!important;}&::-webkit-progress-value{background-color:var(--im-color-text)!important;border-radius:$im-border-radius*2!important;}&::-moz-progress-bar{background-color:var(--im-color-text)!important;border-radius:$im-border-radius*2!important;}&::-ms-fill{background-color:var(--im-color-text)!important;border-radius:$im-border-radius*2!important;}&.is-primary::-webkit-progress-value{background-color:var(--im-color-primary)!important;}&.is-primary::-moz-progress-bar{background-color:var(--im-color-primary)!important;}&.is-primary::-ms-fill{background-color:var(--im-color-primary)!important;}}
.pagination-link,.pagination-previous,.pagination-next{border-color:var(--im-color-border)!important;color:var(--im-color-text)!important;border-radius:$im-border-radius*0.5!important;&:hover{border-color:var(--im-color-border-hover)!important;color:var(--im-color-primary)!important;}&.is-current{background-color:var(--im-color-primary)!important;border-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;}&:disabled{background-color:var(--im-color-background)!important;border-color:var(--im-color-border-light)!important;color:var(--im-color-text-muted)!important;opacity:.7;}}
.pagination-ellipsis{color:var(--im-color-text-muted)!important;}
.tabs{a{border-bottom-color:var(--im-color-border)!important;color:var(--im-color-text)!important;&:hover{border-bottom-color:var(--im-color-text)!important;color:var(--im-color-text)!important;}}li.is-active a{border-bottom-color:var(--im-color-primary)!important;color:var(--im-color-primary)!important;}&.is-boxed{a{border-radius:$im-border-radius $im-border-radius 0 0!important;border-color:var(--im-color-border)!important;&:hover{background-color:var(--im-color-background)!important;border-bottom-color:var(--im-color-border)!important;}}li.is-active a{background-color:var(--im-color-surface)!important;border-color:var(--im-color-border)!important;border-bottom-color:transparent!important;}}&.is-toggle{a{border-radius:$im-border-radius!important;border-color:var(--im-color-border)!important;margin-bottom:0!important;&:hover{background-color:var(--im-color-background)!important;border-color:var(--im-color-border-hover)!important;z-index:2;}}li+li{margin-left:0!important;}li:first-child a{border-top-right-radius:0!important;border-bottom-right-radius:0!important;}li:last-child a{border-top-left-radius:0!important;border-bottom-left-radius:0!important;}li:not(:first-child):not(:last-child) a{border-radius:0!important;}li.is-active a{background-color:var(--im-color-primary)!important;border-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;z-index:1;}}}
.menu-list a{border-radius:$im-border-radius*0.5!important;color:var(--im-color-text)!important;&:hover{background-color:var(--im-color-background)!important;color:var(--im-color-text-strong)!important;}&.is-active{background-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;}}
.menu-label{color:var(--im-color-text-muted)!important;}
.dropdown-trigger .button .icon{color:var(--im-color-text)!important; transition: color $im-page-transition-duration var(--im-page-transition-timing-function);}
.dropdown-menu{background-color:var(--im-color-surface)!important;border-radius:$im-border-radius!important;box-shadow:0 .5em 1em -.125em rgba(10,10,10,.1),0 0 0 1px rgba(10,10,10,.02)!important;padding-top:4px!important;padding-bottom:4px!important; transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function); .dropdown-item{color:var(--im-color-text)!important;padding-right:3rem!important; transition: background-color 0.2s ease, color 0.2s ease; &:hover{background-color:var(--im-color-background)!important;color:var(--im-color-text-strong)!important;}&.is-active{background-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;}}.dropdown-divider{background-color:var(--im-color-border-light)!important; transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function);}}
.modal-background{background-color:rgba(10,10,10,.86)!important;}
.modal-card{background-color:var(--im-color-surface)!important;border-radius:$im-border-radius!important; transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function); .modal-card-head,.modal-card-foot{background-color:var(--im-color-surface)!important;border-color:var(--im-color-border-light)!important;transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), border-color $im-page-transition-duration var(--im-page-transition-timing-function);}.modal-card-head{border-top-left-radius:$im-border-radius!important;border-top-right-radius:$im-border-radius!important;}.modal-card-foot{border-bottom-left-radius:$im-border-radius!important;border-bottom-right-radius:$im-border-radius!important;}.modal-card-title{color:var(--im-color-text-headings)!important;transition:color $im-page-transition-duration var(--im-page-transition-timing-function);}.modal-card-body{background-color:var(--im-color-surface)!important;color:var(--im-color-text)!important;transition: background-color $im-page-transition-duration var(--im-page-transition-timing-function), color $im-page-transition-duration var(--im-page-transition-timing-function);}}
.modal-close{background-color:rgba(10,10,10,.2)!important;&:hover{background-color:rgba(10,10,10,.3)!important;}}
.breadcrumb{a{color:var(--im-color-link)!important;&:hover{color:var(--im-color-primary)!important;}}li.is-active a{color:var(--im-color-text-strong)!important;}li+li::before{color:var(--im-color-text-light)!important;}}

//------------------------------------------------------------------------------
// 7. Dark Mode Styles
//------------------------------------------------------------------------------
html.im-is-dark-mode {
  --im-color-primary: #{$im-dark-color-primary};
  --im-color-primary-light: #{$im-dark-color-primary-light};
  --im-color-primary-dark: #{$im-dark-color-primary-dark};
  --im-color-primary-inverted: #{$im-dark-color-primary-inverted};

  --im-color-link: #{$im-dark-color-link};
  --im-color-link-hover: #{$im-dark-color-link-hover};
  --im-color-link-inverted: #{$im-dark-color-link-inverted};
  --im-color-info: #{$im-dark-color-info};
  --im-color-info-inverted: #{$im-dark-color-info-inverted};
  --im-color-success: #{$im-dark-color-success};
  --im-color-success-inverted: #{$im-dark-color-success-inverted};
  --im-color-warning: #{$im-dark-color-warning};
  --im-color-warning-inverted: #{$im-dark-color-warning-inverted};
  --im-color-danger: #{$im-dark-color-danger};
  --im-color-danger-inverted: #{$im-dark-color-danger-inverted};

  --im-color-text: #{$im-dark-color-text};
  --im-color-text-light: #{$im-dark-color-text-light};
  --im-color-text-strong: #{$im-dark-color-text-strong};
  --im-color-text-headings: #{$im-dark-color-text-headings};
  --im-color-text-muted: #{$im-dark-color-text-muted};
  --im-color-text-on-surface: var(--im-color-text);

  --im-color-background: #{$im-dark-color-background};
  --im-color-surface: #{$im-dark-color-surface};
  --im-color-border: #{$im-dark-color-border};
  --im-color-border-light: #{$im-dark-color-border-light};
  --im-color-border-hover: #{$im-dark-color-border-hover};

  --im-color-input-bg: #{$im-dark-color-input-bg};
  --im-color-input-border: var(--im-color-border);
  --im-color-input-shadow-focus: #{$im-dark-color-input-shadow-focus};

  --im-color-table-row-hover: #{$im-dark-color-table-row-hover};
  --im-color-code-background: #{$im-dark-color-code-background};
  --im-color-pre-background: var(--im-color-code-background);
  --im-color-pre-text: #{$im-dark-color-pre-text};

  --im-button-light-bg: #{$im-dark-button-light-bg};
  --im-button-light-border: #{$im-dark-button-light-border};
  --im-button-light-text: #{$im-dark-button-light-text};
  --im-button-light-hover-bg: #{$im-dark-button-light-hover-bg};
  --im-button-light-hover-border: #{$im-dark-button-light-hover-border};

  --im-grid-line-color-for-section: #{$im-dark-grid-line-color-for-section};
  --im-grid-line-color-for-hero: #{$im-dark-grid-line-color-for-hero};

  --im-dark-mode-toggle-icon-color: #{$im-dark-dark-mode-toggle-icon-color};
  --im-toggle-bg-off: #{$im-dark-toggle-bg-off};
  --im-toggle-slider-color: #{$im-dark-toggle-slider-color};
  --im-toggle-icon-sun-color: #{$im-dark-toggle-icon-sun-color};
  --im-toggle-icon-moon-color: #{$im-dark-toggle-icon-moon-color};

  .box,.card,.panel{box-shadow:0 .5em 1em -.125em rgba(0,0,0,.5),0 0 0 1px rgba(0,0,0,.3)!important;}
  .navbar{box-shadow:0 2px 0 0 var(--im-color-background)!important;}
  .footer{background-color:#121212!important;}
  code{color:var(--im-color-info);}
  hr{background-color:var(--im-color-border)!important;}
  .tags .tag:not(body){
    &.is-dark{background-color:var(--im-color-text-light)!important;color:var(--im-color-background)!important;}
    &.is-black{background-color:#1c1c1c!important;color:#eee!important;}
    &.is-white{background-color:#eee!important;color:#1c1c1c!important;border:1px solid var(--im-color-border);}
  }
  .message .message-header{background-color:var(--im-color-surface)!important;color:var(--im-color-text-headings)!important;border-bottom:1px solid var(--im-color-border-light);}
  .message.is-primary .message-header{background-color:var(--im-color-primary)!important;color:var(--im-color-primary-inverted)!important;}
  .modal-background{background-color:rgba(0,0,0,.92)!important;}
  .modal-close{background-color:rgba(20,20,20,.3)!important;&:hover{background-color:rgba(20,20,20,.4)!important;}}

  .button {
    &.is-link:hover { background-color:darken($im-dark-color-link,5%)!important; border-color:darken($im-dark-color-link,5%)!important;}
    &.is-info:hover { background-color:darken($im-dark-color-info,5%)!important; border-color:darken($im-dark-color-info,5%)!important;}
    &.is-success:hover { background-color:darken($im-dark-color-success,5%)!important; border-color:darken($im-dark-color-success,5%)!important;}
    &.is-warning:hover { background-color:darken($im-dark-color-warning,5%)!important; border-color:darken($im-dark-color-warning,5%)!important;}
    &.is-danger:hover { background-color:darken($im-dark-color-danger,5%)!important; border-color:darken($im-dark-color-danger,5%)!important;}

    &.is-link:focus,&.is-link.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-dark-color-link), green($im-dark-color-link), blue($im-dark-color-link),0.25)!important;}
    &.is-info:focus,&.is-info.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-dark-color-info), green($im-dark-color-info), blue($im-dark-color-info),0.25)!important;}
    &.is-success:focus,&.is-success.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-dark-color-success), green($im-dark-color-success), blue($im-dark-color-success),0.25)!important;}
    &.is-warning:focus,&.is-warning.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-dark-color-warning), green($im-dark-color-warning), blue($im-dark-color-warning),0.25)!important;}
    &.is-danger:focus,&.is-danger.is-focused{box-shadow:0 0 0 0.125em rgba(red($im-dark-color-danger), green($im-dark-color-danger), blue($im-dark-color-danger),0.25)!important;}
  }
  .panel-block:hover, .panel-tabs a:hover {
    background-color:rgba(red($im-dark-color-primary), green($im-dark-color-primary), blue($im-dark-color-primary),0.1)!important;
  }
}

//------------------------------------------------------------------------------
// 8. Theme Toggle Switch CSS (Phosphor Icons based)
//------------------------------------------------------------------------------
.navbar-item.im-dark-mode-toggle {
  color: var(--im-dark-mode-toggle-icon-color) !important;
  cursor: pointer;
  transition: color $im-page-transition-duration var(--im-page-transition-timing-function);
  display: inline-flex;
  align-items: center;
  padding: 0.5rem 0.75rem;

  &:hover, &:focus {
    background-color: transparent !important;
    color: var(--im-color-primary) !important;
  }
  .icon {
    color: inherit !important;
    transition: transform 0.3s ease-in-out, color 0.2s ease;
  }
  .icon i.ph {
    font-size: 1.375rem;
    line-height: 1;
    vertical-align: middle;
  }
}
// scss/theme/_index.scss

html {
  background-color: $im-body-background;
  font-size: $im-font-size-base;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  scroll-behavior: smooth;
}

body {
  font-family: $im-family-sans-serif;
  color: $im-text;
  font-weight: $im-font-weight-normal;
  line-height: $im-line-height-base;
  position: relative;
  overflow-x: hidden;
  min-width: 320px;

  &::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    --im-current-body-grid-color: #{$im-grid-line-light-bg};
    background-image:
      repeating-linear-gradient(var(--im-current-body-grid-color) 0 1px, transparent 1px 100%),
      repeating-linear-gradient(90deg, var(--im-current-body-grid-color) 0 1px, transparent 1px 100%);
    background-size: 40px 40px;
    opacity: 0.5;
  }
}

a {
  color: $im-link-color;
  font-weight: $im-font-weight-medium;
  text-decoration: none;
  transition: color 0.2s ease-in-out, text-decoration-color 0.2s ease-in-out, opacity 0.2s ease-in-out;

  &:hover,
  &:focus {
    color: $im-link-color-hover;
    text-decoration: underline;
    text-decoration-color: rgba($im-link-color-hover, 0.5);
  }
  &:active {
    color: $im-link-color-active;
  }
}

img,
svg,
video,
iframe,
embed,
object {
  max-width: 100%;
  height: auto;
  display: block;
}

figure {
  margin: 0 0 $im-block-spacing 0;
  img {
    border-radius: $im-radius;
  }
  figcaption {
    color: $im-text-light;
    font-size: $im-font-size-small;
    font-style: italic;
    margin-top: 0.5em;
    text-align: center;
  }
}

hr {
  background-color: $im-divider-color;
  border: none;
  display: block;
  height: $im-hr-height;
  margin: $im-hr-margin;
}

::selection {
  background-color: rgba($im-primary, 0.8);
  color: $im-primary-invert;
  text-shadow: none;
}
::-moz-selection {
  background-color: rgba($im-primary, 0.8);
  color: $im-primary-invert;
  text-shadow: none;
}

h1, h2, h3, h4, h5, h6 {
  font-family: $im-family-sans-serif;
  color: $im-text-headings;
  font-weight: $im-heading-default-weight;
  line-height: $im-line-height-heading;
  margin-top: 1.5em;
  margin-bottom: 0.75em;
  &:first-child { margin-top: 0; }
}

h1 { font-size: $size-2; font-weight: $im-font-weight-extrabold; }
h2 { font-size: $size-3; font-weight: $im-font-weight-bold; }
h3 { font-size: $size-4; font-weight: $im-font-weight-semibold; }
h4 { font-size: $size-5; font-weight: $im-font-weight-semibold; }
h5 { font-size: $size-6; font-weight: $im-font-weight-medium; }
h6 { font-size: $im-font-size-small; font-weight: $im-font-weight-medium; text-transform: uppercase; letter-spacing: 0.05em; }

.title {
  font-family: $im-family-sans-serif;
  color: $im-text-headings;
  font-weight: $im-title-default-weight;
  line-height: $im-line-height-heading;
  word-break: break-word;
  strong { color: inherit; font-weight: inherit; }
  &.is-1 { font-weight: $im-font-weight-extrabold; letter-spacing: -0.02em; font-size: $size-1 !important; }
  &.is-2 { font-weight: $im-font-weight-bold; letter-spacing: -0.015em; font-size: $size-2 !important; }
  &.is-3 { font-weight: $im-font-weight-semibold; font-size: $size-3 !important; }
  &.is-4 { font-weight: $im-font-weight-semibold; font-size: $size-4 !important; }
  &.is-5 { font-weight: $im-font-weight-medium; font-size: $size-5 !important; }
  &.is-6 { font-weight: $im-font-weight-medium; font-size: $size-6 !important; }
}

.subtitle {
  font-family: $im-family-sans-serif;
  color: $im-subtitle-default-color;
  font-weight: $im-subtitle-default-weight;
  line-height: $im-line-height-base;
}

p { margin-bottom: $im-block-spacing; }
strong, b { font-weight: $im-strong-weight; color: $im-strong-color; }
em, i { font-style: italic; }
small { font-size: $im-font-size-small; }

blockquote {
  background-color: $im-inline-code-background;
  border-left: 4px solid $im-primary;
  padding: 1.25em 1.5em;
  margin: $im-block-spacing 0;
  border-radius: $im-radius-small;
  color: $im-text-light;
  font-style: italic;
  p:last-child { margin-bottom: 0; }
}

ul, ol, dl { margin-bottom: $im-block-spacing; padding-left: 1.75em; }
li { margin-bottom: 0.5em; }
dt { font-weight: $im-font-weight-semibold; }
dd { margin-left: 1.5em; margin-bottom: 0.75em; }

code:not(pre > code) {
  background-color: $im-inline-code-background;
  color: $im-inline-code-text;
  font-family: $im-family-monospace;
  font-size: 0.875em;
  font-weight: $im-font-weight-normal;
  padding: 0.25em 0.5em;
  border-radius: $im-radius-small;
}

pre {
  font-family: $im-family-monospace;
  background-color: $im-code-block-background;
  color: $im-code-block-text;
  font-size: 0.9em;
  line-height: 1.5;
  overflow-x: auto;
  padding: 1.25em 1.5em;
  white-space: pre;
  word-wrap: normal;
  border-radius: $im-radius;
  margin-bottom: $im-block-spacing;
  border: 1px solid darken($im-code-block-background, 5%);

  code {
    background-color: transparent;
    color: inherit;
    font-size: inherit;
    font-weight: inherit;
    padding: 0;
    border-radius: 0;
  }
}

.content {
  font-family: $im-family-sans-serif;
  color: $im-text;
  font-size: $im-font-size-base;
  line-height: $im-line-height-base;

  h1, h2, h3, h4, h5, h6 {
    color: $im-text-headings;
    font-weight: $im-heading-default-weight;
    line-height: $im-line-height-heading;
  }

  p, ul, ol, dl, blockquote, pre, table { margin-bottom: $im-block-spacing; }

  a {
    color: $im-link-color;
    font-weight: $im-font-weight-medium;
    text-decoration: underline;
    text-decoration-color: rgba($im-link-color, 0.4);
    &:hover { color: $im-link-color-hover; text-decoration-color: $im-link-color-hover; }
  }
  strong { color: $im-strong-color; font-weight: $im-strong-weight; }
  blockquote { background-color: $im-inline-code-background; border-left-color: $im-primary; color: $im-text-light; }
  table {
    th { color: $im-text-strong; font-weight: $im-font-weight-semibold; }
    td, th { border-color: $im-divider-color; }
  }
}

.hero {
  &.im-hero-styled {
    position: relative;
    overflow: hidden;
    --im-current-hero-grid-color: #{$im-grid-line-light-bg};
    &::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100%; height: 100%;
      pointer-events: none; z-index: 0;
      background-image:
        repeating-linear-gradient(var(--im-current-hero-grid-color) 0 1px, transparent 1px 100%),
        repeating-linear-gradient(90deg, var(--im-current-hero-grid-color) 0 1px, transparent 1px 100%);
      background-size: 35px 35px;
      mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
      -webkit-mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
      opacity: 0.6;
    }

    &.is-primary, &.is-dark, &.is-black,
    &.has-background-primary, &.has-background-dark, &.has-background-black {
      --im-current-hero-grid-color: #{$im-grid-line-dark-bg};
      .title, .subtitle, .im-hero-pretitle, .im-hero-breadcrumb .breadcrumb a, .im-hero-back-button .button { color: $im-text-invert !important; }
      .im-hero-breadcrumb .breadcrumb-separator { color: rgba($im-text-invert, 0.7) !important; }
      .im-hero-breadcrumb .breadcrumb a:hover { color: lighten($im-text-invert, 15%) !important; }
      .im-hero-back-button .button {
          border-color: rgba($im-text-invert, 0.5) !important;
          &:hover { background-color: rgba($im-text-invert, 0.1) !important; border-color: $im-text-invert !important; }
      }
    }
    &.is-light, &.is-white, &.has-background-light, &.has-background-white {
      --im-current-hero-grid-color: #{$im-grid-line-light-bg};
      .title, .subtitle, .im-hero-pretitle { color: $im-text-headings; }
      .subtitle { color: $im-text; }
      .im-hero-breadcrumb .breadcrumb a { color: $im-link-color !important; }
      .im-hero-breadcrumb .breadcrumb a:hover { color: $im-link-color-hover !important; }
      .im-hero-breadcrumb .breadcrumb-separator { color: $im-text-light !important; }
      .im-hero-back-button .button {
          color: $im-link-color !important; border-color: $im-link-color !important;
          &:hover { background-color: lighten($im-link-color, 40%) !important; color: $im-link-color-hover !important; border-color: $im-link-color-hover !important; }
      }
    }
  }

  &.im-hero-styled .hero-body, &.im-hero-styled .hero-head, &.im-hero-styled .hero-foot { position: relative; z-index: 1; }
  .hero-body { padding: 3rem 1.5rem; }

  .im-hero-pretitle {
    display: block; color: $im-primary; font-size: $im-font-size-small;
    font-weight: $im-font-weight-semibold; text-transform: uppercase;
    letter-spacing: 0.075em; margin-bottom: 0.75rem;
  }
  .hero-body > .title, .hero-body > .container > .title { font-weight: $im-title-default-weight; margin-bottom: 1rem; }
  .hero-body > .subtitle, .hero-body > .container > .subtitle { font-weight: $im-subtitle-default-weight; line-height: 1.7; }

  .im-hero-navigation-top {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 1.5rem; flex-wrap: wrap; gap: 0.5rem;
    &.is-centered-breadcrumb { justify-content: center; .im-hero-breadcrumb { flex-grow: 0; } }
  }
  .im-hero-breadcrumb .breadcrumb {
    font-size: $im-font-size-smaller; margin-bottom: 0;
    ul { margin-left: 0; margin-top:0; }
    li + li::before { color: $im-text-light; }
    a { color: $im-link-color; font-weight: $im-font-weight-normal; &:hover { color: $im-link-color-hover; } }
    li.is-active a { color: $im-text; font-weight: $im-font-weight-medium; pointer-events: none; }
  }
  .im-hero-back-button .button.is-small.is-outlined {
    font-weight: $im-font-weight-medium; border-radius: $im-radius-rounded;
    padding-left: 1em; padding-right: 1em;
    color: $im-link-color; border-color: $im-link-color;
    .icon { margin-right: 0.35em; font-size: 0.9em; i.ph { line-height: 1; } }
    &:hover { background-color: lighten($im-link-color, 40%); color: $im-link-color-hover; border-color: $im-link-color-hover; }
  }

  &.im-hero-home .hero-body { padding-top: 6rem; padding-bottom: 6rem; }
  &.im-hero-page .hero-body, &.im-hero-collection .hero-body { padding-top: 3.5rem; padding-bottom: 3.5rem; }
  &.im-hero-post .hero-body { padding-top: 3rem; padding-bottom: 3rem; }
}

.button {
  font-family: $im-family-sans-serif;
  font-size: $im-font-size-base;
  font-weight: $im-font-weight-medium;
  line-height: $im-line-height-base;
  color: $im-button-text;
  background-color: $im-button-background;
  border-color: $im-button-border;
  border-width: 1px;
  border-style: solid;
  padding: calc(0.6em - 1px) 1.25em;
  border-radius: $im-radius;
  cursor: pointer;
  justify-content: center;
  text-align: center;
  white-space: nowrap;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.15s ease, box-shadow 0.2s ease;
  user-select: none;

  &:hover {
    background-color: $im-button-hover-background;
    border-color: $im-button-hover-border;
    color: $im-button-text;
    transform: translateY(-1px);
    box-shadow: $im-shadow-sm;
  }

  &:focus {
    outline: none;
    border-color: $im-button-hover-border;
    box-shadow: 0 0 0 0.125em $im-button-focus-shadow;
  }

  &:active {
    background-color: $im-button-active-background;
    border-color: $im-button-active-border;
    transform: translateY(0px);
    box-shadow: $im-shadow-inner;
  }

  &.is-small { font-size: $im-font-size-small; padding: calc(0.4em - 1px) 0.8em; }
  &.is-medium { font-size: 1.25rem; padding: calc(0.75em - 1px) 1.5em; }
  &.is-large { font-size: 1.5rem; padding: calc(0.9em - 1px) 1.75em; }

  &.is-success { background-color: $im-success; border-color: $im-success; color: $im-success-invert;
    &:hover { background-color: $im-success-dark; border-color: $im-success-dark; }
    &:focus { box-shadow: 0 0 0 0.125em rgba($im-success, 0.25); }
    &:active { background-color: darken($im-success-dark, 5%); border-color: darken($im-success-dark, 5%); }
  }
  &.is-warning { background-color: $im-warning; border-color: $im-warning; color: $im-warning-invert;
    &:hover { background-color: $im-warning-dark; border-color: $im-warning-dark; }
    &:focus { box-shadow: 0 0 0 0.125em rgba($im-warning, 0.25); }
    &:active { background-color: darken($im-warning-dark, 5%); border-color: darken($im-warning-dark, 5%); }
  }
  &.is-danger { background-color: $im-danger; border-color: $im-danger; color: $im-danger-invert;
    &:hover { background-color: $im-danger-dark; border-color: $im-danger-dark; }
    &:focus { box-shadow: 0 0 0 0.125em rgba($im-danger, 0.25); }
    &:active { background-color: darken($im-danger-dark, 5%); border-color: darken($im-danger-dark, 5%); }
  }
  &.is-info { background-color: $im-info; border-color: $im-info; color: $im-info-invert;
    &:hover { background-color: $im-info-dark; border-color: $im-info-dark; }
    &:focus { box-shadow: 0 0 0 0.125em rgba($im-info, 0.25); }
    &:active { background-color: darken($im-info-dark, 5%); border-color: darken($im-info-dark, 5%); }
  }
  &.is-light { background-color: $im-divider-color; border-color: $im-divider-color; color: $im-text-strong;
    &:hover { background-color: darken($im-divider-color, 5%); border-color: darken($im-divider-color, 5%); }
    &:focus { box-shadow: 0 0 0 0.125em rgba(darken($im-divider-color,10%), 0.25); }
    &:active { background-color: darken($im-divider-color, 10%); border-color: darken($im-divider-color, 10%); }
  }

  &.is-outlined {
    background-color: transparent;
    border-color: $im-button-border;
    color: $im-button-background;

    &:hover, &:focus {
      background-color: $im-button-background;
      border-color: $im-button-border;
      color: $im-button-text;
    }
    &.is-primary { border-color: $im-primary; color: $im-primary; &:hover, &:focus { background-color: $im-primary; color: $im-primary-invert; } }
    &.is-success { border-color: $im-success; color: $im-success; &:hover, &:focus { background-color: $im-success; color: $im-success-invert; } }
    &.is-warning { border-color: $im-warning; color: $im-warning; &:hover, &:focus { background-color: $im-warning; color: $im-warning-invert; } }
    &.is-danger { border-color: $im-danger; color: $im-danger; &:hover, &:focus { background-color: $im-danger; color: $im-danger-invert; } }
    &.is-info { border-color: $im-info; color: $im-info; &:hover, &:focus { background-color: $im-info; color: $im-info-invert; } }
  }

  &.is-text {
    background-color: transparent;
    border-color: transparent;
    color: $im-button-text-style-color;
    text-decoration: none;
    box-shadow: none;
    &:hover, &:focus {
      background-color: $im-button-text-style-hover-background;
      color: $im-button-text-style-hover-color;
      text-decoration: underline;
      transform: translateY(0);
    }
    &:active {
        background-color: darken($im-button-text-style-hover-background, 5%);
        box-shadow: none;
    }
  }

  &.is-loading {
    color: transparent !important;
    pointer-events: none;
    &::after {
      animation: im-spinner-spin 0.5s infinite linear;
      border: 2px solid $im-border-color;
      border-radius: $im-radius-rounded;
      border-right-color: transparent;
      border-top-color: transparent;
      content: "";
      display: block;
      height: 1em;
      width: 1em;
      position: absolute;
      left: calc(50% - (1em / 2));
      top: calc(50% - (1em / 2));
    }
  }

  &[disabled], &.is-disabled {
    background-color: $im-button-background;
    border-color: $im-button-border;
    box-shadow: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  & + .button {
    margin-left: 0.5rem;
  }
}
.buttons {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-start;
  gap: 0.75rem;
  &.has-addons {
    gap: 0;
    .button {
      margin-left: 0 !important;
      &:not(:first-child) { border-top-left-radius: 0; border-bottom-left-radius: 0; }
      &:not(:last-child) { border-top-right-radius: 0; border-bottom-right-radius: 0; border-right-width: 0; }
      &:focus, &:hover { z-index: 1; }
    }
  }
  &.is-centered { justify-content: center; }
  &.is-right { justify-content: flex-end; }
}

@keyframes im-spinner-spin {
  to { transform: rotate(360deg); }
}

.card {
  background-color: $im-card-background;
  color: $im-card-text;
  border: 1px solid $im-card-border;
  border-radius: $im-radius-large;
  box-shadow: $im-shadow;
  transition: box-shadow 0.25s ease-in-out, transform 0.25s ease-in-out, border-color 0.2s ease-in-out;
  display: flex;
  flex-direction: column;

  &:hover {
    box-shadow: $im-shadow-lg;
    transform: translateY(-4px);
    border-color: $im-border-color-strong;
  }

  .card-header {
    background-color: transparent;
    border-bottom: 1px solid $im-card-footer-border;
    padding: 1rem 1.25rem;
    box-shadow: none;
    align-items: stretch;

    .card-header-title {
      color: $im-card-header-text;
      font-weight: $im-font-weight-semibold;
      font-size: 1.15rem;
      padding: 0;
      line-height: 1.3;
    }
    .card-header-icon {
      color: $im-text-light;
      cursor: pointer;
      padding: 0;
      &:hover { color: $im-primary; }
    }
  }

  .card-image {
    display: block;
    position: relative;
    img {
      display: block;
      width: 100%;
      &:first-child { border-radius: $im-radius-large $im-radius-large 0 0; }
    }
  }

  .card-content {
    background-color: transparent;
    padding: 1.25rem;
    flex-grow: 1;
  }

  .card-footer {
    background-color: transparent;
    border-top: 1px solid $im-card-footer-border;
    padding: 0;
    align-items: stretch;

    .card-footer-item {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.85rem 1rem;
      color: $im-card-footer-text;
      font-size: $im-font-size-small;
      transition: color 0.2s ease, background-color 0.2s ease;
      &:not(:last-child) {
        border-right: 1px solid $im-card-footer-border;
      }
      &:hover {
        color: $im-link-color;
        background-color: $im-divider-color;
      }
    }
  }
}

.box {
  background-color: $im-box-background;
  color: $im-box-text;
  border-radius: $im-radius-large;
  box-shadow: $im-shadow-md;
  padding: $im-box-padding;
  transition: box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out;
  &:hover {
    box-shadow: $im-shadow-lg;
    transform: translateY(-2px);
  }
}

.input, .textarea, .select select {
  font-family: $im-family-sans-serif;
  background-color: $im-input-background;
  border: 1px solid $im-input-border;
  border-radius: $im-radius;
  color: $im-input-text;
  font-size: $im-font-size-base;
  line-height: $im-line-height-base;
  padding: calc(0.6em - 1px) 0.85em;
  box-shadow: $im-shadow-inner;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  width: 100%;
  max-width: 100%;
  vertical-align: top;

  &::placeholder {
    color: $im-text-placeholder;
    opacity: 1;
  }

  &:hover {
    border-color: $im-input-border-hover;
  }

  &:focus, &.is-focused, &:active, &.is-active {
    outline: none;
    border-color: $im-input-border-focus;
    box-shadow: $im-shadow-inner, 0 0 0 0.125em $im-input-shadow-focus;
  }

  &[disabled], fieldset[disabled] & {
    background-color: darken($im-input-background, 3%);
    border-color: darken($im-input-border, 5%);
    box-shadow: none;
    color: $im-text-light;
    cursor: not-allowed;
    &::placeholder { color: rgba($im-text-light, 0.7); }
  }

  &.is-small { font-size: $im-font-size-small; padding: calc(0.4em - 1px) 0.6em; }
  &.is-medium { font-size: 1.25rem; padding: calc(0.75em - 1px) 1em; }
  &.is-large { font-size: 1.5rem; padding: calc(0.9em - 1px) 1.25em; }
}

.input { height: 2.75em; }
.textarea {
  display: block;
  max-width: 100%;
  min-width: 100%;
  padding: 0.85em;
  resize: vertical;
  min-height: 120px;
}

.select {
  display: inline-block;
  max-width: 100%;
  position: relative;
  vertical-align: top;
  height: 2.75em;

  select {
    cursor: pointer;
    display: block;
    font-size: 1em;
    max-width: 100%;
    outline: none;
    padding-right: 2.5em;
    height: 100%;
    -moz-appearance: none;
    -webkit-appearance: none;
    &::-ms-expand { display: none; }
  }
  &::after {
    border: 1.5px solid $im-primary;
    border-radius: 2px;
    border-right: 0;
    border-top: 0;
    content: " ";
    display: block;
    height: 0.5em;
    width: 0.5em;
    pointer-events: none;
    position: absolute;
    top: 50%;
    transform: translateY(-50%) rotate(-45deg);
    right: 1.125em;
    margin-top: -1px;
    z-index: 4;
    transform-origin: center;
    transition: transform 0.2s ease;
  }
  &:hover::after {
    border-color: $im-primary-dark;
  }
  &.is-multiple {
    height: auto;
    select { height: auto; padding: 0; }
    &::after { display: none; }
  }
  &.is-small { font-size: $im-font-size-small; height: 2.25em; }
  &.is-medium { font-size: 1.25rem; height: 3.25em; }
  &.is-large { font-size: 1.5rem; height: 3.75em; }
}

.checkbox, .radio {
  cursor: pointer;
  display: inline-block;
  line-height: 1.25;
  position: relative;
  padding-left: 1.75em;
  margin-right: 0.5rem;
  margin-bottom: 0.5rem;
  user-select: none;
  color: $im-text;

  input[type="checkbox"], input[type="radio"] {
    opacity: 0;
    position: absolute;
    left: 0;
    z-index: -1;
  }

  &::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.125em;
    width: 1.25em;
    height: 1.25em;
    border: 2px solid $im-input-border;
    background-color: $im-input-background;
    transition: border-color 0.2s ease, background-color 0.2s ease;
  }
  &::after {
    content: "";
    position: absolute;
    left: 0;
    top: 0.125em;
    width: 1.25em;
    height: 1.25em;
    opacity: 0;
    transform: scale(0.5);
    transition: opacity 0.15s ease-out, transform 0.15s ease-out;
  }

  &:hover::before {
    border-color: $im-input-border-hover;
  }

  input:checked + &::before {
    background-color: $im-primary;
    border-color: $im-primary;
  }
  input:checked + &::after {
    opacity: 1;
    transform: scale(1);
  }

  input:focus + &::before {
    border-color: $im-input-border-focus;
    box-shadow: 0 0 0 0.125em $im-input-shadow-focus;
  }

  &[disabled], input:disabled + & {
    color: $im-text-light;
    cursor: not-allowed;
    &::before {
      background-color: darken($im-input-background, 3%);
      border-color: darken($im-input-border, 5%);
    }
    input:checked + &::before {
        background-color: lighten($im-primary, 20%);
        border-color: lighten($im-primary, 20%);
    }
    input:checked + &::after {
        opacity: 0.6;
    }
  }
}

.checkbox::before { border-radius: $im-radius-small; }
.checkbox::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23#{str-slice(inspect($im-primary-invert), 2)}'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
  background-size: 75%;
}

.radio::before, .radio::after { border-radius: 50%; }
.radio::after {
  background-color: $im-primary-invert;
  width: 0.6em;
  height: 0.6em;
  left: 0.325em;
  top: 0.450em;
  transform-origin: center;
}
input:checked + .radio::after {
    transform: scale(1);
}

.field {
  &:not(:last-child) { margin-bottom: 0.75rem; }
  &.has-addons {
    display: flex;
    justify-content: flex-start;
    .control {
      &:not(:last-child) { margin-right: -1px; }
      &:not(:first-child) .button, &:not(:first-child) .input, &:not(:first-child) .select select { border-bottom-left-radius: 0; border-top-left-radius: 0; }
      &:not(:last-child) .button, &:not(:last-child) .input, &:not(:last-child) .select select { border-bottom-right-radius: 0; border-top-right-radius: 0; }
      &.is-expanded { flex-grow: 1; flex-shrink: 1; }
    }
  }
}
.label {
  color: $im-text-strong;
  display: block;
  font-size: $im-font-size-base;
  font-weight: $im-font-weight-semibold;
  margin-bottom: 0.5em;
  &.is-small { font-size: $im-font-size-small; }
  &.is-medium { font-size: 1.25rem; }
  &.is-large { font-size: 1.5rem; }
}
.help {
  display: block;
  font-size: $im-font-size-small;
  margin-top: 0.25rem;
  color: $im-text-light;
  &.is-danger { color: $im-danger; }
  &.is-success { color: $im-success; }
}

.tag {
  align-items: center;
  background-color: $im-divider-color;
  border-radius: $im-radius-small;
  color: $im-text;
  display: inline-flex;
  font-size: $im-font-size-smaller;
  font-weight: $im-font-weight-medium;
  height: 2em;
  justify-content: center;
  line-height: 1.5;
  padding-left: 0.85em;
  padding-right: 0.85em;
  white-space: nowrap;
  transition: background-color 0.2s ease, color 0.2s ease, opacity 0.2s ease;

  &.is-primary { background-color: $im-primary; color: $im-primary-invert; }
  &.is-link { background-color: $im-link-color; color: $im-link-color-invert; }
  &.is-info { background-color: $im-info; color: $im-info-invert; }
  &.is-success { background-color: $im-success; color: $im-success-invert; }
  &.is-warning { background-color: $im-warning; color: $im-warning-invert; }
  &.is-danger { background-color: $im-danger; color: $im-danger-invert; }
  &.is-light { background-color: $im-divider-color; color: $im-text-strong; }
  &.is-dark { background-color: $im-text-strong; color: $im-text-invert; }

  &.is-medium { font-size: $im-font-size-small; height: 2.25em; padding: 0 1em;}
  &.is-large { font-size: $im-font-size-base; height: 2.5em; padding: 0 1.25em; }

  &.is-rounded { border-radius: $im-radius-rounded; }
  .icon:first-child:not(:last-child) { margin-left: -0.375em; margin-right: 0.25em; }
  .icon:last-child:not(:first-child) { margin-left: 0.25em; margin-right: -0.375em; }

  .delete {
    margin-left: 0.35em;
    margin-right: -0.45em;
  }
  &:hover:not(.is-static) {
    opacity: 0.85;
  }
}
.tags {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-start;
  gap: 0.5rem;
  margin-bottom: -0.5rem;
  .tag { margin-bottom: 0.5rem; }
  &.has-addons .tag { margin-right: 0; margin-bottom: 0;
    &:not(:first-child) { border-bottom-left-radius: 0; border-top-left-radius: 0; }
    &:not(:last-child) { border-bottom-right-radius: 0; border-top-right-radius: 0; }
  }
  &.is-centered { justify-content: center; }
  &.is-right { justify-content: flex-end; }
}

.notification {
  background-color: $im-body-background;
  border-radius: $im-radius;
  color: $im-text;
  padding: 1.25rem 2.5rem 1.25rem 1.5rem;
  position: relative;
  border-left: 4px solid $im-divider-color;
  box-shadow: $im-shadow-sm;
  transition: opacity 0.3s ease, transform 0.3s ease;

  a:not(.button) { color: $im-link-color; text-decoration: underline; &:hover { color: $im-link-color-hover; } }
  strong { color: $im-text-strong; }
  code, pre { background: $im-content-background; }
  pre code { background: transparent; }
  .title, .subtitle { color: $im-text; }

  &.is-primary { background-color: lighten($im-primary, 40%); color: $im-primary-dark; border-left-color: $im-primary; a:not(.button) {color: $im-primary-dark;} strong {color: $im-primary-dark;}}
  &.is-link { background-color: lighten($im-link-color, 40%); color: $im-link-color-hover; border-left-color: $im-link-color; a:not(.button) {color: $im-link-color-hover;} strong {color: $im-link-color-hover;}}
  &.is-info { background-color: lighten($im-info, 35%); color: $im-info-dark; border-left-color: $im-info; a:not(.button) {color: $im-info-dark;} strong {color: $im-info-dark;}}
  &.is-success { background-color: lighten($im-success, 40%); color: $im-success-dark; border-left-color: $im-success; a:not(.button) {color: $im-success-dark;} strong {color: $im-success-dark;}}
  &.is-warning { background-color: lighten($im-warning, 30%); color: darken($im-warning, 30%); border-left-color: $im-warning; a:not(.button) {color: darken($im-warning,30%);} strong {color: darken($im-warning,30%);}}
  &.is-danger { background-color: lighten($im-danger, 35%); color: $im-danger-dark; border-left-color: $im-danger; a:not(.button) {color: $im-danger-dark;} strong {color: $im-danger-dark;}}
  &.is-light { background-color: $im-divider-color; color: $im-text-strong; border-left-color: $im-border-color-strong; }

  .delete {
    position: absolute;
    right: 0.75rem;
    top: 0.75rem;
  }
}

.table {
  background-color: $im-content-background;
  color: $im-text;
  width: 100%;
  margin-bottom: $im-block-spacing;
  border-collapse: collapse;

  th, td {
    border: 1px solid $im-divider-color;
    padding: 0.75em 1em;
    text-align: left;
    vertical-align: top;
  }
  thead th, tfoot th {
    background-color: $im-body-background;
    color: $im-text-strong;
    font-weight: $im-font-weight-semibold;
    border-bottom-width: 2px;
    border-top-width: 2px;
  }
  tbody tr:nth-child(even) {
    background-color: $im-body-background;
  }
  tbody tr:hover {
    background-color: lighten($im-body-background, 2%);
  }
  &.is-bordered th, &.is-bordered td { border-width: 1px; }
  &.is-striped tbody tr:nth-child(even) { background-color: $im-body-background; }
  &.is-narrow th, &.is-narrow td { padding: 0.35em 0.6em; }
  &.is-hoverable tbody tr:hover { background-color: lighten($im-body-background, 2%); }
  &.is-fullwidth { width: 100%; }
}

.im-section-with-title {
  padding-top: 3rem;
  padding-bottom: 3rem;
  .im-section-title {
    margin-bottom: 2.5rem;
  }
}

html { scroll-padding-top: $im-navbar-height + 1rem; }

.pagination {
  font-size: $im-font-size-base;
  margin: $im-block-spacing * 1.5 auto;
  display: flex;
  justify-content: center;
  align-items: center;

  .pagination-link, .pagination-previous, .pagination-next, .pagination-ellipsis {
    font-family: $im-family-sans-serif;
    font-size: $im-font-size-small;
    font-weight: $im-font-weight-medium;
    justify-content: center;
    margin: 0 0.15rem;
    padding: 0.5em 0.85em;
    text-align: center;
    text-decoration: none;
    min-width: 2.5em;
    border-radius: $im-radius-small;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.15s ease;
    user-select: none;
  }

  .pagination-link, .pagination-previous, .pagination-next {
    border: 1px solid $im-border-color;
    color: $im-link-color;
    background-color: $im-content-background;

    &:hover {
      border-color: $im-link-color-hover;
      background-color: lighten($im-link-color, 43%);
      color: $im-link-color-hover;
      transform: translateY(-1px);
      z-index: 1;
    }
    &:focus {
      outline: none;
      border-color: $im-link-color-focus;
      box-shadow: 0 0 0 0.125em rgba($im-link-color-focus, 0.25);
      z-index: 2;
    }
    &:active {
      background-color: lighten($im-link-color, 38%);
      border-color: $im-link-color-active;
      color: $im-link-color-active;
      transform: translateY(0px);
    }
  }

  .pagination-link.is-current {
    background-color: $im-link-color;
    border-color: $im-link-color;
    color: $im-link-color-invert;
    font-weight: $im-font-weight-semibold;
    box-shadow: $im-shadow-sm;
    transform: translateY(-1px);
  }

  .pagination-ellipsis {
    color: $im-text-light;
    border: none;
    padding: 0.5em 0.3em;
  }

  &[disabled], .pagination-previous[disabled], .pagination-next[disabled] {
    background-color: $im-divider-color;
    border-color: $im-divider-color;
    color: $im-text-light;
    opacity: 0.7;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
  }

  &.is-small {
    .pagination-link, .pagination-previous, .pagination-next, .pagination-ellipsis {
      font-size: $im-font-size-smaller;
      padding: 0.35em 0.6em;
      min-width: 2.25em;
    }
  }
  &.is-large {
    .pagination-link, .pagination-previous, .pagination-next, .pagination-ellipsis {
      font-size: 1.2rem;
      padding: 0.65em 1em;
      min-width: 2.75em;
    }
  }
  &.is-rounded {
    .pagination-link, .pagination-previous, .pagination-next {
      border-radius: $im-radius-rounded;
    }
  }
}

.tabs {
  align-items: stretch;
  display: flex;
  font-size: $im-font-size-base;
  justify-content: space-between;
  overflow: hidden;
  overflow-x: auto;
  white-space: nowrap;

  ul {
    align-items: center;
    border-bottom-color: $im-divider-color;
    border-bottom-style: solid;
    border-bottom-width: 1px;
    display: flex;
    flex-grow: 1;
    flex-shrink: 0;
    justify-content: flex-start;
    margin: 0;
    padding: 0;
  }

  li {
    display: block;
    margin:0;
    a {
      align-items: center;
      border-bottom-color: $im-divider-color;
      border-bottom-style: solid;
      border-bottom-width: 1px;
      color: $im-text-light;
      display: flex;
      justify-content: center;
      margin-bottom: -1px;
      padding: 0.7em 1.25em;
      vertical-align: top;
      text-decoration: none;
      font-weight: $im-font-weight-medium;
      transition: color 0.2s ease, border-color 0.2s ease;

      .icon:first-child { margin-right: 0.5em; }
      .icon:last-child { margin-left: 0.5em; }

      &:hover {
        color: $im-text;
        border-bottom-color: $im-text;
      }
    }
    &.is-active a {
      border-bottom-color: $im-primary;
      color: $im-primary;
      font-weight: $im-font-weight-semibold;
      border-bottom-width: 2px;
    }
  }

  &.is-centered ul { justify-content: center; }
  &.is-right ul { justify-content: flex-end; }

  &.is-boxed {
    ul { border-bottom: none; }
    li a {
      border: 1px solid $im-divider-color;
      border-radius: $im-radius-small $im-radius-small 0 0;
      &:hover {
        background-color: $im-body-background;
        border-bottom-color: $im-divider-color;
      }
    }
    li.is-active a {
      background-color: $im-content-background;
      border-color: $im-divider-color;
      border-bottom-color: transparent !important;
    }
  }

  &.is-toggle {
    ul { border-bottom: none; }
    li + li { margin-left: 0; }
    li a {
      border: 1px solid $im-border-color;
      margin-bottom: 0;
      position: relative;
      &:hover {
        background-color: $im-body-background;
        border-color: $im-border-color-strong;
        z-index: 2;
      }
    }
    li:first-child a { border-radius: $im-radius 0 0 $im-radius; }
    li:last-child a { border-radius: 0 $im-radius $im-radius 0; }
    li:not(:first-child) a { margin-left: -1px; }
    li.is-active a {
      background-color: $im-primary;
      border-color: $im-primary;
      color: $im-primary-invert;
      z-index: 1;
    }
  }
  &.is-toggle.is-toggle-rounded {
    li:first-child a { border-radius: $im-radius-rounded 0 0 $im-radius-rounded; }
    li:last-child a { border-radius: 0 $im-radius-rounded $im-radius-rounded 0; }
  }

  &.is-small { font-size: $im-font-size-small; }
  &.is-medium { font-size: 1.25rem; }
  &.is-large { font-size: 1.5rem; }
}

.panel {
  font-size: $im-font-size-base;
  border: 1px solid $im-border-color;
  border-radius: $im-radius;
  box-shadow: $im-shadow-sm;
  background-color: $im-content-background;

  .panel-heading {
    background-color: $im-body-background;
    border-bottom: 1px solid $im-divider-color;
    color: $im-text-strong;
    font-size: 1.1em;
    font-weight: $im-font-weight-semibold;
    line-height: 1.3;
    padding: 0.75em 1em;
    border-radius: $im-radius $im-radius 0 0;
  }

  .panel-tabs {
    display: flex;
    border-bottom: 1px solid $im-divider-color;
    font-size: $im-font-size-small;
    a {
      padding: 0.6em 1em;
      color: $im-text-light;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
      transition: color 0.2s ease, border-color 0.2s ease;
      &:hover { color: $im-text; }
      &.is-active { color: $im-primary; border-bottom-color: $im-primary; font-weight: $im-font-weight-medium; }
    }
  }

  .panel-block {
    display: flex;
    align-items: center;
    color: $im-text;
    padding: 0.75em 1em;
    border-bottom: 1px solid $im-divider-color;
    transition: background-color 0.2s ease, color 0.2s ease;
    &:last-child { border-bottom: none; }

    .panel-icon {
      color: $im-text-light;
      font-size: 0.9em;
      margin-right: 0.75em;
      display: inline-flex;
      align-items: center;
      transition: color 0.2s ease;
    }
    input[type="checkbox"] {
      margin-right: 0.75em;
    }
    &:hover {
      background-color: $im-body-background;
      color: $im-text-strong;
      .panel-icon { color: $im-primary; }
    }
    &.is-active {
      border-left: 3px solid $im-primary;
      color: $im-primary;
      font-weight: $im-font-weight-medium;
      padding-left: calc(1em - 3px);
      .panel-icon { color: $im-primary; }
    }
    .control { flex-grow: 1; }
    .input, .button, .select { box-shadow: none; font-size: 0.95em; }
  }
}

.modal {
  align-items: center;
  display: none;
  flex-direction: column;
  justify-content: center;
  overflow: hidden;
  position: fixed;
  z-index: 40;
  top: 0; left: 0; right: 0; bottom: 0;

  &.is-active { display: flex; }

  .modal-background {
    background-color: rgba($im-text-strong, 0.86);
    position: absolute;
    top:0; left:0; right:0; bottom:0;
  }

  .modal-content, .modal-card {
    margin: 0 auto;
    max-height: calc(100vh - 40px);
    overflow: auto;
    position: relative;
    width: 100%;
    animation: im-modal-fade-in 0.3s ease-out;
  }
  @media screen and (min-width: $tablet) {
    .modal-content, .modal-card { margin: 0 20px; }
  }

  .modal-content {
    max-width: 640px;
    .box { box-shadow: $im-shadow-xl; }
  }

  .modal-card {
    display: flex;
    flex-direction: column;
    max-height: calc(100vh - 40px);
    overflow: hidden;
    width: 100%;
    max-width: 640px;
    background-color: $im-content-background;
    border-radius: $im-radius-large;
    box-shadow: $im-shadow-xl;

    .modal-card-head {
      align-items: flex-start;
      background-color: $im-body-background;
      border-bottom: 1px solid $im-divider-color;
      border-radius: $im-radius-large $im-radius-large 0 0;
      display: flex;
      flex-shrink: 0;
      justify-content: space-between;
      padding: 1.25rem 1.5rem;
      position: relative;

      .modal-card-title {
        color: $im-text-headings;
        flex-grow: 1;
        flex-shrink: 1;
        font-size: $size-4;
        line-height: 1.3;
        margin-right: 1rem;
      }
      .delete {
        margin-left: auto;
      }
    }

    .modal-card-body {
      -webkit-overflow-scrolling: touch;
      background-color: $im-content-background;
      flex-grow: 1;
      flex-shrink: 1;
      overflow: auto;
      padding: 1.5rem;
    }

    .modal-card-foot {
      align-items: center;
      background-color: $im-body-background;
      border-top: 1px solid $im-divider-color;
      border-radius: 0 0 $im-radius-large $im-radius-large;
      display: flex;
      flex-shrink: 0;
      justify-content: flex-end;
      padding: 1.25rem 1.5rem;
      .button:not(:last-child) { margin-right: 0.75rem; }
    }
  }

  .modal-close {
    background: none;
    border: none;
    cursor: pointer;
    display: inline-block;
    position: fixed;
    right: 20px;
    top: 20px;
    height: 40px;
    width: 40px;
    &::before, &::after {
      background-color: $im-text-invert;
      content: "";
      display: block;
      left: 50%;
      position: absolute;
      top: 50%;
      transform: translateX(-50%) translateY(-50%) rotate(45deg);
      transform-origin: center center;
      height: 2px;
      width: 60%;
    }
    &::after { transform: translateX(-50%) translateY(-50%) rotate(-45deg); }
    &:hover, &:focus { opacity: 0.8; }
    &.is-large { height: 48px; width: 48px; }
  }
}
@keyframes im-modal-fade-in {
  from { opacity: 0; transform: scale(0.95) translateY(10px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

.breadcrumb {
  font-family: $im-family-sans-serif;
  font-size: $im-font-size-base;
  white-space: nowrap;
  margin-bottom: $im-block-spacing;

  ul {
    align-items: flex-start;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    margin: 0; padding: 0;
  }
  li {
    align-items: center;
    display: flex;
    margin: 0;
    &:first-child a { padding-left: 0; }
    & + li::before {
      color: $im-text-light;
      content: "/";
      margin: 0 0.75em;
    }
    a {
      align-items: center;
      color: $im-link-color;
      display: flex;
      justify-content: center;
      padding: 0.25em 0.5em;
      text-decoration: none;
      font-weight: $im-font-weight-normal;
      border-radius: $im-radius-small;
      transition: color 0.2s ease, background-color 0.2s ease;
      &:hover {
        color: $im-link-color-hover;
        background-color: $im-divider-color;
      }
    }
    &.is-active a {
      color: $im-text;
      font-weight: $im-font-weight-medium;
      pointer-events: none;
      background-color: transparent;
    }
  }
  &.is-centered ul { justify-content: center; li:first-child a { padding-left: 0.5em;} }
  &.is-right ul { justify-content: flex-end; li:first-child a { padding-left: 0.5em;} }
  &.is-small { font-size: $im-font-size-small; }
  &.is-medium { font-size: 1.25rem; }
  &.is-large { font-size: 1.5rem; }
  &.has-arrow-separator li + li::before { content: "\\0003E"; }
  &.has-bullet-separator li + li::before { content: "\\02022"; margin: 0 0.5em;}
  &.has-dot-separator li + li::before { content: "."; font-weight: $im-font-weight-bold; margin: 0 0.4em;}
  &.has-succeeds-separator li + li::before { content: "\\0227B"; }
}

.level {
  align-items: center;
  justify-content: space-between;
  @media screen and (max-width: ($tablet - 1px)) {
    .level-item:not(:last-child) { margin-bottom: 0.75rem; }
  }
  @media screen and (min-width: $tablet) {
    display: flex;
    .level-left, .level-right {
      display: flex;
      align-items: center;
      flex-basis: auto;
      flex-grow: 0;
      flex-shrink: 0;
    }
    .level-left { justify-content: flex-start; margin-right: auto; }
    .level-right { justify-content: flex-end; margin-left: auto; }
    .level-item {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-basis: auto;
      flex-grow: 0;
      flex-shrink: 0;
      &:not(:last-child) { margin-right: 0.75rem; }
    }
  }
  &.is-mobile {
    display: flex;
    .level-item:not(:last-child) { margin-bottom: 0; margin-right: 0.75rem; }
  }
  .level-item {
    text-align: center;
    .title, .subtitle { margin-bottom: 0.5rem; }
  }
}

.media {
  align-items: flex-start;
  display: flex;
  text-align: left;
  .media-left, .media-right {
    flex-basis: auto;
    flex-grow: 0;
    flex-shrink: 0;
  }
  .media-left { margin-right: 1rem; }
  .media-right { margin-left: 1rem; }
  .media-content {
    flex-basis: auto;
    flex-grow: 1;
    flex-shrink: 1;
    text-align: left;
    overflow-x: auto;
    .content:not(:last-child) { margin-bottom: 0.75rem; }
  }
  & + .media {
    border-top: 1px solid $im-divider-color;
    margin-top: 1rem;
    padding-top: 1rem;
  }
}

.menu {
  font-size: $im-font-size-base;
  .menu-label {
    color: $im-text-light;
    font-size: 0.85em;
    font-weight: $im-font-weight-semibold;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 0.75em;
    margin-top: 1em;
    &:not(:first-child) { margin-top: 1.5em; }
  }
  .menu-list {
    line-height: 1.5;
    margin: 0; padding: 0;
    list-style: none;

    a {
      border-radius: $im-radius-small;
      color: $im-text;
      display: block;
      padding: 0.6em 1em;
      text-decoration: none;
      font-weight: $im-font-weight-normal;
      transition: background-color 0.2s ease, color 0.2s ease, padding-left 0.2s ease;

      .icon {
        vertical-align: middle;
        margin-right: 0.6em;
        color: $im-text-light;
        transition: color 0.2s ease;
        i.ph-duotone {
          font-size: 1.2em;
          --ph-secondary-color: #{rgba($im-text-light, 0.4)};
          --ph-primary-color: #{$im-text-light};
        }
      }

      &:hover {
        background-color: $im-body-background;
        color: $im-text-strong;
        .icon, .icon i.ph-duotone {
          color: $im-primary;
          --ph-primary-color: #{$im-primary};
          --ph-secondary-color: #{rgba($im-primary, 0.4)};
        }
      }
      &.is-active {
        background-color: $im-primary;
        color: $im-primary-invert;
        font-weight: $im-font-weight-medium;
        box-shadow: $im-shadow-sm inset;
        padding-left: 1.2em;

        .icon, .icon i.ph-duotone {
          color: $im-primary-invert;
          --ph-primary-color: #{$im-primary-invert};
          --ph-secondary-color: #{rgba($im-primary-invert, 0.5)};
        }
      }
    }
    ul {
      margin: 0.75em 0 0.75em 0.75em;
      padding-left: 0.75em;
      border-left: 1px solid $im-divider-color;
      list-style: none;
      a {
        font-size: 0.95em;
        padding: 0.5em 0.85em;
      }
    }
  }
}

.footer {
  background-color: $im-footer-background;
  color: $im-footer-text;
  padding: 3rem 1.5rem;
  border-top: 1px solid $im-footer-border;
  font-size: $im-font-size-small;

  a:not(.button) {
    color: $im-link-color;
    font-weight: $im-font-weight-normal;
    &:hover {
      color: $im-link-color-hover;
      text-decoration: underline;
    }
  }
  .content p:last-child { margin-bottom: 0; }
  .icon {
    color: $im-text-light;
    &:hover { color: $im-primary; }
  }
}

// Add any remaining component styles here, e.g., for specific card types or layouts
// Always using your $im- prefixed variables.
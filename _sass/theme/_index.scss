// =========================================================================
// ENJI DEV - BULMA THEME
// main.scss
// =========================================================================

// ==== 0. FONT IMPORTS (Assumed to be in HTML or via @import) ====
// @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700;800&display=swap');

// ==== 1. CUSTOM COLOR PALETTE & THEME VARIABLES (ALL CUSTOM DEFINITIONS FIRST) ====
$im-purple-primary: #7F56D9;
$im-blue-active-nav: #4A47C2;
$im-purple-deep: #6941C6;

$im-text-dark-headings: #101828; // <<<<<<< MOVED UP / ENSURED DEFINITION BEFORE USE
$im-logo-text-main: #301E50;
$im-text-body-main: #4D3D6F;
$im-text-grey-subtle: #667085;
$im-text-light-accent: #53389E;

$im-background-page: #F9FAFB;
$im-background-navbar: #FFFFFF;
$im-background-card: #FFFFFF;
$im-background-button-light: #F0EEF3;
$im-background-feature-card-icon-yellow: #FFD166;
$im-background-feature-card-icon-pink: #EF476F;
$im-background-feature-card-icon-blue: #118AB2;

$im-border-default: #EAECF0;
$im-border-input: #D0D5DD;
$im-border-gridline: #E4E7EC;

$im-white: #FFFFFF;
$im-black: #101828; // Using the darkest text as black reference

// ==== 2. BULMA GLOBAL VARIABLE OVERRIDES ====

// --- Typography ---
$family-sans-serif: "Inter", "Outfit", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
$family-primary: $family-sans-serif;
$family-secondary: $family-sans-serif;

$base-font-size: 16px;
$body-size: $base-font-size;
$body-line-height: 1.7;
$body-color: $im-text-body-main;
$body-weight: 400;

$text: $im-text-body-main;
$text-light: $im-text-grey-subtle;
$text-strong: $im-text-dark-headings; // Now $im-text-dark-headings is defined above

$weight-light: 300;
$weight-normal: 400;
$weight-medium: 500;
$weight-semibold: 600;
$weight-bold: 700;
$weight-extrabold: 800;

$title-color: $im-text-dark-headings; // Using the corrected variable
$title-weight: $weight-bold;
$title-line-height: 1.25;
$title-family: $family-primary;
$title-strong-color: $im-text-dark-headings;
$title-strong-weight: $weight-extrabold;

$subtitle-color: $im-text-grey-subtle;
$subtitle-weight: $weight-normal;
$subtitle-line-height: 1.5;
$subtitle-family: $family-primary;

$size-1: 3rem;
$size-2: 2.25rem;
$size-3: 1.875rem;
$size-4: 1.5rem;
$size-5: 1.125rem;
$size-6: 1rem;
$size-7: 0.875rem;

// --- Colors ---
$primary: $im-purple-primary;
$link: $im-purple-deep; // Use the deeper purple for links
$link-hover: $primary;
$link-hover-border: transparent;

$info: $im-blue-active-nav;
$success: #10B981;
$warning: #F59E0B;
$danger: #EF4444;

// It's crucial Bulma's $white and $black are available for its calculations.
// If we override them, they must be defined before Bulma uses them internally.
$white: $im-white; // Overriding Bulma's $white with our custom one
$black: $im-black; // Overriding Bulma's $black

// Scheme colors
$scheme-main: $white; // Card backgrounds, etc. Should use the overridden $white
$scheme-main-bis: darken($white, 2%);
$scheme-main-ter: darken($white, 4%);
$scheme-invert: $white; // Text color on $primary buttons (was $im-text-dark-headings, UI shows white text on purple button)
$text-invert: $white;   // General inverted text color

// Backgrounds and Borders
$body-background-color: $im-background-page;
$background: $im-background-page;
$border: $im-border-default;
$border-light: lighten($im-border-default, 3%);
$border-hover: $primary;

// --- Layout & Spacing ---
$radius-small: 6px;
$radius: 8px;
$radius-large: 12px;
$radius-rounded: 9999px;

$control-radius: $radius;

$gap: 32px;
$section-padding: 6rem 1.5rem;
$section-padding-medium: $section-padding; // Keep consistent unless specified
$section-padding-large: $section-padding; // Keep consistent unless specified
$container-offset: ($gap * 2);
$container-max-width: 1152px;


// ==== 3. BULMA COMPONENT VARIABLE OVERRIDES ====
// (These use the variables defined in sections 1 and 2)

// --- Navbar ---
$navbar-background-color: $im-background-navbar; // Explicitly white navbar bg
$navbar-item-color: $im-text-body; // Regular body text color for nav items
$navbar-item-hover-color: $primary;
$navbar-item-hover-background-color: lighten($primary, 42%); // Very light purple on hover
$navbar-item-active-color: $white; // For the specific "Work" item
$navbar-item-active-background-color: $im-blue-active-nav;
$navbar-dropdown-background-color: $white;
$navbar-dropdown-item-hover-background-color: $im-background-page;
$navbar-dropdown-item-hover-color: $primary;
$navbar-dropdown-border-top: 2px solid $primary;
$navbar-dropdown-arrow: $im-purple-deep;
$navbar-height: 68px;
$navbar-padding-vertical: 0rem;
$navbar-padding-horizontal: 0rem;
$navbar-item-img-max-height: 28px;
$navbar-box-shadow-size: 0 1px 3px;
$navbar-box-shadow-color: rgba($black, 0.05);

// --- Buttons ---
$button-family: $family-primary;
$button-color: $white; // Text color for standard $primary button
$button-background-color: $primary;
$button-border-color: $primary;
$button-border-width: 1px;
$button-padding-vertical: 0.8em;
$button-padding-horizontal: 1.75em;
$button-hover-background-color: darken($primary, 6%);
$button-hover-border-color: darken($primary, 6%);
$button-active-background-color: darken($primary, 8%);
$button-active-border-color: darken($primary, 8%);
$button-focus-box-shadow-color: rgba($primary, 0.25);
$button-radius: $radius;

$button-light-background-color: $im-button-bg-light;
$button-light-color: $im-logo-text-main; // Darker purple text on light button
$button-light-border-color: $im-button-bg-light;
$button-light-hover-background-color: darken($im-button-bg-light, 4%);
$button-light-hover-color: darken($im-logo-text-main, 5%);
$button-light-active-background-color: darken($im-button-bg-light, 6%);

// --- Card ---
$card-background-color: $white; // UI cards are white
$card-color: $text;
$card-header-background-color: $white;
$card-header-color: $text-strong;
$card-header-padding: 1.25rem;
$card-header-weight: $weight-semibold;
$card-shadow: 0 8px 24px rgba($im-logo-text-main, 0.05), 0 2px 8px rgba($im-logo-text-main, 0.03);
$card-radius: $radius-large;
$card-content-padding: $card-header-padding;
$card-footer-border-top: 1px solid $im-divider-ui;
$card-footer-padding: 1rem $card-header-padding;

// --- Tags ---
$tag-background-color: lighten($primary, 42%); // Default tag bg (very light primary)
$tag-color: $primary;                  // Text color for default tags (matches primary)
$tag-radius: $radius-small;
$tag-padding-left: 0.85em;
$tag-padding-right: 0.85em;

$primary-light: lighten($primary, 42%); // For .is-primary.is-light
$primary-invert: $primary;              // Text color on primary-light tags

$info-light: lighten($info, 38%);
$info-invert: $info;

$warning-light: lighten($warning, 35%);      // Lighter yellow for warning tags
$warning-invert: darken($warning, 30%); // Darker text for contrast on light yellow

// --- Forms ---
$input-background-color: $white;
$input-border-color: $im-border-input;
$input-color: $text;
$input-hover-border-color: darken($im-border-input, 10%);
$input-focus-border-color: $primary;
$input-focus-box-shadow-color: rgba($primary, 0.2);
$input-placeholder-color: $im-text-grey-subtle;
$input-radius: $radius;
$label-color: $text-strong;
$label-weight: $weight-medium;
$help-color: $text-light;


// ==== 4. IMPORT BULMA ====
@import "/node_modules/bulma/sass/index"; // Adjust path if necessary


// ==== 5. ADDITIONAL GLOBAL STYLES & CUSTOM COMPONENT STYLES (AFTER BULMA IMPORT) ====
// (Same as before, ensuring variables used here are defined or from Bulma)

html {
    background-color: $body-background-color;
    scroll-behavior: smooth;
}

body {
    position: relative;
    overflow-x: hidden;
}

body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background-image: radial-gradient($im-border-gridline 0.5px, transparent 0.5px);
    background-size: 28px 28px;
    z-index: -2;
    opacity: 0.5;
}
body::after {
    content: "";
    position: fixed;
    top: 0; left: 0; width: 100%; height: 150vh;
    background: linear-gradient(
        to bottom,
        rgba(red($im-background-page), green($im-background-page), blue($im-background-page), 0) $navbar-height,
        rgba(red($im-background-page), green($im-background-page), blue($im-background-page), 0.2) calc(#{$navbar-height} + 10vh),
        $im-background-page calc(#{$navbar-height} + 45vh)
    );
    z-index: -1;
    pointer-events: none;
}

.im-navbar-logo .im-logo-e { color: $primary; }
.im-navbar-logo .im-logo-dev { color: $primary; opacity: 0.75; }

.navbar-item.im-work-active {
    background-color: $im-blue-active-nav !important;
    color: $white !important;
    border-radius: $radius-small !important;
    padding: 0.5em 1.1em !important;
    display: inline-flex;
    align-items: center;
    max-height: calc(#{$navbar-height} - 2rem);
    margin-top: auto;
    margin-bottom: auto;
}
.navbar-item.im-work-active:hover { background-color: darken($im-blue-active-nav, 5%) !important; }
.navbar-item.im-work-active .icon.im-active-arrow { margin-left: 0.4em; svg path { fill: $white; } }

.im-quick-access-button {
    font-size: $size-7 !important;
    .im-quick-access-key {
        background-color: darken($button-light-background-color, 7%); // Using Bulma variable here
        color: $im-text-body;
        border-radius: 3px;
        padding: 0.15em 0.45em;
        font-size: 0.8em;
        margin-left: 0.75em;
        font-weight: $weight-semibold;
    }
}

.hero.im-hero-main {
    padding-top: 2rem; padding-bottom: 4rem;
    .hero-body { padding-left: 0; padding-right: 0; }
    .im-hero-greeting { font-size: $size-3; font-weight: $weight-medium; color: $text-light; margin-bottom: 0.5rem; }
    .im-hero-title {
        font-size: 4rem; line-height: 1.1; font-weight: $weight-extrabold; color: $im-text-dark-headings; margin-bottom: 0.75rem;
        .im-hero-name-highlight { color: $primary; }
    }
    .im-hero-subtitle { font-size: $size-4; color: $im-text-body; font-weight: $weight-normal; max-width: 600px; line-height: 1.5; margin-bottom: 2rem; }
    .im-hero-buttons .button { margin-right: 0.75rem; margin-bottom: 0.75rem; }
}

.im-feature-card {
    background-color: $white; border-radius: $radius-large; padding: 1.75rem; box-shadow: $card-shadow; text-align: left; height: 100%;
    .im-feature-icon-wrapper {
        display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 50%; margin-bottom: 1rem; color: $white; font-size: 1.5rem;
    }
    &.is-yellow .im-feature-icon-wrapper { background-color: $im-background-feature-card-icon-yellow; }
    &.is-pink .im-feature-icon-wrapper { background-color: $im-background-feature-card-icon-pink; }
    &.is-blue .im-feature-icon-wrapper { background-color: $im-background-feature-card-icon-blue; }
    .title.is-6 { font-weight: $weight-semibold; color: $text-strong; margin-bottom: 0.5rem; }
    .content p { font-size: $size-7; color: $text-light; line-height: 1.6; }
}

.im-decorative-title-wrapper {
    text-align: center; margin-top: 6rem; margin-bottom: 6rem;
    .im-decorative-line { display: inline-block; width: 80px; height: 2px; background-color: $im-divider-ui; vertical-align: middle; }
    .im-decorative-title-text {
        font-size: $size-2; font-weight: $weight-light; color: $text-light; margin-left: 1.5rem; margin-right: 1.5rem;
        .is-strong { font-weight: $weight-bold; color: $text-strong; }
        .is-highlight { background-color: lighten($primary, 35%); color: $primary; padding: 0.1em 0.3em; border-radius: $radius-small; }
    }
}

.im-principles-list {
    .im-principle-item {
        background-color: $white; border-radius: $radius-large; padding: 1.5rem; box-shadow: $card-shadow; display: flex; align-items: center; margin-bottom: $gap;
        .im-principle-number { font-size: 3rem; font-weight: $weight-bold; color: $im-text-grey-subtle; margin-right: 1.5rem; line-height: 1; }
        .im-principle-content .title.is-5 { font-weight: $weight-semibold; margin-bottom: 0.25rem; }
        .im-principle-content p { font-size: $size-7; color: $text-light; }
    }
}

.im-small-task-card {
    border-radius: $radius-large; box-shadow: $card-shadow;
    .im-card-icon-header {
        display: flex; align-items: center; margin-bottom: 0.75rem;
        .icon {
            width: 36px; height: 36px; border-radius: $radius-small; background-color: $info; color: $white; display: inline-flex; align-items: center; justify-content: center; font-weight: $weight-bold; font-size: $size-6; margin-right: 0.75rem;
        }
        .tag { margin-left: auto; }
    }
    .title.is-6 { font-weight: $weight-semibold; margin-bottom: 0.25rem; }
    p.is-size-7 { color: $text-light; margin-bottom: 0.75rem; }
    .tags .tag { font-size: 0.7rem; padding: 0.5em 0.75em;}
    .im-task-meta { font-size: $size-7; color: $text-light; .icon { color: $text-light;} }
}

.footer {
    background-color: $im-background-page; padding: 3rem 1.5rem 3rem; border-top: 1px solid $im-divider-ui;
    .footer-column-title { font-weight: $weight-semibold; color: $text-strong; margin-bottom: 1rem; font-size: $size-6; }
    .footer-links a.footer-link {
        color: $text-light; display: block; padding: 0.3rem 0; font-size: $size-7;
        &:hover { color: $primary; }
    }
    .footer-social-icons .icon {
        color: $text-light; font-size: 1.25rem; margin-right: 0.75rem;
        &:hover { color: $primary; }
    }
    .footer-bottom-text { font-size: $size-7; color: $text-light; border-top: 1px solid $im-divider-ui; padding-top: 1.5rem; margin-top: 1.5rem; }
}
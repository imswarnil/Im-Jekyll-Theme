// main.scss (or your primary SCSS file)

//-------------------------------------------------------------------
// 1. FONT FAMILY DEFINITIONS (Static values from your theme)
//-------------------------------------------------------------------
$font-family-main-theme: "Geist", "Outfit", Arial, sans-serif;
$font-family-headings-theme: "Geist", "Outfit", Arial, sans-serif;
$font-family-buttons-theme: $font-family-main-theme; // As per your theme
$font-family-mono-theme: "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

//-------------------------------------------------------------------
// 2. STATIC COLOR & VALUE DEFINITIONS FOR BULMA VARIABLES
// Directly assign values from your theme's CSS custom property list.
//-------------------------------------------------------------------

// Core Colors
$black: #000;                     // from --color-contrast
$white: #fff;                     // from --color-background
$background: $white;

$grey-lightest: #f3f3f3;         // from --color-background-100 (Bulma's $white-ter)
$grey-lighter: #ededed;          // from --color-background-200 (Bulma's $white-bis approx)
$grey-light: #dadada;            // from --color-background-300
$grey: #b2b2b2;                  // from --color-mute
$grey-dark: #757575;             // from --color-secondary (used for $text-light by Bulma)
$grey-darker: #4d4d4d;           // from --color-foreground (used for $text by Bulma)

// Text
$text: $grey-darker;              // --color-foreground
$text-light: $grey-dark;         // --color-secondary
$text-strong: $black;

// Borders
$border: hsl(0, 0%, 50%, 0.2);   // --color-border
$border-light: hsl(0, 0%, 50%, 0.15); // Manually lighter version of border
$border-hover: $primary;         // Will use the $primary defined below

// Accents & Semantic Colors
$primary: #e53935;               // Your --ghost-accent-color / --jk-accent-color
$link: $primary;                  // Links will use the primary color
$info: hsl(217, 71%, 53%);       // Bulma default, or your theme's blue if any
$success: #348f3f;               // --color-success
$warning: hsl(48, 100%, 67%);    // Bulma default, or your theme's yellow
$danger: #c34d4d;                // --color-error

// Typography
$family-sans-serif: $font-family-main-theme !default;
$family-monospace: $font-family-mono-theme !default;
$family-primary: $family-sans-serif;
$family-secondary: $font-family-headings-theme; // For .title class

$weight-light: 300;
$weight-normal: 400;
$weight-medium: 500;
$weight-semibold: 600;
$weight-bold: 700;

// Bulma Font Sizes - mapping to theme's conceptual sizes
$size-1: 1.75rem * 1.2; // Slightly larger than theme H1 for Bulma's largest title
$size-2: 1.75rem;       // Theme H1 (--font-size-h1)
$size-3: 1.375rem;      // Theme H2
$size-4: 1.25rem;       // Theme H3
$size-5: 1.125rem;      // Theme --font-large / H4 / H5
$size-6: 1rem;          // Theme H6 / --font-base
$size-7: 0.875rem;      // Theme --font-small

// General variables
$body-background-color: $background;
$body-size: $size-6; // Set body base to 1rem (16px from --font-base)
$body-color: $text;
$body-family: $family-primary;
$body-weight: $weight-normal;
$body-line-height: 1.5; // From theme

$link-color: $link; // Will be $primary
// For link hover, if we can't use darken, we'll override with CSS custom props later
// Or define a static hover color:
$link-hover: #c1302c; // Manually slightly darker version of #e53935
$link-decoration: underline;
$link-hover-decoration: underline; // Can make this transparent with CSS vars later

// Component specific variables
// SHARP EDGES, NO SHADOW, LIGHT BORDER for cards/boxes
$radius-small: 0px;
$radius: 0px;
$radius-large: 0px;
$radius-rounded: 9999px; // For elements that are meant to be fully round

// Buttons (values from your theme's --button--* CSS vars)
$button-color: #fff; // --color-accent-foreground for your primary
$button-background-color: $primary; // --ghost-accent-color
$button-border-color: transparent;
$button-border-width: 0px;

$button-hover-color: $white; // --color-background (which is white)
$button-hover-background-color: $black; // --color-contrast (which is black)
$button-hover-border-color: transparent;

$button-focus-border-color: $primary;
// For rgba(229,57,53,0.25) without Sass functions:
$button-focus-box-shadow-color: rgba(229, 57, 53, 0.25);
$button-focus-box-shadow-size: 0 0 0 0.125em;

$button-active-color: $button-hover-color;
$button-active-background-color: #1a1a1a; // Slightly lighter than pure black for active

$button-text-color: $text-strong;
$button-text-hover-background-color: $grey-lighter; // was $white-ter (#f3f3f3)
$button-text-hover-color: $text-strong;

$button-family: $font-family-buttons-theme;
$button-weight: $weight-medium;
$button-radius: 20px; // Derived from theme: calc(2.5rem * 0.5)
$control-radius: $button-radius; // Inputs etc. match button radius

// Card & Box: SHARP EDGES, NO SHADOW. Border will be added via CSS overrides.
$card-background-color: $white;
$card-color: $text;
$card-header-color: $black;
$card-radius: $radius; // 0px
$card-shadow: none; // No shadow
$card-header-padding: 1rem 1.25rem; // approx theme --spacing-7 to --spacing-8
$card-content-padding: 1.25rem; // approx theme --spacing-8
$card-footer-border-top: 1px solid $border;

$box-background-color: $white;
$box-color: $text;
$box-radius: $radius; // 0px
$box-shadow: none; // No shadow
$box-padding: 1.25rem; // Bulma default, approx --spacing-8

// Forms (Inputs, Textarea, Select)
$input-color: $black; // --color-contrast
$input-background-color: $grey-lightest; // --color-background-100
$input-border-color: $border; // --color-border
$input-hover-border-color: $border; // No change on hover, or define a static darker
$input-focus-border-color: $primary;
$input-placeholder-color: $grey; // --color-mute
$input-radius: 24px; // 1.5rem from theme's form styles
$input-shadow: none;
$input-weight: $weight-medium;

$label-color: $black; // --color-contrast
$label-weight: $weight-medium;

// Navbar
$navbar-background-color: $white; // Solid background initially
$navbar-height: 58px; // --navbar--min-height
$navbar-item-color: $black; // --color-contrast for nav items
$navbar-item-hover-color: $primary; // Accent on hover
$navbar-item-hover-background-color: $grey-lightest; // --color-background-100
$navbar-item-active-color: $primary;
$navbar-item-active-background-color: $grey-lightest;
$navbar-dropdown-background-color: $white; // --dropdown--background-color
$navbar-dropdown-border-top: 1px solid $border;
$navbar-dropdown-radius: 8px; // --radius-2 from theme
$navbar-dropdown-shadow: 0 20px 60px -10px hsla(0, 4%, 68%, 0.24), 0 4px 20px -8px rgba(0, 0, 0, 0.24); // --shadow
$navbar-divider-background-color: $border;

// Titles
$title-family: $font-family-headings-theme;
$title-color: $black;
$title-weight: $weight-semibold;
$title-line-height: 1.1; // From theme H1
$subtitle-family: $font-family-headings-theme;
$subtitle-color: $grey-dark; // --color-secondary
$subtitle-weight: $weight-regular;
$subtitle-line-height: 1.2; // From theme H2/H3

// Generic
$hr-background-color: $border;
$hr-height: 1px;
$hr-margin: 1.5rem 0; // approx --vertical-rhythm

// Container widths
$container-max-width: 700px; // --container--width
$widescreen: 1100px; // --container-wide--width
$fullhd: 1300px; // --featured-image--max-width
$widescreen-enabled: true;
$fullhd-enabled: true;

// Required Bulma variables for compilation
$body-rendering: optimizeLegibility !default;
$control-border-width: 1px !default;
$control-line-height: 1.5 !default;
$variable-columns: true !default;
$speed: 86ms !default;
$easing: ease-out !default;
$gap: 32px !default; // Bulma's default gap between columns, adjust if needed


//-------------------------------------------------------------------
// 4. IMPORT BULMA
//-------------------------------------------------------------------
@import "../node_modules/bulma/sass/index"; // Adjust path if your node_modules is elsewhere relative to this file


//-------------------------------------------------------------------
// 5. DEFINE YOUR CSS CUSTOM PROPERTIES (Using static values from above)
// These are for your own custom components or deeper JS-driven theming.
//-------------------------------------------------------------------
:root {
  /* Your Primary Accent Color */
  --jk-accent-color: #{$primary};
  --jk-accent-color-rgb: 229, 57, 53; /* RGB for #e53935 */
  --jk-accent-foreground-color: #{$button-color}; /* Should be white for #e53935 */

  /* Ghost specific vars (fallbacks) */
  --gh-font-heading: #{$family-secondary}; /* Bulma's $family-secondary */
  --gh-font-body: #{$family-primary};   /* Bulma's $family-primary */
  --ghost-accent-color: var(--jk-accent-color);

  /* Colors. */
  --color-contrast: #{$black};
  --color-background: #{$background};
  --color-background-100: #{$grey-lightest}; /* map to #f3f3f3 */
  --color-background-200: #{$grey-lighter};  /* map to #ededed */
  --color-background-300: #{$grey-light};    /* map to #dadada */
  --color-foreground: #{$text};
  --color-secondary: #{$text-light};
  --color-mute: #{$grey};
  --color-border: #{$border}; /* hsla(0,0%,50%,.2) */
  --color-success: #{$success};
  --color-error: #{$danger};
  --color-overlay: rgba(5, 5, 5, 0.7);

  /* Font. */
  --font-family-headings: var(--gh-font-heading, #{$theme-font-family-headings});
  --font-family-body: var(--gh-font-body, #{$theme-font-family-main});
  --font-family-button: var(--font-family-body);
  --font-family-mono: #{$family-monospace};

  --font-x-small: #{$size-7}; /* 0.75rem */
  --font-small: #{$size-6};   /* 0.875rem */
  --font-base: #{$body-size}; /* 1rem */
  --font-large: #{$size-5};   /* 1.125rem (maps to Bulma's .is-5 title) */

  --font-weight-light: #{$weight-light};
  --font-weight-regular: #{$weight-normal};
  --font-weight-medium: #{$weight-medium};
  --font-weight-semibold: #{$weight-semibold};
  --font-weight-bold: #{$weight-bold};

  /* Spacings. */
  --spacing-1: 0.125rem; --spacing-2: 0.25rem;  --spacing-3: 0.375rem;
  --spacing-4: 0.5rem;   --spacing-5: 0.625rem; --spacing-6: 0.75rem;
  --spacing-7: 1rem;     --spacing-8: 1.25rem;  --spacing-9: 1.875rem;
  --spacing-10: 5rem;    --spacing-11: 6.25rem;
  --vertical-rhythm: 1.5rem;

  /* Border radius. */
  --radius-1: 6px;  /* Theme static radius */
  --radius-2: 8px;
  --radius-3: 10px;
  --radius-4: 14px;
  --radius-5: 16px;
  --radius-6: clamp(16px, calc(11.25px + 1.25vw), 30px);
  --radius-sharp: 0px;

  /* Layout. */
  --layout--padding: clamp(16px, calc(11.25px + 1.25vw), 30px);

  /* Navbar. */
  --navbar--min-height: #{$navbar-height};

  /* Button. */
  --button--padding-v: var(--spacing-4);
  --button--padding-h: var(--spacing-8);
  --button--min-height: 2.5rem;
  --button--font-size: var(--font-small);
  --button--font-weight: var(--font-weight-medium);
  --button--line-height: 1.5;
  --button--border-radius: #{$button-radius}; /* 20px */
  --button--color: var(--jk-accent-foreground-color);
  --button--background-color: var(--jk-accent-color);
  --button--opacity: 1;
  --button--transition: clip-path 0.2s ease, background-color 0.1s ease,
                      border-color 0.1s ease, color 0.1s ease, opacity 0.1s ease;
  --button-hover--color: var(--color-background);
  --button-hover--background-color: var(--color-contrast);
  --button-hover--opacity: 0.8;

  /* Container. */
  --container--width: #{$container-max-width};
  --container-wide--width: #{$widescreen};

  /* Featured image. */
  --featured-image--max-width: #{$fullhd};

  /* Popup. */
  --popup--overlay--background-color: #e8e8e8;

  /* Avatar. */
  --avatar--size: 2.25rem;
  --avatar-font-size: var(--font-small);
  --avatar--color: var(--color-secondary);
  --avatar--background-color: var(--color-background-100);
  --avatar-hover--background-color: var(--color-background-200);

  /* Dropdown. */
  --dropdown--background-color: var(--color-background);

  /* Shadow. */
  --shadow: #{$theme-shadow-default}; // For elements that should have it
  --shadow-none: none; // Explicit no-shadow

  color-scheme: light;
}


//-------------------------------------------------------------------
// 6. GLOBAL HTML & BODY STYLES OVERRIDES (Using CSS Custom Properties)
//-------------------------------------------------------------------
html {
  background-color: var(--color-background);
  font-size: $body-size; // Sass var here, as html font-size sets base for rems
}

body {
  font-family: var(--font-family-body); // CSS Var
  font-weight: var(--font-weight-regular);
  color: var(--color-foreground);
  background-color: var(--color-background);
  line-height: 1.5; // From theme
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

//-------------------------------------------------------------------
// 7. TYPOGRAPHY & CONTENT OVERRIDES (Using CSS Custom Properties)
//-------------------------------------------------------------------
.title, .subtitle { // Bulma classes
  font-family: var(--font-family-headings);
  color: var(--color-contrast);
}
.title {
  font-weight: var(--font-weight-semibold);
  // Sizes are set by Bulma .is-N classes using $size-N Sass vars
}
.subtitle {
  color: var(--color-secondary);
  font-weight: var(--font-weight-regular);
}

a {
  color: var(--ghost-accent-color); // As per theme general 'a' style
  text-decoration: underline;
  text-decoration-color: currentColor;
  text-decoration-thickness: 0.075em;
  text-underline-offset: 0.15em;
  transition: color .1s ease, text-decoration-color .1s ease;
  &:hover {
    color: var(--ghost-accent-color);
    text-decoration-color: transparent;
  }
}

.content {
  blockquote {
    border-left: 2px solid var(--ghost-accent-color);
    color: var(--color-contrast);
    font-weight: var(--font-weight-medium);
    padding: var(--spacing-4) var(--spacing-7);
    background-color: transparent;
    margin-left: 0; margin-right: 0;
  }

  pre {
    background-color: var(--color-background-100);
    border-radius: var(--radius-2); // Use theme's radius-2 (8px) for code blocks
    padding: var(--spacing-6) var(--spacing-7);
    border: 1px solid var(--color-border); // Add border
    box-shadow: var(--shadow-none); // No shadow
    color: var(--color-contrast);
    font-family: var(--font-family-mono);
    font-size: var(--font-small);
    code {
      background: none !important; color: inherit !important; padding: 0 !important;
      font-size: inherit !important; border-radius: 0 !important; border: none !important;
      box-shadow: none !important;
    }
  }
  :not(pre) > code {
    background-color: var(--color-background-100);
    border-radius: var(--radius-1); // Use theme's radius-1 (6px)
    padding: var(--spacing-2) var(--spacing-3);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-none);
    color: var(--color-contrast);
    font-family: var(--font-family-mono);
    font-size: 0.875em; // From theme
  }
  // Theme's specific list styling from your CSS for .post-content
  ul, ol { padding-left: 0; }
  ul li + li, ol li + li,
  ul ol, ul ul, ol ul, ol ol { margin-top: var(--spacing-4); } /* approx 0.5em */
  ul {
    list-style: none;
    > li {
      padding-left: var(--spacing-8); position: relative;
      &::before {
        content: ""; position: absolute; left: var(--spacing-2); top: 0.65em;
        height: 0.25rem; width: 0.25rem; background-color: currentColor; border-radius: 50%;
      }
      ul > li::before { background-color: transparent; border: 1px solid currentColor; }
      ul ul > li::before { background-color: currentColor; border-radius: 0; }
    }
  }
  ol {
    padding-left: var(--spacing-8);
    list-style: none;
    counter-reset: orderedlist;
    > li::before {
      content: counter(orderedlist) ". "; counter-increment: orderedlist;
      position: absolute; left: 0;
      font-weight: var(--font-weight-medium); font-size: 0.938em;
      color: var(--color-secondary);
    }
    ol { list-style: lower-alpha; padding-left: var(--spacing-8); }
    ol ol { list-style: lower-roman; }
  }
}


//-------------------------------------------------------------------
// 8. BULMA COMPONENT OVERRIDES (Using CSS Custom Properties)
//-------------------------------------------------------------------
.button {
  font-family: var(--font-family-button);
  font-size: var(--button--font-size);
  font-weight: var(--font-weight-semibold); // Theme uses semibold for button text
  min-height: var(--button--min-height);
  line-height: var(--button--line-height);
  padding: var(--button--padding-v) var(--button--padding-h);
  border-radius: var(--button--border-radius); // 20px from theme
  border-width: 0; // Theme default
  transition: var(--button--transition);
  color: var(--button--color); // From CSS var --button--color
  background-color: var(--button--background-color); // From CSS var --button--background-color
  opacity: var(--button--opacity);

  &:hover, &:focus {
    color: var(--button-hover--color);
    background-color: var(--button-hover--background-color);
    opacity: var(--button-hover--opacity);
  }
  &.is-primary { // Ensure this specific Bulma class also uses theme button colors
    background-color: var(--jk-accent-color);
    color: var(--jk-accent-foreground-color);
    &:hover, &:focus {
      background-color: var(--button-hover--background-color);
      color: var(--button-hover--color);
    }
  }
  &.is-light {
    background-color: var(--color-background-100);
    color: var(--color-contrast);
    border: 1px solid var(--color-border); // Add border for light buttons
    &:hover, &:focus {
      background-color: var(--color-background-200);
      border-color: var(--color-border); // Or a darker static if needed
    }
  }
}

// Card & Box: SHARP EDGES, LIGHT BORDER, NO SHADOW
.card, .box {
  border-radius: var(--radius-sharp) !important; // 0px
  box-shadow: var(--shadow-none) !important;
  border: 1px solid var(--color-border) !important;
  background-color: var(--color-background);
}

.card {
  .card-header {
    background-color: transparent;
    box-shadow: none;
    border-bottom: 1px solid var(--color-border);
    border-radius: 0 !important;
    padding: var(--spacing-6) var(--spacing-7);
    .card-header-title {
      padding: 0;
      color: var(--color-contrast);
      font-family: var(--font-family-headings);
      font-weight: var(--font-weight-semibold);
    }
  }
  .card-image img { border-radius: 0 !important; }
  .card-content { padding: var(--spacing-7); color: var(--color-foreground); }
  .card-footer {
    border-top: 1px solid var(--color-border);
    background-color: transparent; padding: 0;
    .card-footer-item {
      padding: var(--spacing-6) var(--spacing-7);
      color: var(--jk-accent-color);
      border-right: 1px solid var(--color-border);
      &:last-child { border-right: none; }
      &:hover { background-color: var(--color-background-100); }
    }
  }
}

.box { padding: var(--spacing-8); color: var(--color-foreground); }

.navbar {
  min-height: var(--navbar--min-height);
  background-color: transparent;
  box-shadow: none;
  border-bottom: 1px solid var(--color-border);
  &::before {
    content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--color-background);
    opacity: 0.9; // Theme opacity
    z-index: -1;
    backdrop-filter: blur(10px); // Theme blur
  }
  .navbar-item, .navbar-link { // Theme's nav-link style
    color: var(--color-contrast);
    font-family: var(--font-family-button);
    font-size: var(--font-small);
    font-weight: var(--font-weight-medium);
    padding: var(--spacing-4) var(--spacing-6);
    min-height: 2.375rem; // From theme's .nav-link
    &:hover, &.is-active {
      background-color: var(--color-background-200);
      color: var(--color-contrast); // Theme: current/hover nav items are contrast
    }
  }
  .navbar-dropdown {
    background-color: var(--dropdown--background-color);
    border: 1px solid var(--color-border);
    border-top: none;
    border-radius: 0 0 var(--radius-2) var(--radius-2); // Theme radius-2 (8px)
    box-shadow: var(--shadow); // Use theme shadow
    padding: var(--spacing-2) 0; // Theme dropdown padding
  }
}

// Forms to match theme's input style
.input, .textarea, .select select {
  background-color: var(--color-background-100);
  border: 1px solid transparent; // Theme: initial border is 0 for input
  border-radius: 1.5rem; // 24px from theme form style
  color: var(--color-contrast);
  min-height: 3rem; // Theme form style
  padding: var(--spacing-6) var(--spacing-8); // Theme form style
  font-size: var(--font-small);
  font-weight: var(--font-weight-medium);
  box-shadow: none;

  &:hover { border-color: transparent; } // Still no border on hover
  &:focus, &.is-focused, &:active, &.is-active {
    border-color: var(--jk-accent-color); // Accent color for focus ring
    box-shadow: 0 0 0 0.125em rgba(var(--jk-accent-color-rgb), 0.25);
  }
  &::placeholder { color: var(--color-mute); }
}
label.label { // Bulma .label
  font-size: var(--font-small);
  font-weight: var(--font-weight-medium); // From theme
  color: var(--color-contrast);
  margin-bottom: var(--spacing-4);
}
.select:not(.is-multiple):not(.is-loading)::after { // Dropdown arrow
  border-color: var(--color-contrast);
  opacity: 0.8; // from theme select arrow
  right: var(--spacing-8); // from theme select arrow position
}

// --- Archive Page Specific Styles from your HTML ---
.archive-column-cards {
  .post-item-box { // This is a .box or .card
    // Inherits sharp-bordered-container styles now
    .post-media-container {
      // Your specific image/video styles are good
    }
    .content { // Styles for .content within your archive cards
      .level-item .tag {
        // Bulma default tag styling is fine, colors modified by .is-warning etc.
        // You can adjust padding or font-size here using CSS vars if needed
        // e.g., font-size: var(--font-x-small);
      }
      .title.is-5 {
        font-family: var(--font-family-headings);
        font-weight: var(--font-weight-semibold);
        color: var(--color-contrast);
        margin-bottom: var(--spacing-2); // Tighter margin for card title
      }
      .excerpt-text-column {
        color: var(--color-secondary);
        font-size: var(--font-small);
        line-height: 1.5;
      }
      .message.is-light { // For TLDR in cards
         background-color: var(--color-background-100);
         border-radius: var(--radius-1); // Or var(--radius-sharp)
         border: 1px solid var(--color-border);
         border-left-width: 3px;
         color: var(--color-foreground);
         &.is-warning { border-left-color: $warning; } // Use Bulma SASS var
         &.is-info   { border-left-color: $info; }
         .message-body {
            padding: var(--spacing-2) var(--spacing-3); // Smaller padding for TLDR
            font-size: var(--font-x-small);
         }
      }
    }
    .post-item-footer {
      padding: var(--spacing-6);
      border-top: 1px solid var(--color-border);
      .buttons .button {
        // Will use global button styles. If specific size needed:
        // font-size: var(--font-x-small);
        // min-height: auto; height: 2rem;
        // padding: var(--spacing-2) var(--spacing-5);
        &.is-light {
          border: 1px solid var(--color-border); // Ensure light buttons also get a border
        }
      }
       .tags .tag.is-light {
        background-color: var(--color-background-100);
        color: var(--color-secondary);
      }
    }
  }

  .ad-placeholder-box, .newsletter-box-column {
    // Will inherit general .box styling
    // Ensure display:flex and justify/align content is on the HTML element for centering
  }
  .newsletter-box-column {
    background-color: var(--color-background-100); // Light background
    &.has-background-info-light { // If you use Bulma's class
        background-color: hsl(204, 86%, 53%, 0.1); // Lighten Bulma's info
        .title, .subtitle { color: hsl(204, 86%, 33%);} // Darker info text
        .icon { color: hsl(204, 86%, 53%); }
    }
  }
}
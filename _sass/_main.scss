/* stylelint-disable scss/at-rule-no-unknown */ // If you use stylelint with SCSS preset

// ----------------------------------------------------------
// 1. YOUR CUSTOM BULMA VARIABLE OVERRIDES
// (Map from the provided :root CSS variables)
// ----------------------------------------------------------

// --- Colors ---
// From --color-contrast, --color-background, etc.
$black: #000; // --color-contrast (approx)
$white: #fff; // --color-background
$background: $white;

// Foreground/Text Colors
$text: #4d4d4d; // --color-foreground
$text-light: #757575; // --color-secondary
$text-strong: $black;

// Background Shades
$grey-lightest: #f3f3f3; // --color-background-100
$grey-lighter: #ededed; // --color-background-200
$grey-light: #dadada; // --color-background-300
$grey: #b2b2b2; // --color-mute (approx)
$grey-dark: $text-light;
$grey-darker: $text;

// Accent / Primary Color
$primary: #e53935; // Your existing primary, or pick one from the theme like --ghost-accent-color
$link: $primary;
$info: hsl(204, 86%, 53%); // Default Bulma info, adjust if needed
$success: #348f3f; // --color-success
$warning: hsl(48, 100%, 67%); // Default Bulma warning
$danger: #c34d4d; // --color-error

// Borders
$border: rgba(128, 128, 128, 0.2); // --color-border
$border-light: lighten($border, 10%);
$border-hover: $primary;

// --- Typography ---
// From --font-family-headings, --font-family-body, etc.
$family-sans-serif: "Geist", "Outfit", sans-serif; // Prioritize Geist as per example
$family-monospace: "Roboto Mono", monospace;
$family-primary: $family-sans-serif;
$family-secondary: $family-sans-serif; // If headings and body are same

// Font Sizes (Bulma uses $size-1 to $size-7. We can remap or add new ones)
$size-7: 0.75rem; // --font-x-small (approx to Bulma's smallest)
$size-6: 0.875rem; // --font-small
$size-5: 1rem;    // Default
$size-4: 1.125rem; // --font-large
// Bulma's $size-1, $size-2, $size-3 are larger for headings.

// Font Weights
$weight-light: 300; // --font-weight-light
$weight-normal: 400; // --font-weight-regular
$weight-medium: 500; // --font-weight-medium
$weight-semibold: 600; // --font-weight-semibold
$weight-bold: 700; // --font-weight-bold

// --- Spacings ---
// Bulma uses $gap (64px default) and responsive spacing.
// The provided theme uses very granular spacing. It's hard to map 1:1.
// We can try to influence padding/margins on components.
$radius-small: 6px; // --radius-1 (approx)
$radius: 8px;      // --radius-2
$radius-large: 10px; // --radius-3
$radius-rounded: 290486px; // For fully rounded things

// --- Bulma General Variables ---
$body-background-color: $background;
$body-color: $text;
$body-family: $family-primary;
$body-size: 16px; // Default body font size
$body-weight: $weight-normal;
$body-line-height: 1.5;

$link-color: $link;
$link-hover-color: darken($link, 10%);
$link-decoration: underline;
$link-hover-decoration: none; // Example theme has text-decoration-color: transparent on hover

// --- Bulma Component Variables (Examples) ---
// Buttons (Trying to match --button--* variables)
$button-color: $primary; // This might be --color-accent-foreground if $primary is --ghost-accent-color
$button-background-color: $primary; // This is --ghost-accent-color in the theme
$button-border-color: transparent;
$button-hover-color: $white; // --button-hover--color
$button-hover-background-color: $black; // --button-hover--background-color
$button-focus-color: $button-hover-color;
$button-focus-background-color: $button-hover-background-color;
$button-active-color: $button-hover-color;
$button-active-background-color: darken($button-hover-background-color, 5%);
$button-border-radius: 20px; // --button--border-radius: calc(var(--button--min-height) * 0.5) assuming 40px height
$button-padding-vertical: 0.5rem; // --button--padding-v (--spacing-4)
$button-padding-horizontal: 1.25rem; // --button--padding-h (--spacing-8)
$button-family: $family-primary; // --font-family-button
$button-font-size: $size-6; // --button--font-size
$button-weight: $weight-medium; // --button--font-weight

// Card
$card-background-color: $white;
$card-color: $text;
$card-header-color: $black;
$card-radius: $radius-large; // approx --radius-4 or --radius-5
$card-shadow: 0 20px 60px -10px hsla(0, 4%, 68%, 0.24), 0 4px 20px -8px rgba(0, 0, 0, 0.24); // --shadow

// Box (often used as a card-like container)
$box-background-color: $white;
$box-color: $text;
$box-radius: $radius-small; // --radius-1 or --radius-2
$box-shadow: 0 0.5em 1em -0.125em rgba($black, 0.1), 0 0px 0 1px rgba($black, 0.02); // Default Bulma, adjust to match --shadow if needed
$box-padding: 1.25rem; // Default Bulma, theme might use fluid spacing

// Navbar
$navbar-background-color: rgba($white, 0.9); // To match the :before opacity effect
$navbar-item-color: $text;
$navbar-item-hover-color: $primary;
$navbar-item-hover-background-color: $grey-lightest;
$navbar-height: 58px; // --navbar--min-height
$navbar-padding-vertical: 0.5rem; // --spacing-4 (approx)
$navbar-padding-horizontal: 1rem; // --spacing-7 (approx)

// Other variables can be overridden as needed:
// $input-*, $table-*, $title-*, $subtitle-*, etc.

// ----------------------------------------------------------
// 2. IMPORT BULMA
// ----------------------------------------------------------
@import "../node_modules/bulma/sass/index";
// OR if you are using individual imports:
// @import "../node_modules/bulma/sass/utilities/_all";
// @import "../node_modules/bulma/sass/base/_all";
// @import "../node_modules/bulma/sass/elements/_all";
// @import "../node_modules/bulma/sass/form/_all";
// @import "../node_modules/bulma/sass/components/_all";
// @import "../node_modules/bulma/sass/grid/_all";
// @import "../node_modules/bulma/sass/layout/_all";

// ----------------------------------------------------------
// 3. CSS CUSTOM PROPERTIES FOR THEME & DARK MODE
// (Define these AFTER Bulma import so they can be used to override)
// ----------------------------------------------------------
:root {
  // Light Mode (matches the provided light theme variables)
  --gh-font-heading: "Geist", sans-serif; // Example, can be overridden by Ghost settings
  --gh-font-body: "Geist", sans-serif;   // Example

  --ghost-accent-color: #{$primary}; // Use your Bulma primary
  --color-accent-foreground: #{if(lightness($primary) > 50, $black, $white)}; // Auto-calculate contrast for accent

  --color-contrast: #{$black};
  --color-background: #{$white};
  --color-background-100: #{$grey-lightest};
  --color-background-200: #{$grey-lighter};
  --color-background-300: #{$grey-light};
  --color-foreground: #{$text};
  --color-secondary: #{$text-light};
  --color-mute: #{$grey};
  --color-border: #{$border};
  --color-success: #{$success};
  --color-error: #{$danger};
  --color-overlay: rgba(5, 5, 5, 0.7);

  --font-family-headings: "Geist", sans-serif;
  --font-family-body: "Geist", sans-serif;
  --font-family-button: "Geist", sans-serif; // Redundant if same as body
  --font-x-small: #{$size-7};
  --font-small: #{$size-6};
  --font-large: #{$size-4}; // Bulma size-4

  --font-weight-light: #{$weight-light};
  --font-weight-regular: #{$weight-normal};
  --font-weight-medium: #{$weight-medium};
  --font-weight-semibold: #{$weight-semibold};
  --font-weight-bold: #{$weight-bold};

  // Spacings (map to some Bulma-like values or keep as is for custom components)
  --spacing-1: 0.125rem;
  --spacing-2: 0.25rem;
  --spacing-3: 0.375rem;
  --spacing-4: 0.5rem;  // Bulma p-2, m-2
  --spacing-5: 0.625rem;
  --spacing-6: 0.75rem; // Bulma p-3, m-3
  --spacing-7: 1rem;    // Bulma p-4, m-4
  --spacing-8: 1.25rem;
  --spacing-9: 1.875rem; // Bulma p-5, m-5 (approx)
  --spacing-10: 5rem;
  --spacing-11: 6.25rem;
  --vertical-rhythm: 1.5rem;

  // Border radius
  --radius-1: #{$radius-small};
  --radius-2: #{$radius};
  --radius-3: #{$radius-large};
  // --radius-6 for fluid needs JS or complex CSS, using a fixed value
  --radius-4: 14px;
  --radius-5: 16px;
  --radius-6: 16px; // Fallback for clamp()

  // Layout
  --layout--padding: 1.5rem; // Approx for clamp()

  // Navbar
  --navbar--min-height: #{$navbar-height};

  // Button (using Bulma button styles, these are for reference if building custom buttons)
  --button--padding-v: var(--spacing-4);
  --button--padding-h: var(--spacing-8);
  --button--min-height: 2.5rem;
  --button--font-size: var(--font-small);
  --button--font-weight: var(--font-weight-medium);
  --button--border-radius: calc(var(--button--min-height) * 0.5);
  // --button--color and --button--background-color will be handled by Bulma button classes

  // Container Widths
  --container--width: #{$container-max-width}; // Use Bulma's variable or define new
  --container-wide--width: 1100px; // A bit wider than Bulma's default $widescreen

  --shadow: 0 20px 60px -10px hsla(0, 4%, 68%, 0.24), 0 4px 20px -8px rgba(0, 0, 0, 0.24);

  color-scheme: light;
}

// Dark Mode Variables
// To activate, add data-theme="dark" to the <html> or <body> tag
// Or use prefers-color-scheme media query
[data-theme="dark"] {
  // --ghost-accent-color: var(--color-dark-accent); // You'll need to define --color-dark-accent
  --color-accent-foreground: #fff; // var(--color-dark-accent-foreground)

  --color-contrast: #fff;
  --color-background: #0f0f0f;
  --color-background-100: #212121;
  --color-background-200: #282828;
  --color-background-300: #3f3f3f;
  --color-foreground: #aaa;
  --color-secondary: #808080; // Was 'grey' which is ambiguous
  --color-mute: #666;
  --color-border: rgba(153, 153, 153, 0.3);

  --shadow: 0 20px 60px -10px rgba(0, 0, 0, 0.7), 0 4px 20px -8px rgba(0, 0, 0, 0.7);

  color-scheme: dark;

  // --- Bulma Dark Mode Overrides (Examples) ---
  // These need to be specific to Bulma classes
  // This is where it gets very detailed

  // Body
  background-color: var(--color-background);
  color: var(--color-foreground);

  // Links
  .title, .subtitle, a, .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
    color: var(--color-contrast);
  }
  a:hover {
    color: var(--ghost-accent-color); // Make sure --ghost-accent-color is defined for dark
  }

  // Box / Card
  .box, .card {
    background-color: var(--color-background-100);
    color: var(--color-foreground);
    box-shadow: var(--shadow);
  }
  .card-header-title {
     color: var(--color-contrast);
  }

  // Buttons
  .button.is-primary {
    background-color: var(--ghost-accent-color); // Use the dark accent
    color: var(--color-accent-foreground);
    &:hover {
      // Define hover for dark primary
    }
  }
  .button.is-light { // Bulma's .is-light buttons need dark mode adjustment
    background-color: var(--color-background-200);
    color: var(--color-contrast);
    &:hover {
      background-color: var(--color-background-300);
    }
  }

  // Navbar
  .navbar {
    background-color: rgba(15, 15, 15, 0.9); // Darker with opacity
  }
  .navbar-item, .navbar-link {
    color: var(--color-foreground);
    &:hover {
      color: var(--color-contrast);
      background-color: var(--color-background-100);
    }
  }
  .navbar-burger span {
      background-color: var(--color-contrast);
  }

  // Input, Textarea, Select
  input, textarea, select, .input, .textarea, .select select {
    background-color: var(--color-background-200);
    border-color: var(--color-border);
    color: var(--color-contrast);
    &::placeholder {
        color: var(--color-secondary);
    }
  }
  .select:not(.is-multiple):not(.is-loading)::after { // Dropdown arrow for select
    border-color: var(--color-contrast);
  }


  // ... many more component-specific overrides would be needed ...
}

// Optional: Auto dark mode based on OS preference
// You can wrap the [data-theme="dark"] styles inside this media query if you want it to be system-default
// @media (prefers-color-scheme: dark) {
//   :root { // Or :root:not([data-theme="light"])
//     // ... paste all the dark mode variables and overrides from [data-theme="dark"] here ...
//   }
// }


// ----------------------------------------------------------
// 4. GLOBAL STYLE OVERRIDES (Using CSS Custom Properties or direct values)
// ----------------------------------------------------------
html {
  scroll-behavior: smooth;
  background-color: var(--color-background); // Fallback for body
}

body {
  font-family: var(--font-family-body);
  font-weight: var(--font-weight-regular);
  color: var(--color-foreground);
  background-color: var(--color-background);
  line-height: 1.6; // Slightly more than 1.5 for readability
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6,
.title, .subtitle { // Target Bulma's title classes too
  font-family: var(--font-family-headings);
  color: var(--color-contrast);
  font-weight: var(--font-weight-semibold); // Default semibold for headings
  line-height: 1.2; // Theme default
  margin-bottom: 0.75em; // Default Bulma margin
}

// Specific heading sizes from theme (Bulma has its own scale, this overrides)
h1, .title.is-1 { font-size: 1.75rem; line-height: 1.1; } // --h1 size
h2, .title.is-2 { font-size: 1.375rem; } // --h2 size
h3, .title.is-3 { font-size: 1.25rem; } // --h3 size
h4, .title.is-4 { font-size: 1.188rem; } // --h4 size
h5, .title.is-5 { font-size: 1.125rem; } // --h5 size
h6, .title.is-6 { font-size: 1rem; }     // --h6 size


a {
  color: var(--ghost-accent-color, #{$link}); // Use custom prop, fallback to Bulma var
  text-decoration: underline;
  text-decoration-color: currentColor;
  text-decoration-thickness: 0.075em;
  text-underline-offset: 0.15em;
  transition: color 0.1s ease, text-decoration-color 0.1s ease;

  &:hover {
    color: var(--ghost-accent-color, #{$link-hover}); // Use custom prop, fallback
    text-decoration-color: transparent;
  }
}

// Blockquotes
.content blockquote, blockquote {
  border-left: 2px solid var(--ghost-accent-color, #{$primary});
  color: var(--color-contrast);
  font-weight: var(--font-weight-medium);
  padding-left: var(--spacing-7, 1rem);
  background-color: transparent; // Override Bulma's default bg
  padding-top: 0.5em;
  padding-bottom: 0.5em;
}

// Code blocks
.content pre, pre {
  background-color: var(--color-background-100);
  border-radius: var(--radius-2, #{$radius});
  padding: var(--spacing-6, 0.75rem) var(--spacing-7, 1rem);
  box-shadow: inset 0 0 0 1px var(--color-border);
  color: var(--color-contrast);
  code {
    background-color: transparent !important; // Ensure no double background
    color: inherit !important;
    padding: 0 !important;
    font-size: inherit !important;
  }
}
.content :not(pre) > code, :not(pre) > code {
  background-color: var(--color-background-100);
  border-radius: var(--radius-1, #{$radius-small});
  padding: var(--spacing-2, 0.25rem) var(--spacing-3, 0.375rem);
  box-shadow: inset 0 0 0 1px var(--color-border);
  color: var(--color-contrast);
  font-size: 0.875em;
}


// Tables (basic theming)
.table {
  th {
    color: var(--color-contrast);
    font-weight: var(--font-weight-medium);
  }
  td, th {
     border-color: var(--color-border);
  }
  tr:hover {
    background-color: var(--color-background-100); // Optional hover
  }
}


// ----------------------------------------------------------
// 5. BULMA COMPONENT SPECIFIC OVERRIDES
// (Make Bulma components look more like the target theme)
// ----------------------------------------------------------

// Example: Making .button more like the theme's button
.button {
  font-family: var(--font-family-button);
  font-size: var(--button--font-size) !important; // Use !important cautiously
  font-weight: var(--font-weight-semibold) !important; // Theme uses semibold, Bulma uses medium by default
  min-height: var(--button--min-height);
  padding: var(--button--padding-v) var(--button--padding-h);
  border-radius: var(--button--border-radius);
  transition: var(--button--transition, all 0.15s ease);

  &.is-primary { // Example: ensure primary button matches theme's accent
    background-color: var(--ghost-accent-color);
    color: var(--color-accent-foreground);
    &:hover {
      background-color: var(--button-hover--background-color, $black);
      color: var(--button-hover--color, $white);
      opacity: var(--button-hover--opacity, 0.8);
    }
  }
}


// Example: .card styling
.card {
  background-color: var(--color-background); // Or background-100 from theme
  border-radius: var(--radius-4, 14px);
  box-shadow: var(--shadow);
  color: var(--color-foreground);
  overflow: hidden; // If images go to edge like in card-post-image

  .card-image {
    img {
      border-top-left-radius: var(--radius-4, 14px); // Match card radius
      border-top-right-radius: var(--radius-4, 14px);
    }
  }
  .card-content {
    padding: var(--spacing-8, 1.25rem); // Adjust padding
  }
  .card-header-title {
    color: var(--color-contrast);
    font-family: var(--font-family-headings);
    font-weight: var(--font-weight-semibold);
  }
}

// Example: .navbar (More detailed Navbar styling would be complex)
.navbar {
  min-height: var(--navbar--min-height);
  padding-top: var(--spacing-4);
  padding-bottom: var(--spacing-4);
  &:before { // Pseudo-element for background with opacity
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: var(--color-background);
    opacity: 0.9;
    z-index: -1;
    backdrop-filter: blur(10px); // If supported by browser
  }
  .navbar-item, .navbar-link {
    font-size: var(--font-small);
    font-weight: var(--font-weight-medium);
  }
}

// Container override if needed
.container {
  max-width: var(--container--width); // Default Bulma container is fine usually
  &.is-wide, &.is-widescreen { // If you use Bulma's widescreen modifier
    max-width: var(--container-wide--width);
  }
}

// Your Archive Page Specific Styles (from your last example)
// Encapsulate them to avoid global conflicts if these are only for the archive
.archive-column-cards {
  .post-item-link {
    text-decoration: none;
    color: inherit;
    display: block;
    height: 100%;
  }
  .post-item-box {
    height: 100%;
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
    // Use variables for border-radius and shadow if defined above
    border-radius: var(--radius-2, #{$radius});
    box-shadow: var(--shadow); // Using the theme's shadow
    background-color: var(--color-background); // Or --color-background-100
  }
  .post-item-link:hover .post-item-box {
    transform: translateY(-4px);
    // A slightly more pronounced shadow on hover perhaps
    box-shadow: 0 25px 70px -15px hsla(0, 4%, 60%, .3), 0 5px 25px -10px rgba(0,0,0,.3);
  }
  .post-item-box .content {
    flex-grow: 1;
    h1,h2,h3,h4,h5,h6,.title,.subtitle { color: var(--color-contrast); } // Ensure content titles inherit
    p { color: var(--color-foreground); }
  }
  .post-item-box .post-item-footer {
    border-top: 1px solid var(--color-border);
  }

  .post-media-container {
    position: relative;
  }
  .image img { // Assuming .image is a Bulma class
    object-fit: cover;
    width: 100%;
    height: 100%;
    border-radius: var(--radius-1, #{$radius-small}) var(--radius-1, #{$radius-small}) 0 0; // Rounded top corners
  }
  .video-thumbnail-container-column {
    background-color: var(--color-contrast); // Or a dark grey
    img {
      border-radius: var(--radius-1, #{$radius-small}) var(--radius-1, #{$radius-small}) 0 0;
    }
  }
  // Video play indicator styles from your previous example are good

  // Ad/Newsletter styling
  .ad-placeholder-box, .newsletter-box-column {
    // min-height: 300px; // Already inline
    // Use box styles from Bulma, or customize
    // .box might already have padding, background, etc.
  }
  .newsletter-box-column {
    background-color: var(--color-background-100); // Or a specific accent
    // .icon.is-large {
    //   color: var(--ghost-accent-color); // Example
    // }
  }
}

// Responsive alignment for cards (from your Bulma setup)
@media screen and (min-width: 769px) {
  .archive-column-cards .columns.is-multiline {
    align-items: stretch;
  }
  .archive-column-cards .column {
    display: flex;
  }
}

// Add more specific overrides for other Bulma components as needed
// e.g., .tabs, .pagination, .message, .panel, .hero, .footer

// Ensure Phosphor Icons are loaded if you use them:
// @import url("https://unpkg.com/@phosphor-icons/web@2.0.3/src/fill/style.css");
// @import url("https://unpkg.com/@phosphor-icons/web@2.0.3/src/regular/style.css");
// Or link them in your <head>
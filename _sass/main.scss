
$primary: #e53935;
$link : $primary;
$family-sans-serif: "Outfit", "Arial", sans-serif !default;
$family-monospace: "Roboto Mono", monospace !default;
@import "../node_modules/bulma/sass/index";
:root {
  /* --- Core Colors (Enji.dev often uses a dark base, but we start light) --- */
  --im-color-primary-rgb: 229, 57, 53; /* Your Red */
  --im-color-primary: rgb(var(--im-color-primary-rgb));
  --im-color-primary-light: #ef5350;
  --im-color-primary-dark: #c62828;
  --im-color-primary-inverse: #FFFFFF;

  /* Text Colors - Light Mode */
  --im-color-text: #363636; /* Bulma's default text, slightly darker than your previous */
  --im-color-text-headings: #1A202C; /* Darker for headings */
  --im-color-text-muted: #7a7a7a; /* Bulma's grey-darker, or your #718096 */
  --im-color-text-on-primary: #FFFFFF;
  --im-color-text-on-surface: var(--im-color-text);

  /* Backgrounds & Surfaces - Light Mode */
  --im-color-background: #f4f7f6; /* Very light grey, clean */
  --im-color-surface: #FFFFFF;   /* Cards, boxes */
  --im-navbar-bg-transparent: rgba(244, 247, 246, 0.65); /* Corresponds to background + alpha */
  --im-navbar-bg-scrolled: rgba(255, 255, 255, 0.92);
  --im-navbar-border-transparent: rgba(220, 220, 220, 0.0);
  --im-navbar-border-scrolled: rgba(220, 220, 220, 0.5);
  --im-color-surface-alt: #F0F2F5; /* Subtle variations */

  /* Borders - Light Mode */
  --im-color-border-rgb: 220, 220, 220; /* Lighter than default Bulma border */
  --im-color-border: rgb(var(--im-color-border-rgb)); /* #dcdcdc */
  --im-color-border-light: #e6e6e6;
  --im-color-border-hover: #cccccc;

  /* Links */
  --im-color-link: var(--im-color-primary);
  --im-color-link-hover: var(--im-color-primary-dark);

  /* Buttons - Primary */
  --im-button-primary-bg: var(--im-color-primary);
  --im-button-primary-border: var(--im-color-primary);
  --im-button-primary-text: var(--im-color-primary-inverse);
  --im-button-primary-hover-bg: var(--im-color-primary-dark);
  --im-button-primary-hover-border: var(--im-color-primary-dark);

  /* Buttons - Light (Subtle, often used for secondary actions) */
  --im-button-light-bg: #f5f5f5; /* Bulma's white-ter */
  --im-button-light-border: #dbdbdb; /* Bulma's grey-lighter */
  --im-button-light-text: #363636; /* Bulma's text */
  --im-button-light-hover-bg: #eeeeee;
  --im-button-light-hover-border: #d1d1d1;

  /* Inputs */
  --im-input-bg: var(--im-color-surface);
  --im-input-border: var(--im-color-border);
  --im-input-text: var(--im-color-text);
  --im-input-placeholder-text: var(--im-color-text-muted);
  --im-input-focus-border: var(--im-color-primary);
  --im-input-focus-shadow: rgba(var(--im-color-primary-rgb), 0.25);

  /* --- Sizing & Spacing --- */
  --im-border-radius: 4px; /* Enji.dev often has subtle radius */
  --im-border-radius-large: 6px;
  --im-spacing-unit: 1rem;
  --im-content-padding: 1.25rem;
  --im-section-padding-vertical: 3rem;
  --im-navbar-height: 3.5rem;
  --im-navbar-scroll-transition-duration: 0.3s;
  --im-base-transition-duration: 0.2s;

  /* --- Fonts --- */
  --im-font-family-sans-serif: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
  --im-font-family-monospace: "Roboto Mono", Consolas, Monaco, monospace;

  /* --- Icons --- */
  --im-icon-color: var(--im-color-text-muted);
  --im-icon-color-hover: var(--im-color-primary);

  /* --- Site Background Grid --- */
  --im-site-grid-line-color: rgba(0, 0, 0, 0.035); /* Very subtle dark lines */
  --im-site-grid-spacing: 40px;
  --im-site-grid-line-width: 1px;
}

/* ==========================================================================
   2. CSS CUSTOM PROPERTIES (html.im-is-dark-mode - Dark Mode Overrides)
   ========================================================================== */
html.im-is-dark-mode {
  --im-color-primary-inverse: #121212; /* Dark text on primary for dark mode */

  --im-color-text: #e0e0e0;
  --im-color-text-headings: #f5f5f5;
  --im-color-text-muted: #a0a0a0;
  --im-color-text-on-surface: var(--im-color-text);

  --im-color-background: #121212; /* Classic dark theme background */
  --im-color-surface: #1e1e1e;   /* Cards, boxes */
  --im-navbar-bg-transparent: rgba(18, 18, 18, 0.65);
  --im-navbar-bg-scrolled: rgba(30, 30, 30, 0.92);
  --im-navbar-border-transparent: rgba(50, 50, 50, 0.0);
  --im-navbar-border-scrolled: rgba(50, 50, 50, 0.7);
  --im-color-surface-alt: #282828;

  --im-color-border-rgb: 50, 50, 50; /* Darker border */
  --im-color-border: rgb(var(--im-color-border-rgb));
  --im-color-border-light: #3a3a3a;
  --im-color-border-hover: #484848;

  --im-color-link: var(--im-color-primary-light); /* Brighter primary for links */
  --im-color-link-hover: var(--im-color-primary);

  --im-button-primary-hover-bg: var(--im-color-primary-light);
  --im-button-primary-hover-border: var(--im-color-primary-light);
  --im-button-light-bg: #333333;
  --im-button-light-border: #454545;
  --im-button-light-text: var(--im-color-text-headings);
  --im-button-light-hover-bg: #404040;
  --im-button-light-hover-border: #505050;

  --im-input-bg: var(--im-color-surface-alt);
  --im-input-border: var(--im-color-border);
  --im-input-text: var(--im-color-text-on-surface);
  --im-input-placeholder-text: var(--im-color-text-muted);
  --im-input-focus-shadow: rgba(var(--im-color-primary-rgb), 0.35);

  --im-icon-color: var(--im-color-text-muted);
  --im-icon-color-hover: var(--im-color-primary-light);

  --im-site-grid-line-color: rgba(255, 255, 255, 0.035); /* Very subtle light lines */
}


/* ==========================================================================
   3. BASE & ELEMENT STYLES
   ========================================================================== */
html {
  background-color: var(--im-color-background);
  font-size: var(--im-base-font-size, 16px); /* Fallback if var not set */
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--im-font-family-sans-serif);
  color: var(--im-color-text);
  font-weight: 400; /* Bulma default */
  line-height: 1.6; /* Enji.dev often has generous line height */
  background-color: transparent; /* Body itself is transparent, html has bg color */
  min-height: 100vh;
  font-size: 1rem;
  position: relative; /* For background grid pseudo-element */
  overflow-x: hidden; /* Prevent horizontal scroll from grid */
}

/* Fixed Background Grid for the entire site */
body::before {
  content: '';
  position: fixed; /* Fixed to viewport */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-image:
    repeating-linear-gradient(
      to right,
      var(--im-site-grid-line-color) 0,
      var(--im-site-grid-line-color) var(--im-site-grid-line-width),
      transparent var(--im-site-grid-line-width),
      transparent var(--im-site-grid-spacing)
    ),
    repeating-linear-gradient(
      to bottom,
      var(--im-site-grid-line-color) 0,
      var(--im-site-grid-line-color) var(--im-site-grid-line-width),
      transparent var(--im-site-grid-line-width),
      transparent var(--im-site-grid-spacing)
    );
  background-size: var(--im-site-grid-spacing) var(--im-site-grid-spacing);
  background-position: center center; /* Or 0 0 */
  z-index: -10; /* Deepest background layer */
  pointer-events: none;
  opacity: 0.7; /* Make it even more subtle */
}

/* Typography - Overriding Bulma defaults with IM theme */
.title {
  font-family: var(--im-font-family-sans-serif);
  color: var(--im-color-text-headings) !important;
  font-weight: 600 !important; /* Bulma default is 600, can make bolder if needed */
  line-height: 1.125 !important; /* Bulma default */
}
.subtitle {
  font-family: var(--im-font-family-sans-serif);
  color: var(--im-color-text-muted) !important;
  font-weight: 400 !important; /* Bulma default */
  line-height: 1.25 !important; /* Bulma default */
}

h1, .title.is-1 { font-size: 2.5rem; } /* Adjust sizes for Enji.dev feel */
h2, .title.is-2 { font-size: 2rem; }
h3, .title.is-3 { font-size: 1.75rem; }
h4, .title.is-4 { font-size: 1.5rem; }
h5, .title.is-5 { font-size: 1.25rem; }
h6, .title.is-6 { font-size: 1rem; }

p {
  font-family: var(--im-font-family-sans-serif);
  /* line-height from body */
  /* margin-bottom from .content or direct styling */
}

a {
  color: var(--im-color-link);
  text-decoration: none;
  transition: color var(--im-base-transition-duration) ease;
}
a:hover {
  color: var(--im-color-link-hover);
  /* text-decoration: underline; */ /* Enji.dev sometimes has subtle underlines */
}

strong {
  color: var(--im-color-text-headings); /* Make strong text stand out */
  font-weight: 600; /* Bulma default */
}

hr {
  background-color: var(--im-color-border-light);
  height: 1px;
  margin: 1.5rem 0; /* Bulma default */
}

.im-main-content-area {
    padding-top: var(--im-navbar-height);
    transition: padding-top var(--im-navbar-scroll-transition-duration) ease-out;
}

/* ==========================================================================
   4. BULMA COMPONENT OVERRIDES (Theming Bulma with IM style)
   ========================================================================== */

/* --- Layout --- */
.section {
  padding: var(--im-section-padding-vertical) 1.5rem;
  /* Grid lines are on body, so sections are implicitly on top */
}

.hero.is-primary {
  background-color: var(--im-color-primary);
  color: var(--im-color-primary-inverse);
}
.hero.is-primary .title,
.hero.is-primary .subtitle {
  color: var(--im-color-primary-inverse) !important;
}
.hero.is-primary .button.is-light {
    background-color: var(--im-color-primary-inverse) !important;
    border-color: var(--im-color-primary-inverse) !important;
    color: var(--im-color-primary) !important;
}
.hero.is-primary .button.is-light:hover {
    background-color: rgba(255,255,255,0.92) !important;
    border-color: rgba(255,255,255,0.92) !important;
}


.footer {
  background-color: var(--im-color-surface-alt);
  color: var(--im-color-text-muted);
  padding: 2rem 1.5rem 2rem; /* Slightly reduced padding */
  border-top: 1px solid var(--im-color-border);
  font-size: 0.9rem;
}
.footer a {
    color: var(--im-color-text);
    font-weight: 500;
}
.footer a:hover {
    color: var(--im-color-link-hover);
}


/* --- Elements --- */
.button {
  font-family: var(--im-font-family-sans-serif);
  font-weight: 500; /* Slightly less bold than default Bulma buttons */
  border-radius: var(--im-border-radius);
  border-width: 1px;
  padding-left: 1.25em; /* Adjust padding for a modern feel */
  padding-right: 1.25em;
  transition: all var(--im-base-transition-duration) ease;
  box-shadow: 0 1px 2px rgba(0,0,0,0.03); /* Softer shadow */
}
.button:active {
    transform: translateY(1px);
    box-shadow: none;
}
.button.is-primary {
  background-color: var(--im-button-primary-bg);
  border-color: var(--im-button-primary-border);
  color: var(--im-button-primary-text);
}
.button.is-primary:hover {
  background-color: var(--im-button-primary-hover-bg);
  border-color: var(--im-button-primary-hover-border);
}
.button.is-primary:focus, .button.is-primary.is-focused {
  box-shadow: 0 0 0 0.125em var(--im-input-focus-shadow);
}
.button.is-light {
  background-color: var(--im-button-light-bg);
  border-color: var(--im-button-light-border);
  color: var(--im-button-light-text);
}
.button.is-light:hover {
  background-color: var(--im-button-light-hover-bg);
  border-color: var(--im-button-light-hover-border);
}

.box {
  background-color: var(--im-color-surface);
  border-radius: var(--im-border-radius-large); /* Larger radius for boxes */
  box-shadow: 0 4px 12px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.04); /* Softer, more diffused shadow */
  border: 1px solid var(--im-color-border-light);
  padding: var(--im-content-padding);
  color: var(--im-color-text-on-surface);
}
html.im-is-dark-mode .box {
    box-shadow: 0 4px 15px rgba(0,0,0,0.15), 0 1px 5px rgba(0,0,0,0.1);
}

.content p:not(:last-child),
.content ul:not(:last-child),
.content ol:not(:last-child),
.content blockquote:not(:last-child),
.content pre:not(:last-child),
.content table:not(:last-child) {
  margin-bottom: 1.25em; /* Consistent spacing in .content */
}
.content code {
  background-color: var(--im-color-surface-alt);
  border: 1px solid var(--im-color-border-light);
  color: var(--im-color-primary-dark);
  padding: 0.2em 0.4em;
  border-radius: var(--im-border-radius);
  font-size: 0.875em;
  font-family: var(--im-font-family-monospace);
}
.content pre {
  background-color: var(--im-color-surface-alt);
  border: 1px solid var(--im-color-border);
  border-radius: var(--im-border-radius);
  padding: 1em;
  overflow-x: auto;
  white-space: pre;
}
.content pre code {
  background-color: transparent;
  border: none;
  padding: 0;
  color: inherit; /* Inherit color from pre */
}
.content blockquote {
  background-color: var(--im-color-surface-alt);
  border-left: 3px solid var(--im-color-primary); /* Thinner border */
  padding: 1em 1.25em;
  color: var(--im-color-text-muted);
}
.content table {
    /* Styles from previous response apply well */
}
html.im-is-dark-mode .content code {
    background-color: var(--im-color-surface-alt);
    border-color: var(--im-color-border);
    color: var(--im-color-primary-light);
}
html.im-is-dark-mode .content pre {
    background-color: var(--im-color-background); /* Darker for contrast */
    border-color: var(--im-color-border);
}
html.im-is-dark-mode .content blockquote {
    background-color: var(--im-color-surface);
    border-left-color: var(--im-color-primary-light);
}


.icon {
  color: var(--im-icon-color);
}
.icon i.ph { /* Phosphor icon specific adjustments */
  vertical-align: -0.15em; /* Fine-tune vertical alignment */
  font-size: 1.05em; /* Slightly larger if needed */
}
a:hover > .icon, button:hover > .icon,
a:hover > .icon-text > .icon, button:hover > .icon-text > .icon {
  color: var(--im-icon-color-hover);
}

figure.image img {
  border-radius: var(--im-border-radius);
}

.tag {
  border-radius: var(--im-border-radius); /* Consistent radius */
  font-weight: 500;
}
.tag.is-primary {
  background-color: var(--im-color-primary);
  color: var(--im-color-primary-inverse);
}
.tag.is-light {
  background-color: var(--im-button-light-bg);
  color: var(--im-button-light-text);
}


/* --- Components --- */
.card {
  background-color: var(--im-color-surface);
  border-radius: var(--im-border-radius-large); /* Slightly larger for cards */
  box-shadow: 0 5px 15px rgba(0,0,0,0.06), 0 1px 4px rgba(0,0,0,0.05);
  border: 1px solid var(--im-color-border);
  color: var(--im-color-text-on-surface);
}
.card-header {
  background-color: transparent;
  border-bottom: 1px solid var(--im-color-border-light); /* Lighter separator */
  box-shadow: none;
  padding: 0.75rem 1.25rem; /* Use --im-content-padding */
}
.card-header-title {
  color: var(--im-color-text-headings);
  font-weight: 600;
}
.card-content {
  padding: var(--im-content-padding);
}
.card-footer {
  background-color: transparent;
  border-top: 1px solid var(--im-color-border-light);
  padding: 0.75rem var(--im-content-padding);
}
html.im-is-dark-mode .card {
    box-shadow: 0 5px 20px rgba(0,0,0,0.2), 0 1px 6px rgba(0,0,0,0.15);
}

.navbar.im-navbar-custom {
  min-height: var(--im-navbar-height) !important;
  background-color: var(--im-navbar-bg-transparent) !important;
  backdrop-filter: blur(10px) saturate(180%);
  -webkit-backdrop-filter: blur(10px) saturate(180%);
  border-bottom: 1px solid var(--im-navbar-border-transparent);
  transition: transform var(--im-navbar-scroll-transition-duration) ease-out,
              background-color var(--im-navbar-scroll-transition-duration) ease-out,
              border-color var(--im-navbar-scroll-transition-duration) ease-out,
              box-shadow var(--im-navbar-scroll-transition-duration) ease-out;
  position: fixed; top: 0; left: 0; right: 0; z-index: 1030;
}
.navbar.im-navbar-custom.is-visible {
  transform: translateY(0%);
  background-color: var(--im-navbar-bg-scrolled) !important;
  border-bottom-color: var(--im-navbar-border-scrolled);
  box-shadow: 0 2px 4px rgba(0,0,0,0.03); /* Subtle shadow when visible */
}
.navbar.im-navbar-custom.is-hidden-scroll {
  transform: translateY(-100%);
}
.navbar-brand {
  min-height: var(--im-navbar-height);
}
.navbar-brand .navbar-item { /* Logo and mobile icons */
  padding-top: 0;
  padding-bottom: 0;
  display: flex;
  align-items: center;
}
.navbar-menu {
    /* Mobile menu background (when active) */
}
@media screen and (max-width: 1023px) {
  .navbar-menu.is-active {
    background-color: var(--im-color-surface);
    box-shadow: 0 8px 16px rgba(10, 10, 10, 0.1);
    padding: 0.5rem 0;
    border-radius: 0 0 var(--im-border-radius) var(--im-border-radius);
    border: 1px solid var(--im-color-border);
    border-top: none;
    position: absolute; left: 0; right: 0; top: 100%; z-index: 20;
  }
}
.navbar-item, .navbar-link {
  color: var(--im-color-text) !important;
  font-weight: 500 !important;
  padding: 0.75rem 1rem !important; /* Values from $im-navbar-item-padding-* */
  min-height: var(--im-navbar-height);
  display: flex; align-items: center; position: relative;
  transition: color var(--im-base-transition-duration) ease;
}
.navbar-item .icon i.ph, .navbar-link .icon i.ph {
    transition: color var(--im-base-transition-duration) ease;
}
.navbar-item:hover, .navbar-link:hover,
.navbar-item.is-hovered, .navbar-link.is-hovered {
  background-color: transparent !important;
  color: var(--im-color-primary) !important;
}
.navbar-item:hover .icon i.ph, .navbar-link:hover .icon i.ph,
.navbar-item.is-hovered .icon i.ph, .navbar-link.is-hovered .icon i.ph {
    color: var(--im-color-primary) !important;
}
.navbar-item.is-active-nav-item, .navbar-link.is-active-nav-item {
  color: var(--im-color-primary) !important;
  font-weight: 600 !important;
  background-color: transparent !important;
}
.navbar-item.is-active-nav-item .icon i.ph, .navbar-link.is-active-nav-item .icon i.ph {
    color: var(--im-color-primary) !important;
}
.navbar-item.is-active-nav-item::after, .navbar-link.is-active-nav-item::after {
  content: '';
  position: absolute;
  bottom: 6px; /* Adjust for visual preference */
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-bottom: 5px solid var(--im-color-primary);
}
.navbar-link::after { /* Bulma's dropdown arrow */
  border-color: var(--im-color-text-muted) !important;
  /* right: 1rem; default from padding */
}
.navbar-link:hover::after, .navbar-link.is-active-nav-item::after { /* Arrow color on hover/active parent */
    /* The main ::after is the triangle, Bulma's arrow is separate */
}
.navbar-dropdown {
  background-color: var(--im-color-surface) !important;
  border: 1px solid var(--im-color-border) !important;
  border-top: none !important;
  border-radius: 0 0 var(--im-border-radius) var(--im-border-radius) !important;
  box-shadow: 0 6px 12px rgba(10,10,10,0.08) !important; /* Softer shadow */
  padding-top: 0.25rem !important;
  padding-bottom: 0.25rem !important;
  font-size: 0.925em; /* Slightly smaller */
}
.navbar-dropdown .navbar-item {
  padding: 0.6rem 1.2rem !important; /* Adjusted padding */
  min-height: auto;
  color: var(--im-color-text) !important;
}
.navbar-dropdown .navbar-item:hover {
  background-color: var(--im-color-surface-alt) !important;
  color: var(--im-color-primary) !important;
}
.navbar-dropdown .navbar-item.is-active-nav-item {
  background-color: rgba(var(--im-color-primary-rgb), 0.08) !important;
  color: var(--im-color-primary-dark) !important;
  font-weight: 500 !important;
}
.navbar-dropdown .navbar-item.is-active-nav-item::after { display: none; } /* No triangle in dropdown */

.im-logo-link .im-logo-image { max-height: calc(var(--im-navbar-height) * 0.6); margin-right: 0.5rem;}
.im-logo-link .im-logo-text { font-size: 1.1rem; color: var(--im-color-text-headings); font-weight: 600;}
.im-nav-icon { margin-right: 0.5em; }
.im-nav-icon i.ph { font-size: 1.15em; } /* Slightly larger icons in nav */
.im-nav-image-icon { max-height: 1.2rem; margin-right: 0.5em; }
.im-nav-image-icon.is-small { max-height: 1rem; }

.navbar-brand .navbar-item.is-hidden-desktop { margin-left: auto; } /* Push mobile icons to right */
.im-navbar-mobile-action .icon i.ph,
.im-dark-mode-toggle .icon i.ph { /* Desktop and mobile toggles */
    color: var(--im-icon-color);
}
.im-navbar-mobile-action:hover .icon i.ph,
.im-dark-mode-toggle:hover .icon i.ph {
    color: var(--im-icon-color-hover);
}
html.im-is-dark-mode .navbar.im-navbar-custom {
    /* Styles from previous dark mode section apply well */
}


/* --- Forms --- */
.input, .textarea, .select select {
  font-family: var(--im-font-family-sans-serif);
  border-radius: var(--im-border-radius);
  border: 1px solid var(--im-input-border);
  box-shadow: none; /* Flatter inputs */
  background-color: var(--im-input-bg);
  color: var(--im-input-text);
  transition: border-color var(--im-base-transition-duration) ease, box-shadow var(--im-base-transition-duration) ease;
  padding: 0.65em 1em; /* Adjusted padding */
}
.input::placeholder, .textarea::placeholder {
  color: var(--im-input-placeholder-text);
  opacity: 0.8; /* Slightly more visible placeholder */
}
.input:hover, .textarea:hover, .select:hover select:hover {
  border-color: var(--im-color-border-hover);
}
.input:focus, .textarea:focus, .select select:focus,
.input.is-focused, .textarea.is-focused, .select select.is-focused,
.input:active, .textarea:active, .select select:active,
.input.is-active, .textarea.is-active, .select select.is-active {
  border-color: var(--im-input-focus-border) !important;
  box-shadow: 0 0 0 0.125em var(--im-input-focus-shadow) !important;
}
.textarea { line-height: 1.6; }
.select:not(.is-multiple):not(.is-loading)::after { /* Dropdown arrow */
  border-color: var(--im-color-primary);
  right: 1.1em; /* Adjust arrow position */
}
.label {
  color: var(--im-color-text-headings);
  font-weight: 500; /* Slightly less bold than default Bulma label */
  margin-bottom: 0.5em;
}
.help {
  color: var(--im-color-text-muted);
  font-size: 0.9em; /* Slightly larger help text */
  margin-top: 0.25em;
}


/* ==========================================================================
   5. UTILITY CLASSES (e.g., Grid System)
   ========================================================================== */
.im-has-grid {
  position: relative;
  z-index: 0; /* For ::before stacking context */
}
.im-has-grid::before {
  content: "";
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  width: 100%; height: 100%;
  z-index: -1; /* Behind content */
  pointer-events: none;
  border-radius: inherit; /* Match parent's border-radius */

  /* Default grid parameters, can be overridden by modifier classes */
  --current-grid-spacing: var(--im-grid-spacing-val, 30px); /* Fallback to 30px */
  --current-grid-line-width: 1px; /* From $im-grid-line-width */
  --current-grid-fade-extent: var(--im-grid-fade-val, 70%); /* Fallback to 70% */
  --current-grid-line-color: var(--im-color-grid-lines-default); /* Use CSS var */

  background-image:
    repeating-linear-gradient(to right,
      var(--current-grid-line-color) 0,
      var(--current-grid-line-color) var(--current-grid-line-width),
      transparent var(--current-grid-line-width),
      transparent var(--current-grid-spacing)
    ),
    repeating-linear-gradient(to bottom,
      var(--current-grid-line-color) 0,
      var(--current-grid-line-color) var(--current-grid-line-width),
      transparent var(--current-grid-line-width),
      transparent var(--current-grid-spacing)
    );
  background-size: var(--current-grid-spacing) var(--current-grid-spacing);
  background-position: center center;
  mask-image: radial-gradient(ellipse at center, black 0%, black var(--current-grid-fade-extent), transparent 100%);
  -webkit-mask-image: radial-gradient(ellipse at center, black 0%, black var(--current-grid-fade-extent), transparent 100%);
}

/* Grid Modifiers */
.im-has-grid.is-grid-tiny::before    { --im-grid-spacing-val: 10px; }
.im-has-grid.is-grid-small::before   { --im-grid-spacing-val: 15px; }
.im-has-grid.is-grid-large::before   { --im-grid-spacing-val: 45px; }

.im-has-grid.is-grid-primary::before { --current-grid-line-color: var(--im-color-grid-lines-primary); }
.im-has-grid.is-grid-light::before   { --current-grid-line-color: var(--im-color-grid-lines-light); }
.im-has-grid.is-grid-dark::before    { --current-grid-line-color: var(--im-color-grid-lines-dark); }

.im-has-grid.is-grid-fade-none::before   { mask-image: none; -webkit-mask-image: none; }
.im-has-grid.is-grid-fade-subtle::before { --im-grid-fade-val: 85%; }
.im-has-grid.is-grid-fade-tight::before  { --im-grid-fade-val: 45%; }


/* ==========================================================================
   6. PAGE TRANSITION ANIMATIONS (Load animation off)
   ========================================================================== */
body.im-page-is-loading { opacity: 1; }
body.im-page-is-entering { opacity: 1; } /* No fade-in animation on load */
body.im-page-is-exiting {
  animation: imPageFadeOutDown 0.2s forwards ease-in !important; /* Duration from $im-page-transition-duration */
}
@keyframes imPageFadeOutDown {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(10px); } /* TranslateY from $im-page-transition-translateY */
}

/* ==========================================================================
   7. DARK MODE SPECIFIC COMPONENT ADJUSTMENTS (Beyond CSS Var changes)
   ========================================================================== */
/* This section is for fine-tuning specific components in dark mode if the
   CSS variable overrides in html.im-is-dark-mode are not sufficient.
   For a well-planned variable system, this section might be minimal. */

html.im-is-dark-mode .navbar.im-navbar-custom.is-visible {
    box-shadow: 0 1px 3px rgba(0,0,0,0.25); /* Darker shadow for visible navbar */
}
html.im-is-dark-mode .navbar.im-navbar-custom .navbar-menu.is-active {
    background-color: var(--im-color-surface);
    box-shadow: 0 8px 16px rgba(0,0,0,0.4);
    border-color: var(--im-color-border);
}
html.im-is-dark-mode .navbar.im-navbar-custom .navbar-dropdown {
    background-color: var(--im-color-surface) !important;
    border-color: var(--im-color-border) !important;
    box-shadow: 0 6px 12px rgba(0,0,0,0.35) !important;
}
html.im-is-dark-mode .navbar.im-navbar-custom .navbar-dropdown .navbar-item:hover {
    background-color: var(--im-color-surface-alt) !important;
}
html.im-is-dark-mode .navbar.im-navbar-custom .navbar-dropdown .navbar-item.is-active-nav-item {
    background-color: rgba(var(--im-color-primary-rgb), 0.25) !important;
    color: var(--im-color-primary-light) !important;
}

html.im-is-dark-mode .box {
    box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 1px 5px rgba(0,0,0,0.15);
}
html.im-is-dark-mode .card {
    box-shadow: 0 5px 20px rgba(0,0,0,0.25), 0 1px 6px rgba(0,0,0,0.2);
}


// _sass/custom/home-hero.scss

.home-hero {
  position: relative; // Still useful for z-indexing if needed, but not for bg video
  overflow: hidden;   // Can be useful if content bleeds
  padding-top: 5rem;
  padding-bottom: 5rem;
  background-color: transparent; // Makes hero section background transparent

  // The container content needs to be above any potential body background effects
  > .container {
    position: relative;
    z-index: 1;
  }

  .home-hero-content-column {
    .home-hero-title {
      font-weight: 800;
      line-height: 1.2;
      margin-bottom: 1.5rem;
      color: hsl(0, 0%, 15%);
      .home-hero-wave {
        display: inline-block;
        animation: home-hero-wave-animation 2.5s infinite;
        transform-origin: 70% 70%;
      }
      .home-hero-name-highlight {
        color: var(--bulma-primary, #7957d5);
      }
    }
    .home-hero-tagline {
      margin-bottom: 2rem;
      color: hsl(0, 0%, 35%);
      font-weight: 400;
      strong {
        font-weight: 600;
        color: hsl(0, 0%, 25%);
      }
    }
    .home-hero-current-status {
      margin-bottom: 2.5rem;
      font-size: 0.95rem;
      color: hsl(0, 0%, 45%);
      p {
        display: flex;
        align-items: center;
        gap: 0.6em;
        margin-bottom: 0.5em;
        i {
          font-size: 1.3em;
        }
      }
    }
    .home-hero-cta-buttons {
      margin-bottom: 2.5rem;
    }
    .home-hero-tech-stack {
      margin-top: 2rem;
      .home-hero-tech-stack-intro {
        font-size: 0.9rem;
        color: hsl(0, 0%, 50%);
        margin-bottom: 0.75rem;
      }
      .home-hero-tech-icons {
        .home-hero-tech-icon-tag.tag.is-dark {
          background-color: hsl(0, 0%, 92%);
          color: hsl(0, 0%, 25%);
          border-radius: 6px;
          padding: 0.5em 0.75em;
          i {
            font-size: 1.6rem;
          }
          &:hover {
            background-color: hsl(0, 0%, 85%);
          }
        }
      }
    }
  }

  .home-hero-video-column { // This column now holds the video
    display: flex;
    justify-content: center;
    align-items: center;
    // No background color needed here as the video will fill it or it's transparent

    .home-hero-video-container-right {
      position: relative;
      width: 100%;
      max-width: 560px; // Example max-width for the video, adjust as needed
      aspect-ratio: 16 / 9; // Maintain video aspect ratio
      border-radius: 12px; // Rounded corners for the video container
      overflow: hidden; // Clip video and overlays to rounded corners
      box-shadow: 0 10px 30px rgba(0,0,0,0.1); // Optional shadow for depth

      .home-hero-video-element-right {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover; // Cover the container, may crop
        // No separate border-radius needed, inherits from parent's overflow:hidden
      }

      .home-hero-video-overlay-grid,
      .home-hero-video-feather-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; // Allow interaction with video if any controls were visible
        // border-radius: inherit; // Not strictly needed due to parent overflow:hidden
      }

      .home-hero-video-overlay-grid {
        background-image:
          linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), // Lighter grid lines
          linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
        background-size: 20px 20px; // Adjust grid size
      }

      .home-hero-video-feather-overlay {
         background: radial-gradient(ellipse at center, rgba(0,0,0,0) 70%, rgba(0,0,0,0.1) 100%); // Softer vignette
      }
    }
  }

  .home-hero-principles {
    margin-top: 4rem;
    .home-hero-principle-box {
      border-radius: 10px;
      background-color: #fff; // Keep boxes opaque unless body grid should show through them too
      box-shadow: 0 6px 18px rgba(10,10,10,.07);
      padding: 2rem 1.5rem;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      .home-hero-principle-icon {
        margin-bottom: 1.25rem;
        i.is-size-1 { font-size: 2.75rem !important; }
        &.has-text-primary i { color: var(--bulma-primary, #7957d5); }
        &.has-text-success i { color: var(--bulma-success, #48c774); }
        &.has-text-warning i { color: var(--bulma-warning, #ffdd57); }
      }
      .home-hero-principle-title {
        margin-bottom: 0.75rem;
        color: hsl(0, 0%, 20%);
      }
      .home-hero-principle-description {
        font-size: 0.9rem;
        color: hsl(0, 0%, 40%);
      }
    }
  }
}

@keyframes home-hero-wave-animation {
  0% { transform: rotate(0.0deg) }
  10% { transform: rotate(14.0deg) }
  20% { transform: rotate(-8.0deg) }
  30% { transform: rotate(14.0deg) }
  40% { transform: rotate(-4.0deg) }
  50% { transform: rotate(10.0deg) }
  60% { transform: rotate(0.0deg) }
  100% { transform: rotate(0.0deg) }
}

@media screen and (max-width: 1023px) {
  .home-hero {
    .home-hero-video-column {
      margin-top: 2rem;
    }
  }
}

@media screen and (max-width: 768px) {
  .home-hero {
    padding-top: 3rem;
    padding-bottom: 3rem;
    .home-hero-content-column {
      text-align: center;
      .home-hero-current-status p,
      .home-hero-tech-stack .home-hero-tech-stack-intro {
        justify-content: center;
      }
      .home-hero-tech-icons.field.is-grouped {
        justify-content: center;
      }
      .home-hero-cta-buttons.buttons {
        justify-content: center;
      }
    }
    .home-hero-principles {
      margin-top: 2.5rem;
    }
    .home-hero-video-column {
        // On mobile, you might want the video full width or adjust differently
        max-width: 90%; // Example: make it slightly less than full width on mobile
        margin-left: auto;
        margin-right: auto;
    }
  }
}
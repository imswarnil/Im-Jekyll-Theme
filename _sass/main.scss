// ==========================================================
// STEP 1: Base User Settings & Raw Color Palette
// ==========================================================
@import "../node_modules/bulma/sass/index"; // Bulma uses all variables defined above


$primary: #e53935;
$link: $primary;
$family-sans-serif: "Outfit", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !default;
$family-monospace: "Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !default;

$white:    #ffffff;
$black:    #000000;
$gray-50:  #f9fafb;
$gray-100: #f3f4f6;
$gray-200: #e5e7eb;
$gray-300: #d1d5db;
$gray-400: #9ca3af;
$gray-500: #6b7280;
$gray-600: #4b5563;
$gray-700: #374151;
$gray-800: #1f2937;
$gray-900: #11182c;

$red-600: #e53935; // $primary's raw color
$sky-500:   #0ea5e9; // Raw for info
$emerald-500: #10b981; // Raw for success
$amber-500: #f59e0b; // Raw for warning
$rose-600: #e11d48; // Raw for danger
$pink-600: #db2777; // Raw for code

// ==========================================================
// STEP 2: Map Raw Colors to Semantic & Calculate Core Derived Values
// ==========================================================
$info:    $sky-500;
$success: $emerald-500;
$warning: $amber-500;
$danger:  $rose-600;

// Calculate Inverts (depend on semantic colors + white/black)
$primary-invert: findColorInvert($primary);
$info-invert:    findColorInvert($info);
$success-invert: findColorInvert($success);
$warning-invert: $gray-900; // Explicit dark text for yellow
$danger-invert:  findColorInvert($danger);
$link-invert:    $primary-invert; // Link invert depends on primary invert
$light-invert:   $gray-900;
$dark-invert:    $white;
$text-invert:    $white;

// Calculate Link States (depend on $link / $primary)
$link-hover:         darken($link, 8%);
$link-hover-border:  transparent; // Often transparent
$link-focus:         darken($link, 10%);
$link-focus-border:  $link; // Use link color for focus outline
$link-active:        darken($link, 12%);
$link-active-border: $link; // Use link color for active outline
$link-visited:       $link; // Keep visited same color

// Calculate Semantic Shades (depend on semantic colors)
$primary-light: lighten($primary, 15%);
$primary-dark: darken($primary, 10%);
$info-light:    lighten($info, 20%);
$info-dark:    darken($info, 10%);
$success-light: lighten($success, 20%);
$success-dark: darken($success, 10%);
$warning-light: lighten($warning, 20%);
$warning-dark: darken($warning, 10%);
$danger-light:  lighten($danger, 15%);
$danger-dark:  darken($danger, 10%);
$link-light:    lighten($link, 15%); // Depends on $link
$link-dark:    darken($link, 10%);  // Depends on $link

// ==========================================================
// STEP 3: Define Core Text, Background, Border, Light/Dark (using grays/calcs)
// ==========================================================
$text:          $gray-700;
$text-light:    $gray-500;
$text-strong:   $gray-900;
$body-background-color: $white;
$background:    $gray-50;
$border:        $gray-300;
$border-hover:  $gray-400;
$border-light:  $gray-200;
$border-width:  1px;
$light:         $gray-100; // Uses raw gray
$dark:          $gray-800; // Uses raw gray
$light-dark:    darken($light, 10%); // Derived from $light
$light-light:   lighten($light, 5%); // Derived from $light
$dark-light:    lighten($dark, 15%); // Derived from $dark
$dark-dark:     darken($dark, 10%);  // Derived from $dark

// ==========================================================
// STEP 4: Define Aggregate Maps (depend on all previously defined colors)
// ==========================================================
$colors: (
  "white": ($white, $black),
  "black": ($black, $white),
  "light": ($light, $light-invert),
  "dark": ($dark, $dark-invert),
  "primary": ($primary, $primary-invert, $primary-light, $primary-dark),
  "link": ($link, $link-invert, $link-light, $link-dark),
  "info": ($info, $info-invert, $info-light, $info-dark),
  "success": ($success, $success-invert, $success-light, $success-dark),
  "warning": ($warning, $warning-invert, $warning-light, $warning-dark),
  "danger": ($danger, $danger-invert, $danger-light, $danger-dark),
  "grey-darker": ($gray-900, $white),
  "grey-dark": ($gray-800, $white),
  "grey": ($gray-600, $white),
  "grey-light": ($gray-400, $gray-900),
  "grey-lighter": ($gray-200, $gray-900),
  "grey-lightest": ($gray-100, $gray-900)
);

$shades: (
  "black-bis": hsl(0, 0%, 7%),
  "black-ter": hsl(0, 0%, 14%),
  "grey-darker": $gray-900,
  "grey-dark": $gray-800,
  "grey": $gray-600,
  "grey-light": $gray-400,
  "grey-lighter": $gray-200,
  "grey-lightest": $gray-100,
  "white-ter": hsl(0, 0%, 96%),
  "white-bis": hsl(0, 0%, 98%)
);

// ==========================================================
// STEP 5: Define Core Typography & Layout Variables
// ==========================================================
$family-primary: $family-sans-serif;
$family-secondary: $family-sans-serif;
$family-code: $family-monospace;
$size-normal: 1rem;
$body-size: $size-normal;
$body-rendering: optimizeLegibility;
$body-family: $family-primary;
$body-line-height: 1.5;
$body-weight: 400;
$body-color: $text; // Depends on $text

$size-1: 3rem; $size-2: 2.25rem; $size-3: 1.875rem; $size-4: 1.5rem; $size-5: 1.25rem; $size-6: 1rem; $size-7: 0.875rem;
$size-small: $size-7; $size-medium: $size-5; $size-large: $size-3;
$weight-light: 300; $weight-normal: 400; $weight-medium: 500; $weight-semibold: 600; $weight-bold: 700; $weight-extrabold: 800; $weight-black: 900;

$title-family: $family-primary; $title-size: $size-3; $title-weight: $weight-semibold; $title-line-height: 1.125; $title-color: $gray-900; $title-strong-weight: $weight-bold;
$subtitle-family: $family-primary; $subtitle-size: $size-5; $subtitle-weight: $weight-normal; $subtitle-line-height: 1.25; $subtitle-color: $gray-700; $subtitle-strong-weight: $weight-semibold;
$strong-color: inherit; $strong-weight: $weight-bold; $small-size: $size-7;

$gap: 1.5rem; $block-spacing: 1rem;
$container-offset: (2 * $gap); $container-max-width: 1152px; $container-padding-horizontal: $gap;
$section-padding: 3rem 1.5rem; $section-padding-medium: 4.5rem 1.5rem; $section-padding-large: 6rem 1.5rem;
$hero-padding-touch: 1.5rem; $hero-padding-desktop: 3rem; $hero-body-padding: 3rem 1.5rem; $hero-body-padding-medium: 4.5rem 1.5rem; $hero-body-padding-large: 6rem 1.5rem;
$level-item-spacing: 0.75rem;

$radius-small:  0.125rem; $radius: 0.375rem; $radius-medium: 0.5rem; $radius-large: 0.75rem; $radius-xlarge: 1rem; $radius-rounded: 9999px;
$shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); $shadow-blur-radius: 15px;

$tablet: 768px; $desktop: 1024px; $widescreen: 1280px; $fullhd: 1536px;
$gap-tablet: $gap; $gap-desktop: $gap; $gap-widescreen: $gap; $gap-fullhd: $gap;

// ==========================================================
// STEP 6: Define Generic Element Variables (depend on core values)
// ==========================================================
$code: $pink-600; // Depends on $pink-600
$code-background: $gray-100; $code-weight: $weight-normal; $code-family: $family-code; $code-size: 0.875em;
$pre: $gray-800; $pre-background: $gray-100; $pre-code-font-size: 0.875em; $pre-padding: 1rem 1.25rem; $pre-overflow-x: auto; $pre-family: $family-code;

$hr-background-color: $gray-200; $hr-height: 1px; $hr-margin: 1.5rem 0;

// ==========================================================
// STEP 7: Define Component Variables (depend heavily on previous steps)
// ==========================================================
$button-color: $text-strong; $button-background-color: $white; $button-border-color: $gray-300; $button-border-width: $border-width; $button-padding-vertical: calc(0.5em - #{$border-width}); $button-padding-horizontal: 1em; $button-radius: $radius;
$button-hover-color: $link-hover; // Depends on $link-hover (defined in Step 2)
$button-hover-border-color: $gray-400;
$button-focus-color: $link; // Depends on $link
$button-focus-border-color: $link; // Depends on $link
$button-focus-box-shadow-size: 0 0 0 0.125em; $button-focus-box-shadow-color: rgba($link, 0.25);
$button-active-color: $link-active; // Depends on $link-active (defined in Step 2)
$button-active-border-color: $gray-500;
$button-text-color: $text; $button-text-hover-background-color: $gray-100; $button-text-hover-color: $text-strong; $button-disabled-background-color: $white; $button-disabled-border-color: $gray-200; $button-disabled-shadow: none; $button-disabled-opacity: 0.5; $button-static-color: $gray-500; $button-static-background-color: $background; $button-static-border-color: $border;
$button-family: $family-sans-serif; $button-weight: $weight-normal; $button-text-decoration: none; $button-text-transform: none; $button-letter-spacing: normal; $button-line-height: 1.5;

$control-radius: $radius; $control-radius-small: $radius-small; $control-border-width: $border-width; $control-height: 2.5em; $control-line-height: 1.5; $control-padding-vertical: calc(0.5em - #{$control-border-width}); $control-padding-horizontal: calc(0.75em - #{$control-border-width});
$input-color: $gray-800; $input-background-color: $white; $input-border-color: $gray-300; $input-placeholder-color: $gray-400; $input-hover-color: $gray-900; $input-hover-border-color: $gray-400; $input-focus-color: $gray-900; $input-focus-border-color: $link; $input-focus-box-shadow-size: 0 0 0 0.125em; $input-focus-box-shadow-color: rgba($link, 0.25); $input-active-color: $gray-900; $input-active-border-color: $link-active; $input-active-box-shadow: none; $input-disabled-color: $gray-400; $input-disabled-background-color: $gray-100; $input-disabled-border-color: $gray-200; $input-disabled-placeholder-color: $gray-300; $input-arrow: $link; $input-icon-color: $gray-300; $input-icon-active-color: $gray-600; $input-shadow: none;
$label-color: $gray-700; $label-weight: $weight-semibold; $label-size: $size-normal;
$help-size: $size-7; $help-color: $gray-500;

$tag-background-color: $background; $tag-color: $text; $tag-radius: $radius-small; $tag-padding-vertical: 0.25em; $tag-padding-horizontal: 0.75em; $tag-delete-margin: 0.25rem;
$image-radius: $radius; $figure-margin: 0 0 $block-spacing 0;
$notification-background-color: $background; $notification-code-background-color: $white; $notification-radius: $radius; $notification-padding: 1.25rem 1.5rem;
$progress-background-color: $gray-200; $progress-bar-background-color: $text-light; $progress-value-color: $text-strong; $progress-border-radius: $radius-rounded; $progress-indeterminate-duration: 1.5s;

$table-color: $text; $table-background-color: $white; $table-cell-border: 1px solid $gray-200; $table-cell-border-width: $border-width; $table-cell-padding: 0.5em 0.75em; $table-cell-heading-color: $text-strong; $table-head-cell-border-width: 0 0 2px 0; $table-head-cell-color: $text-strong; $table-foot-cell-border-width: 2px 0 0 0; $table-foot-cell-color: $text-strong; $table-head-background-color: transparent; $table-body-background-color: transparent; $table-foot-background-color: transparent; $table-row-hover-background-color: $gray-50; $table-row-active-background-color: lighten($primary, 40%); $table-row-active-color: $primary; $table-striped-background-color: $gray-50; $table-striped-background-color-nth: $white;

$box-color: inherit; $box-background-color: $white; $box-radius: $radius-large; $box-padding: 1.25rem; $box-shadow: $shadow; $box-link-hover-shadow: none; $box-link-active-shadow: none;
$card-color: inherit; $card-background-color: $white; $card-radius: $radius-large; $card-shadow: $shadow; $card-header-background-color: transparent; $card-header-color: $gray-800; $card-header-padding: 0.75rem 1rem; $card-header-shadow: none; $card-header-weight: $weight-semibold; $card-content-background-color: transparent; $card-content-padding: 1rem; $card-footer-background-color: transparent; $card-footer-border-top: 1px solid $gray-200; $card-footer-padding: 0.75rem 1rem; $card-media-margin: $block-spacing;

$dropdown-menu-min-width: 12rem; $dropdown-content-background-color: $white; $dropdown-content-arrow: $border; $dropdown-content-offset: 4px; $dropdown-content-padding-bottom: 0.5rem; $dropdown-content-padding-top: 0.5rem; $dropdown-content-radius: $radius; $dropdown-content-shadow: $shadow; $dropdown-content-z: 20; $dropdown-item-color: $gray-700; $dropdown-item-hover-color: $gray-900; $dropdown-item-hover-background-color: $gray-100; $dropdown-item-active-color: $primary; $dropdown-item-active-background-color: lighten($primary, 40%); $dropdown-divider-background-color: $gray-200;

$menu-item-color: $gray-700; $menu-item-radius: $radius-small; $menu-item-hover-color: $gray-900; $menu-item-hover-background-color: $gray-100; $menu-item-active-color: $primary; $menu-item-active-background-color: lighten($primary, 40%); $menu-item-padding: 0.5em 0.75em; $menu-list-border-left: 1px solid $gray-200; $menu-list-line-height: 1.25; $menu-list-link-padding: 0.5em 0.75em; $menu-nested-list-margin: 0.75em; $menu-nested-list-padding-left: 0.75em; $menu-label-color: $gray-500; $menu-label-font-size: 0.75em; $menu-label-letter-spacing: 0.1em; $menu-label-spacing: 0.75em; $menu-label-text-transform: uppercase;

$message-background-color: $background; $message-radius: $radius; $message-header-background-color: $gray-800; $message-header-color: $white; $message-header-weight: $weight-bold; $message-header-padding: 0.75em 1em; $message-header-radius: $radius $radius 0 0; $message-body-border-color: $gray-200; $message-body-border-width: 0 0 0 4px; $message-body-color: inherit; $message-body-padding: 1.25em 1.5em; $message-body-radius: 0 0 $radius $radius; $message-body-pre-background-color: $white; $message-body-pre-code-background-color: transparent;
$message-colors: ( "info": ($info-light, $info, $info-invert), "success": ($success-light, $success, $success-invert), "warning": ($warning-light, $warning, $warning-invert), "danger": ($danger-light, $danger, $danger-invert), "dark": ($dark-light, $dark, $dark-invert), "light": ($gray-100, $gray-500, $gray-900) );

$modal-z: 40; $modal-background-background-color: rgba($gray-800, 0.86); $modal-content-width: 640px; $modal-content-margin-mobile: 20px; $modal-content-spacing-mobile: 160px; $modal-content-spacing-tablet: 40px; $modal-close-dimensions: 40px; $modal-close-right: 20px; $modal-close-top: 20px; $modal-close-background: none; $modal-close-color: $white; $modal-close-radius: $radius-rounded; $modal-card-width: 640px; $modal-card-margin: 0; $modal-card-spacing: 40px; $modal-card-radius: $radius-large; $modal-card-head-background-color: $gray-100; $modal-card-head-border-bottom: 1px solid $gray-200; $modal-card-head-padding: 1rem 1.25rem; $modal-card-head-radius: $radius-large $radius-large 0 0; $modal-card-title-color: $gray-800; $modal-card-title-size: $size-5; $modal-card-title-line-height: 1; $modal-card-foot-background-color: $gray-50; $modal-card-foot-border-top: 1px solid $gray-200; $modal-card-foot-radius: 0 0 $radius-large $radius-large; $modal-card-foot-padding: 0.75rem 1.25rem; $modal-card-body-background-color: $white; $modal-card-body-padding: 1.25rem;

$navbar-background-color: $white; $navbar-box-shadow-size: 0 2px 0 0; $navbar-box-shadow-color: $gray-100; $navbar-height: 3.5rem; $navbar-padding-vertical: 0.5rem; $navbar-padding-horizontal: 1rem; $navbar-z: 30; $navbar-fixed-z: $navbar-z; $navbar-item-color: $gray-700; $navbar-item-hover-color: $primary; $navbar-item-hover-background-color: transparent; $navbar-item-active-color: $primary; $navbar-item-active-background-color: transparent; $navbar-item-img-max-height: 1.75rem; $navbar-burger-color: $navbar-item-color; $navbar-tab-hover-background-color: transparent; $navbar-tab-hover-border-bottom-color: $primary; $navbar-tab-active-color: $primary; $navbar-tab-active-background-color: transparent; $navbar-tab-active-border-bottom-color: $primary; $navbar-tab-active-border-bottom-style: solid; $navbar-tab-active-border-bottom-width: 3px; $navbar-dropdown-background-color: $white; $navbar-dropdown-border-top: 1px solid $gray-200; $navbar-dropdown-offset: -4px; $navbar-dropdown-arrow: $primary; $navbar-dropdown-radius: $radius; $navbar-dropdown-z: $navbar-z - 1; $navbar-dropdown-boxed-radius: $radius; $navbar-dropdown-boxed-shadow: $shadow; $navbar-dropdown-item-hover-color: $gray-900; $navbar-dropdown-item-hover-background-color: $gray-100; $navbar-dropdown-item-active-color: $primary; $navbar-dropdown-item-active-background-color: lighten($primary, 40%); $navbar-divider-background-color: $gray-100; $navbar-divider-height: 1px; $navbar-bottom-box-shadow-size: 0 -2px 0 0; $navbar-bottom-box-shadow-color: $gray-100;

$pagination-color: $gray-700; $pagination-border-color: $gray-200; $pagination-border-width: $border-width; $pagination-margin: -#{$pagination-border-width}; $pagination-hover-color: $primary; $pagination-hover-border-color: $primary; $pagination-focus-color: $primary; $pagination-focus-border-color: $primary; $pagination-active-color: $white; $pagination-active-background-color: $primary; $pagination-active-border-color: $primary; $pagination-disabled-color: $gray-300; $pagination-disabled-background-color: $gray-100; $pagination-disabled-border-color: $gray-200; $pagination-current-color: $white; $pagination-current-background-color: $primary; $pagination-current-border-color: $primary; $pagination-ellipsis-color: $gray-300; $pagination-radius: $radius-small; $pagination-item-padding-left: 0.5em; $pagination-item-padding-right: 0.5em; $pagination-item-margin: 0.25rem;

$panel-margin: $block-spacing; $panel-padding: 0.5em 0.75em; $panel-radius: $radius; $panel-border: 1px solid $gray-200; $panel-shadow: none; $panel-heading-background-color: $gray-50; $panel-heading-color: $gray-700; $panel-heading-line-height: 1.25; $panel-heading-padding: 0.75em 1em; $panel-heading-radius: $radius $radius 0 0; $panel-heading-size: 1.25em; $panel-heading-weight: $weight-normal; $panel-tab-border-bottom: 1px solid $gray-300; $panel-tab-active-border-bottom-color: $text-strong; $panel-tab-active-color: $text-strong; $panel-list-item-color: $text; $panel-list-item-hover-color: $link; $panel-block-color: $text; $panel-block-hover-background-color: $gray-50; $panel-block-active-border-left-color: $primary; $panel-block-active-color: $primary; $panel-block-active-icon-color: $primary; $panel-icon-color: $text-light;

$tabs-border-bottom-color: $gray-300; $tabs-border-bottom-style: solid; $tabs-border-bottom-width: 1px; $tabs-link-color: $gray-500; $tabs-link-hover-border-bottom-color: $gray-600; $tabs-link-hover-color: $gray-600; $tabs-link-active-border-bottom-color: $primary; $tabs-link-active-color: $primary; $tabs-link-padding: 0.5em 1em; $tabs-boxed-link-radius: $radius $radius 0 0; $tabs-boxed-link-hover-background-color: $gray-50; $tabs-boxed-link-hover-border-bottom-color: $gray-300; $tabs-boxed-link-active-background-color: $white; $tabs-boxed-link-active-border-color: $gray-300; $tabs-boxed-link-active-border-bottom-color: transparent !important; $tabs-toggle-link-border-color: $gray-200; $tabs-toggle-link-border-style: solid; $tabs-toggle-link-border-width: 1px; $tabs-toggle-link-hover-background-color: $gray-50; $tabs-toggle-link-hover-border-color: $gray-300; $tabs-toggle-link-radius: $radius-small; $tabs-toggle-link-active-background-color: $primary; $tabs-toggle-link-active-border-color: $primary; $tabs-toggle-link-active-color: $white;

$breadcrumb-item-color: $primary; $breadcrumb-item-hover-color: darken($primary, 10%); $breadcrumb-item-active-color: $gray-700; $breadcrumb-item-padding-horizontal: 0.75em; $breadcrumb-item-separator-color: $gray-300; $breadcrumb-radius: $radius;

$footer-background-color: $gray-100; $footer-color: inherit; $footer-padding: 3rem 1.5rem 3rem;

// ==========================================================
// STEP 8: Utility & Misc Variables
// ==========================================================
$easing: ease-out;
$render-speed: 80ms;
$speed: 300ms;
$variable-columns: true;
$control-sizes: ( "small": $size-small, "medium": $size-medium, "large": $size-large );

// ==========================================================
// STEP 9: Import Bulma & Custom Code
// ==========================================================
@import "./theme/index";                 // Your custom utilities/styles come AFTER Bulma
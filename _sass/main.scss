// ==========================================================
// STEP 1: Define Design Tokens (Tailwind/Shadcn Inspired)
// ==========================================================

// --- Fonts ---
$family-sans-serif: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !default;
$family-monospace: "Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !default;
$family-primary: $family-sans-serif; // Use sans-serif as primary
$family-code: $family-monospace;

// --- Colors (Tailwind-like Palette) ---
// Grays
$white:    #ffffff;
$black:    #000000; // True black, use sparingly
$gray-50:  #f9fafb; // Often used for subtle backgrounds
$gray-100: #f3f4f6; // Light backgrounds, borders
$gray-200: #e5e7eb; // Borders, dividers
$gray-300: #d1d5db; // Input borders
$gray-400: #9ca3af; // Placeholder text, disabled text
$gray-500: #6b7280; // Secondary text
$gray-600: #4b5563; // Body text subtle variation
$gray-700: #374151; // Body text primary
$gray-800: #1f2937; // Headings, dark elements
$gray-900: #11182c; // Strong headings, near black

// Primary Accent (Example: Blue, common in Shadcn/Tailwind examples)
// You could replace this with your original red: $primary-color: #e53935;
$primary-color: #2563eb; // blue-600
$primary-color-hover: darken($primary-color, 5%);
$primary-color-active: darken($primary-color, 10%);
$primary-color-focus-ring: rgba($primary-color, 0.25); // For focus box-shadow

// Semantic Colors (Map from palette)
$info-color:    #0ea5e9; // sky-500
$success-color: #16a34a; // green-600
$warning-color: #f59e0b; // amber-500
$danger-color:  #dc2626; // red-600 (Slightly different red for danger)

// Calculate Inverts (Crucial to do this early!)
$primary-invert: findColorInvert($primary-color);
$info-invert:    findColorInvert($info-color);
$success-invert: findColorInvert($success-color);
$warning-invert: $gray-900; // Dark text on yellow/amber
$danger-invert:  findColorInvert($danger-color);
$link-invert:    $primary-invert;
$light-invert:   $gray-900;
$dark-invert:    $white;
$text-invert:    $white;

// --- Typography Sizes (rem units, Tailwind scale) ---
$size-1: 2.25rem;  // 36px (text-4xl)
$size-2: 1.875rem; // 30px (text-3xl)
$size-3: 1.5rem;   // 24px (text-2xl)
$size-4: 1.25rem;  // 20px (text-xl)
$size-5: 1.125rem; // 18px (text-lg)
$size-6: 1rem;     // 16px (text-base) - Default body size
$size-7: 0.875rem; // 14px (text-sm)
$size-normal: $size-6;
$size-small: $size-7;
$size-medium: $size-4; // Map Bulma sizes reasonably
$size-large: $size-2;

// --- Font Weights ---
$weight-light: 300;
$weight-normal: 400;
$weight-medium: 500;
$weight-semibold: 600;
$weight-bold: 700;

// --- Spacing (Key for Tailwind/Shadcn feel) ---
$gap: 1rem; // SIGNIFICANTLY reduce Bulma's default (e.g., 16px or 24px)
$block-spacing: 1rem; // Space below paragraphs etc.

// Component Paddings (Tighter than Bulma defaults)
$button-padding-vertical:   0.5rem;   // ~ py-2
$button-padding-horizontal: 1rem;     // ~ px-4
$input-padding-vertical:    0.5rem;   // ~ py-2
$input-padding-horizontal:  0.75rem;  // ~ px-3
$textarea-padding:          0.75rem;  // ~ p-3
$control-padding-vertical: $input-padding-vertical; // Alias
$control-padding-horizontal: $input-padding-horizontal; // Alias
$notification-padding: 1rem 1.25rem; // ~ p-4 / p-5
$section-padding: 3rem 1rem;        // Generous section padding (py-12 px-4)
$section-padding-medium: 4rem 1.5rem;
$section-padding-large: 6rem 2rem;
$box-padding: 1.25rem;              // ~ p-5
$card-content-padding: 1rem;       // ~ p-4
$card-header-padding: 0.75rem 1rem; // ~ py-3 px-4
$card-footer-padding: 0.75rem 1rem; // ~ py-3 px-4

// --- Borders & Radius ---
$border-width: 1px;
$border-color: $gray-200; // Subtle border default (gray-200 or gray-300)
$border-hover: $gray-300;
$border-focus: $primary-color; // Use primary for focus border

$radius-small:  0.125rem; // 2px (rounded-sm)
$radius:        0.375rem; // 6px (rounded-md) - Default component radius
$radius-medium: 0.5rem;   // 8px (rounded-lg)
$radius-large:  0.75rem;  // 12px (rounded-xl)
$radius-rounded: 9999px;  // (rounded-full)

// --- Shadows ---
$shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); // ~ shadow-md
// Alternative: $shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); // ~ shadow-sm

// ==========================================================
// STEP 2: Map Tokens to Bulma Variables
// ==========================================================

// --- Core Semantic Colors ---
$primary: $primary-color;
$link:    $primary-color; // Links use primary color
$info:    $info-color;
$success: $success-color;
$warning: $warning-color;
$danger:  $danger-color;

// --- Text ---
$body-size: $size-6;
$body-line-height: 1.5;
$body-color: $gray-700; // Main body text
$text: $body-color;
$text-light: $gray-500; // Secondary text
$text-strong: $gray-900; // Bold text

// --- Links ---
$link-hover: $primary-color-hover;
$link-hover-border: transparent;
$link-focus: $primary-color-hover; // Use hover color for focus text
$link-focus-border: $border-focus; // Use primary border for focus
$link-active: $primary-color-active;
$link-active-border: $border-focus; // Use primary border for active
$link-visited: $link; // Keep visited links same color

// --- Backgrounds & Borders ---
$body-background-color: $white; // Or $gray-50
$background: $gray-50; // Subtle background for cards/sections
$border: $border-color; // Use the defined border color
$border-hover: $border-hover;
$hr-background-color: $border-color;
$hr-height: $border-width;

// --- Light/Dark Theme Elements ---
$light: $gray-100;
$dark: $gray-800;

// --- Code Blocks ---
$code-family: $family-monospace;
$code: $danger-color; // Use danger/red for inline code often
$code-background: $gray-100;
$code-weight: $weight-normal;
$pre: $gray-800;
$pre-background: $gray-100;
$pre-padding: 1rem 1.25rem;

// --- Aggregate Color Maps (Must come after colors & inverts defined) ---
$colors: (
  "white": ($white, $black),
  "black": ($black, $white),
  "light": ($light, $light-invert),
  "dark": ($dark, $dark-invert),
  "primary": ($primary, $primary-invert), // Keep it simple or add shades if needed by Bulma internals
  "link": ($link, $link-invert),
  "info": ($info, $info-invert),
  "success": ($success, $success-invert),
  "warning": ($warning, $warning-invert),
  "danger": ($danger, $danger-invert),
  // Map grays if needed by Bulma helpers, but usually overrides work
  "grey-darker": ($gray-900, $white),
  "grey-dark": ($gray-800, $white),
  "grey": ($gray-600, $white),
  "grey-light": ($gray-400, $gray-900),
  "grey-lighter": ($gray-200, $gray-900),
  "grey-lightest": ($gray-100, $gray-900)
);
$shades: ( // Less critical with direct color mapping, but define reasonably
  "black-bis": darken($black, 5%),
  "black-ter": darken($black, 10%),
  "grey-darker": $gray-900,
  "grey-dark": $gray-800,
  "grey": $gray-600,
  "grey-light": $gray-400,
  "grey-lighter": $gray-200,
  "white-ter": darken($white, 2%),
  "white-bis": darken($white, 4%)
);

// --- Typography Details ---
$title-color: $gray-900;
$title-weight: $weight-bold;
$subtitle-color: $gray-600;
$subtitle-weight: $weight-normal;
$strong-weight: $weight-bold; // Or $weight-semibold

// --- Borders & Radius ---
$input-radius: $radius;
$button-radius: $radius;
$box-radius: $radius-medium; // Slightly larger radius for boxes/cards
$card-radius: $radius-medium;
$tag-radius: $radius-small; // Smaller radius for tags/chips
$tabs-link-active-border-bottom-color: $primary; // Use primary for active tab underline

// --- Shadows ---
$box-shadow: $shadow;
$card-shadow: $shadow;

// --- Focus States (Crucial for Shadcn/Tailwind feel) ---
$input-focus-border-color: $border-focus;
$input-focus-box-shadow-size: 0 0 0 3px;
$input-focus-box-shadow-color: $primary-color-focus-ring;
$input-box-shadow: none; // Remove Bulma's default inset shadow
$textarea-focus-border-color: $border-focus;
$textarea-focus-box-shadow-size: $input-focus-box-shadow-size;
$textarea-focus-box-shadow-color: $primary-color-focus-ring;
$button-focus-border-color: $border-focus; // Or same as hover border?
$button-focus-box-shadow-size: $input-focus-box-shadow-size;
$button-focus-box-shadow-color: $primary-color-focus-ring;
$button-focus-color: inherit; // Text color doesn't usually change on focus ring

// --- Component Specific Adjustments ---
// Button
$button-color: $gray-700; // Default button text color
$button-background-color: $white;
$button-border-color: $gray-300; // Default border color
$button-border-width: $border-width;
$button-hover-color: $gray-800;
$button-hover-border-color: $gray-400;
$button-hover-background-color: $gray-50; // Subtle hover bg
$button-active-color: $gray-900;
$button-active-border-color: $gray-400;
$button-active-background-color: $gray-100; // Slightly darker active bg
// Semantic button colors will use $primary, $info etc. Bulma handles this.
$button-text-color: $link; // Text button color
$button-text-hover-background-color: $gray-100; // Background for text button hover
$button-text-hover-color: $link-hover;
$button-disabled-background-color: $white; // Keep background, adjust opacity below
$button-disabled-border-color: $gray-200;
$button-disabled-shadow: none;
$button-disabled-opacity: 0.5; // Use opacity for disabled state

// Navbar
$navbar-background-color: $white;
$navbar-height: 3.5rem; // ~56px
$navbar-padding-vertical: 0; // Let items center vertically
$navbar-padding-horizontal: 1rem;
$navbar-box-shadow-size: 0 1px 2px 0; // Subtle shadow below navbar
$navbar-box-shadow-color: rgba($black, 0.05);
$navbar-item-color: $gray-600; // Default nav item color
$navbar-item-hover-color: $gray-900; // Darker on hover
$navbar-item-hover-background-color: $gray-50; // Subtle background hover
$navbar-item-active-color: $primary; // Active item uses primary color
$navbar-item-active-background-color: $gray-50; // Same subtle background for active
$navbar-tab-active-border-bottom-color: $primary; // Underline for active tabs
$navbar-tab-active-color: $primary;
$navbar-dropdown-background-color: $white;
$navbar-dropdown-border-top: 1px solid $gray-100; // Lighter dropdown border
$navbar-dropdown-radius: $radius;
$navbar-dropdown-shadow: $shadow;
$navbar-divider-background-color: $gray-100;

// Card
$card-background-color: $white;
$card-header-background-color: transparent;
$card-header-color: $gray-900;
$card-header-weight: $weight-semibold;
$card-header-shadow: none;
$card-footer-border-top: 1px solid $gray-100;

// Tag / Chip
$tag-background-color: $gray-100; // Lighter default chip
$tag-color: $gray-700;
// Colored tags will use $primary, $info etc. Make them subtle.
$tag-primary-background-color: lighten($primary, 40%);
$tag-primary-color: $primary;
$tag-info-background-color: lighten($info, 40%);
$tag-info-color: $info;
// ... Add subtle backgrounds for other tag colors

// Notification / Alert
$notification-background-color: $gray-50; // Default subtle bg
$notification-radius: $radius;
$notification-code-background-color: $white;
// Colored notifications
$notification-primary-background-color: lighten($primary, 40%);
$notification-primary-color: $primary;
$notification-info-background-color: lighten($info, 40%);
$notification-info-color: $info;
// ... Add subtle backgrounds for other notification colors

// Other defaults
$control-border-width: $border-width;
$control-height: 2.5em; // Based on font-size
$control-line-height: 1.5;
$label-color: $gray-700;
$label-weight: $weight-medium;
$help-color: $gray-500;
$help-size: $size-small;

// ==========================================================
// STEP 3: Import Bulma & Custom Theme
// ==========================================================
@import "../node_modules/bulma/sass/index"; // Bulma uses all variables defined above
@import "./theme/index";                 // Your custom utilities/styles (if any) go here
---
title: Archive
description: "Search for a page or post you're looking for. Browse all posts or filter by category."
layout: page
permalink: /archive/
---

<div class="container mt-5 mb-5">
    <div class="columns">
        <div class="column">
            <!-- In-page Sidebar for Category Selection -->
            <aside class="menu p-4 mb-5 has-background-light" style="border-radius: 6px;">
                <p class="menu-label">Categories</p>
                <ul class="menu-list" id="category-filter-list">
                    <li><a href="#all" data-category="all" class="category-link is-active">All Posts</a></li>
                    {% assign categories_sorted = site.categories | sort %}
                    {% for category_item in categories_sorted %}
                        {% assign cat_name = category_item[0] %}
                        {% assign cat_slug = cat_name | slugify %}
                        {% assign cat_posts_count = category_item[1].size %}
                        <li>
                            <a href="#{{ cat_slug }}" data-category="{{ cat_slug }}" class="category-link">
                                {{ cat_name | capitalize }} ({{ cat_posts_count }})
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </aside>

            <h1 class="title is-3" id="archive-title">All Posts</h1>
            <hr>

            <!-- Section for Jekyll's default paginator (All Posts) -->
            <section id="jekyll-paginated-content" class="section archive-column-cards p-0">
                <div id="post-list-jekyll" class="columns is-multiline">
                    {% assign posts_processed_count_jekyll = 0 %}
                    {% if paginator.posts.size == 0 and page.url == "/archive/" %}
                        <div class="column is-full"><p class="has-text-centered">No posts found.</p></div>
                    {% endif %}

                    {% for post in paginator.posts %}
                        {% assign posts_processed_count_jekyll = posts_processed_count_jekyll | plus: 1 %}
                        <div class="column is-one-third-desktop is-half-tablet is-full-mobile">
                            <a href="{{ post.url | relative_url }}" class="post-item-link">
                                <div class="box post-item-box">
                                    {% if post.image and post.category != "video" %}
                                    <figure class="image is-4by3 mb-4"><img src="{{ post.image | relative_url }}" alt="{{ post.title | escape }}"></figure>
                                    {% elsif post.category == "video" and post.VideoId %}
                                    <figure class="image is-16by9 mb-4 video-thumbnail-container-column">
                                        <img src="https://i.ytimg.com/vi/{{ post.VideoId }}/hqdefault.jpg" alt="{{ post.title | escape }}">
                                        {% if post.duration %}<div class="is-overlay is-flex is-align-items-flex-end is-justify-content-flex-end p-2"><span class="tag is-dark is-rounded">{{ post.duration }}</span></div>{% endif %}
                                        <div class="is-overlay is-flex is-align-items-center is-justify-content-center video-play-indicator-column"><span class="icon is-large has-text-white has-background-dark-transparent-overlay-column"><i class="ph-fill ph-play-circle"></i></span></div>
                                    </figure>
                                    {% endif %}
                                    <div class="content">
                                        <div class="level is-mobile is-marginless mb-3">
                                            <div class="level-left"><div class="level-item">
                                                <span class="tag {% if post.category == 'journal' %}is-warning{% elsif post.category == 'video' %}is-danger{% elsif post.category == 'project' %}is-primary{% else %}is-info{% endif %} is-light is-rounded is-capitalized">
                                                    <span class="icon is-small mr-1">{% if post.category == "journal" %}<i class="ph ph-notebook"></i>{% elsif post.category == "video" %}<i class="ph ph-youtube-logo"></i>{% elsif post.category == "project" %}<i class="ph ph-git-branch"></i>{% else %}<i class="ph ph-article"></i>{% endif %}</span>
                                                    {{ post.category | default: "Blog" }}
                                                </span>
                                            </div></div>
                                            <div class="level-right"><p class="level-item is-size-7 has-text-grey"><time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%b %d, '%y" }}</time></p></div>
                                        </div>
                                        <p class="title is-5 mb-2">{{ post.title | escape }}</p>
                                        <p class="is-size-6 excerpt-text-column">{% if post.excerpt %}{{ post.excerpt | strip_html | truncate: 100 }}{% else %}{{ post.content | strip_html | truncate: 100 }}{% endif %}</p>
                                        {% if post.TLTR %}<article class="message is-light is-small mt-4 {% if post.category == 'journal' %}is-warning{% else %}is-info{% endif %}"><div class="message-body py-2 px-3"><strong>TL;DR:</strong> {{ post.TLTR }}</div></article>{% endif %}
                                    </div>
                                    <div class="post-item-footer mt-auto pt-3">
                                        {% if post.category == "project" %}<div class="buttons are-small is-centered">{% if post.live_url %}<a href="{{ post.live_url }}" class="button is-link is-light" target="_blank" rel="noopener">Demo</a>{% endif %}{% if post.repo_url %}<a href="{{ post.repo_url }}" class="button is-dark is-light" target="_blank" rel="noopener">Code</a>{% endif %}</div>
                                        {% elsif post.tags %}<div class="tags are-small is-centered">{% for tag_item in post.tags limit:3 %}<span class="tag is-light">{{ tag_item }}</span>{% endfor %}</div>{% endif %}
                                    </div>
                                </div>
                            </a>
                        </div>
                        {% if posts_processed_count_jekyll == 1 %}
                            <div class="column is-one-third-desktop is-half-tablet is-full-mobile ad-slot-jekyll-1">
                                <div class="box post-item-box ad-placeholder-box" style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 250px;">
                                    <p class="is-size-7 has-text-grey-light mb-2">Advertisement</p>
                                    {% include adsense.html format="square" %}
                                    {% capture ad_include_output %}{% include adsense.html format="square" %}{% endcapture %}{% if ad_include_output == "" or ad_include_output == nil %}<div class="has-background-white-ter ad-fallback-placeholder" style="width: 100%; min-height: 230px; display:flex; align-items:center; justify-content:center; border: 1px dashed var(--bulma-grey-lighter); border-radius: var(--bulma-radius-small);"><span class="icon is-large has-text-grey-lighter"><i class="ph ph-megaphone"></i></span></div>{% endif %}
                                </div>
                            </div>
                        {% elsif posts_processed_count_jekyll == 3 %}
                            <div class="column is-one-third-desktop is-half-tablet is-full-mobile newsletter-slot-jekyll-1">
                                <div class="box post-item-box newsletter-box-column has-background-info-light" style="min-height: 250px; display: flex; flex-direction: column; justify-content: center;">
                                    <div class="has-text-centered">
                                        <span class="icon is-large has-text-info mb-3"><i class="ph ph-envelope-simple-open"></i></span>
                                        <p class="title is-5 has-text-info-dark">Stay Updated!</p><p class="subtitle is-6 has-text-grey-darker">Subscribe for the latest posts & news.</p>
                                        <div class="ghost-signup-form-container" style="min-height: 58px;max-width: 440px;margin: 0 auto;width: 100%"><script src="https://cdn.jsdelivr.net/ghost/signup-form@~0.2/umd/signup-form.min.js" data-label-1="IsActive" data-button-color="#e53935" data-button-text-color="#FFFFFF" data-site="https://imswarnil.com/" data-locale="en" async></script></div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
                {% if paginator.total_pages > 1 %}
                <nav id="jekyll-pagination-controls" class="pagination is-centered is-rounded mt-6" role="navigation" aria-label="pagination">
                    {% if paginator.previous_page %}<a href="{{ paginator.previous_page_path | prepend: site.baseurl | replace: '//', '/' }}" class="pagination-previous button is-light"><span class="icon is-small"><i class="ph ph-caret-left"></i></span><span>Previous</span></a>{% else %}<a class="pagination-previous button is-light" disabled><span class="icon is-small"><i class="ph ph-caret-left"></i></span><span>Previous</span></a>{% endif %}
                    {% if paginator.next_page %}<a href="{{ paginator.next_page_path | prepend: site.baseurl | replace: '//', '/' }}" class="pagination-next button is-light"><span>Next</span><span class="icon is-small"><i class="ph ph-caret-right"></i></span></a>{% else %}<a class="pagination-next button is-light" disabled><span>Next</span><span class="icon is-small"><i class="ph ph-caret-right"></i></span></a>{% endif %}
                    <ul class="pagination-list">{% for page_number in (1..paginator.total_pages) %}<li><a href="{% if page_number == 1 %}{{ '/archive/' | relative_url }}{% else %}{{ site.paginate_path | relative_url | replace: ':num', page_number }}{% endif %}" class="pagination-link {% if page_number == paginator.page %}is-current{% endif %}" aria-label="Goto page {{ page_number }}">{{ page_number }}</a></li>{% endfor %}</ul>
                </nav>
                {% endif %}
            </section>

            <!-- Section for Category-Specific Posts (JS Driven) -->
            <section id="category-specific-content" class="section archive-column-cards p-0" style="display: none;">
                <div id="post-list-category" class="columns is-multiline"></div>
                <nav id="category-pagination-controls" class="pagination is-centered is-rounded mt-6" style="display: none;">
                    <a id="category-prev" class="pagination-previous button is-light"><span class="icon is-small"><i class="ph ph-caret-left"></i></span><span>Previous</span></a>
                    <a id="category-next" class="pagination-next button is-light"><span>Next</span><span class="icon is-small"><i class="ph ph-caret-right"></i></span></a>
                    <ul id="category-page-list" class="pagination-list"></ul>
                </nav>
            </section>
        </div>
    </div>
</div>

<script id="all_site_posts_data" type="application/json">{{ site.posts | jsonify }}</script>
<script id="site_baseurl_data" type="application/json">{{ site.baseurl | jsonify }}</script>

<template id="ad-slot-template">
    <div class="column is-one-third-desktop is-half-tablet is-full-mobile">
        <div class="box post-item-box ad-placeholder-box" style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 250px;">
            <p class="is-size-7 has-text-grey-light mb-2">Advertisement</p>
            <div class="has-background-white-ter ad-fallback-placeholder" style="width: 100%; min-height: 230px; display:flex; align-items:center; justify-content:center; border: 1px dashed var(--bulma-grey-lighter); border-radius: var(--bulma-radius-small);"><span class="icon is-large has-text-grey-lighter"><i class="ph ph-megaphone"></i></span></div>
        </div>
    </div>
</template>
<template id="newsletter-slot-template">
    <div class="column is-one-third-desktop is-half-tablet is-full-mobile">
        <div class="box post-item-box newsletter-box-column has-background-info-light" style="min-height: 250px; display: flex; flex-direction: column; justify-content: center;">
            <div class="has-text-centered">
                <span class="icon is-large has-text-info mb-3"><i class="ph ph-envelope-simple-open"></i></span>
                <p class="title is-5 has-text-info-dark">Stay Updated!</p><p class="subtitle is-6 has-text-grey-darker">Subscribe for the latest posts & news.</p>
                <div class="ghost-signup-form-container-js" style="min-height: 58px;max-width: 440px;margin: 0 auto;width: 100%"></div>
            </div>
        </div>
    </div>
</template>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const ALL_POSTS_DATA = JSON.parse(document.getElementById('all_site_posts_data').textContent || '[]');
    const SITE_BASE_URL = JSON.parse(document.getElementById('site_baseurl_data').textContent || '""');
    const POSTS_PER_PAGE = 3; // Should match your Jekyll paginate setting for consistency

    let currentCategorySlug = 'all';
    let currentCategoryPage = 1;
    let currentCategoryPosts = [];

    const jekyllPaginatedContentEl = document.getElementById('jekyll-paginated-content');
    const categorySpecificContentEl = document.getElementById('category-specific-content');
    const postListCategoryContainerEl = document.getElementById('post-list-category');
    const categoryPaginationControlsEl = document.getElementById('category-pagination-controls');
    const archiveTitleEl = document.getElementById('archive-title');
    const categoryFilterLinks = document.querySelectorAll('#category-filter-list .category-link');
    const categoryPrevButtonEl = document.getElementById('category-prev');
    const categoryNextButtonEl = document.getElementById('category-next');
    const categoryPageListEl = document.getElementById('category-page-list');

    const adSlotTemplateNode = document.getElementById('ad-slot-template').content;
    const newsletterSlotTemplateNode = document.getElementById('newsletter-slot-template').content;

    function escapeHTML(str) {
        if (typeof str !== 'string') return '';
        return str.replace(/[&<>"']/g, function (match) {
            return { '&': '&', '<': '<', '>': '>', '"': '"', "'": ''' }[match];
        });
    }
    
    function relativeUrl(url) {
        if (!url) return '#'; // Default to hash if URL is missing
        if (url.startsWith('http://') || url.startsWith('https://') || !url.startsWith('/')) {
            return url; // Absolute URL or already relative to current page
        }
        // Handle baseurl for root-relative paths
        let base = SITE_BASE_URL || "";
        if (base === '/') base = ''; // Avoid double slash if baseurl is just '/'
        return base + url;
    }

    function getPostCardHTML(post) {
        let imageHTML = '';
        if (post.image && post.category !== 'video') {
            imageHTML = `<figure class="image is-4by3 mb-4"><img src="${relativeUrl(post.image)}" alt="${escapeHTML(post.title)}"></figure>`;
        } else if (post.category === 'video' && post.VideoId) {
            const durationHTML = post.duration ? `<div class="is-overlay is-flex is-align-items-flex-end is-justify-content-flex-end p-2"><span class="tag is-dark is-rounded">${escapeHTML(post.duration)}</span></div>` : '';
            imageHTML = `<figure class="image is-16by9 mb-4 video-thumbnail-container-column"><img src="https://i.ytimg.com/vi/${escapeHTML(post.VideoId)}/hqdefault.jpg" alt="${escapeHTML(post.title)}">${durationHTML}<div class="is-overlay is-flex is-align-items-center is-justify-content-center video-play-indicator-column"><span class="icon is-large has-text-white has-background-dark-transparent-overlay-column"><i class="ph-fill ph-play-circle"></i></span></div></figure>`;
        }

        let categoryTagClass = 'is-info';
        if (post.category === 'journal') categoryTagClass = 'is-warning';
        else if (post.category === 'video') categoryTagClass = 'is-danger';
        else if (post.category === 'project') categoryTagClass = 'is-primary';

        let categoryIconClass = 'ph-article';
        if (post.category === 'journal') categoryIconClass = 'ph-notebook';
        else if (post.category === 'video') categoryIconClass = 'ph-youtube-logo';
        else if (post.category === 'project') categoryIconClass = 'ph-git-branch';
        
        let postDateFormatted = '';
        if (post.date) {
            try {
                const d = new Date(post.date);
                postDateFormatted = d.toLocaleDateString('en-US', { month: 'short', day: '2-digit', year: '2-digit' }).replace(',', ", '");
            } catch (e) { console.warn("Date formatting error for post:", post.title, e); }
        }

        let excerptText = post.excerpt ? post.excerpt : (post.content || '');
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = excerptText; // Basic way to use browser for HTML parsing
        excerptText = (tempDiv.textContent || tempDiv.innerText || "").substring(0, 100);
        if (excerptText.length === 100 && (post.excerpt || post.content || '').length > 100) excerptText += "...";


        const tltrHTML = post.TLTR ? `<article class="message is-light is-small mt-4 ${post.category === 'journal' ? 'is-warning' : 'is-info'}"><div class="message-body py-2 px-3"><strong>TL;DR:</strong> ${escapeHTML(post.TLTR)}</div></article>` : '';
        
        let footerHTML = '';
        if (post.category === "project") {
            const demoButton = post.live_url ? `<a href="${post.live_url}" class="button is-link is-light" target="_blank" rel="noopener">Demo</a>` : '';
            const codeButton = post.repo_url ? `<a href="${post.repo_url}" class="button is-dark is-light" target="_blank" rel="noopener">Code</a>` : '';
            footerHTML = `<div class="buttons are-small is-centered">${demoButton}${codeButton}</div>`;
        } else if (post.tags && post.tags.length > 0) {
            const tagsHTML = post.tags.slice(0, 3).map(tag => `<span class="tag is-light">${escapeHTML(tag)}</span>`).join('');
            footerHTML = `<div class="tags are-small is-centered">${tagsHTML}</div>`;
        }

        return `
            <div class="column is-one-third-desktop is-half-tablet is-full-mobile">
                <a href="${relativeUrl(post.url)}" class="post-item-link">
                    <div class="box post-item-box">
                        ${imageHTML}
                        <div class="content">
                            <div class="level is-mobile is-marginless mb-3">
                                <div class="level-left"><div class="level-item"><span class="tag ${categoryTagClass} is-light is-rounded is-capitalized"><span class="icon is-small mr-1"><i class="ph ${categoryIconClass}"></i></span>${escapeHTML(post.category) || 'Blog'}</span></div></div>
                                <div class="level-right"><p class="level-item is-size-7 has-text-grey"><time datetime="${post.date || ''}">${postDateFormatted}</time></p></div>
                            </div>
                            <p class="title is-5 mb-2">${escapeHTML(post.title)}</p>
                            <p class="is-size-6 excerpt-text-column">${escapeHTML(excerptText)}</p>
                            ${tltrHTML}
                        </div>
                        <div class="post-item-footer mt-auto pt-3">${footerHTML}</div>
                    </div>
                </a>
            </div>`;
    }

    function renderCategoryPosts() {
        postListCategoryContainerEl.innerHTML = ''; // Clear previous posts
        const startIndex = (currentCategoryPage - 1) * POSTS_PER_PAGE;
        const endIndex = startIndex + POSTS_PER_PAGE;
        const paginatedItems = currentCategoryPosts.slice(startIndex, endIndex);

        if (paginatedItems.length === 0) {
            postListCategoryContainerEl.innerHTML = '<div class="column is-full"><p class="has-text-centered">No posts found in this category.</p></div>';
        }

        let actualPostsRenderedInPage = 0;
        paginatedItems.forEach((post) => {
            postListCategoryContainerEl.insertAdjacentHTML('beforeend', getPostCardHTML(post));
            actualPostsRenderedInPage++;

            // Insert Ad after the 1st actual post on the page, if more posts exist in this category
            if (actualPostsRenderedInPage === 1 && currentCategoryPosts.length > 1) {
                const adElement = adSlotTemplateNode.cloneNode(true);
                postListCategoryContainerEl.appendChild(adElement.firstElementChild);
            }
            // Insert Newsletter after the 3rd actual post on the page, if more posts exist in this category
            // This count is for posts *on this specific page view of the category*
            if (actualPostsRenderedInPage === POSTS_PER_PAGE && POSTS_PER_PAGE === 3 && currentCategoryPosts.length > 3) { // Only if we render 3 posts and more exist overall
                 const newsletterElement = newsletterSlotTemplateNode.cloneNode(true);
                 const ghostContainer = newsletterElement.querySelector('.ghost-signup-form-container-js');
                 if (ghostContainer && typeof SignUpForm !== 'undefined') { // Check if Ghost's SignUpForm is available
                    // The Ghost script needs to be re-invoked or find new containers.
                    // A simple way is to add its script tag again, ensuring unique IDs or targeted initialization if possible.
                    const script = document.createElement('script');
                    script.src = "https://cdn.jsdelivr.net/ghost/signup-form@~0.2/umd/signup-form.min.js";
                    script.async = true;
                    script.dataset.label1 = "IsActive";
                    script.dataset.buttonColor = "#e53935";
                    script.dataset.buttonTextColor = "#FFFFFF";
                    script.dataset.site = "https://imswarnil.com/"; // Your site
                    script.dataset.locale = "en";
                    ghostContainer.innerHTML = ''; // Clear if anything was there
                    ghostContainer.appendChild(script);
                 }
                postListCategoryContainerEl.appendChild(newsletterElement.firstElementChild);
            }
        });

        updateCategoryPaginationControls();
        jekyllPaginatedContentEl.style.display = 'none';
        categorySpecificContentEl.style.display = 'block';
        categoryPaginationControlsEl.style.display = currentCategoryPosts.length > POSTS_PER_PAGE ? 'flex' : 'none';
    }

    function updateCategoryPaginationControls() {
        categoryPageListEl.innerHTML = '';
        const totalPages = Math.ceil(currentCategoryPosts.length / POSTS_PER_PAGE);

        categoryPrevButtonEl.disabled = currentCategoryPage === 1;
        categoryNextButtonEl.disabled = currentCategoryPage === totalPages || totalPages === 0;
        
        if (totalPages <= 1) {
            categoryPaginationControlsEl.style.display = 'none';
            return;
        }
        categoryPaginationControlsEl.style.display = 'flex';

        for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.className = 'pagination-link';
            if (i === currentCategoryPage) a.classList.add('is-current');
            a.href = `#${currentCategorySlug}/page/${i}`;
            a.textContent = i;
            a.dataset.page = i;
            a.addEventListener('click', (e) => {
                e.preventDefault();
                currentCategoryPage = parseInt(e.target.dataset.page);
                renderCategoryPosts();
                updateURLHash();
            });
            li.appendChild(a);
            categoryPageListEl.appendChild(li);
        }
    }
    
    function updateURLHash() {
        if (currentCategorySlug === 'all') {
            // For "all", Jekyll handles URL path. We might want to clear hash or set to #all
            // If on /archive/page/N, hash isn't primary.
            // If on /archive/ and switched to "all", ensure hash is #all or clean.
            if (window.location.pathname.startsWith('/archive/page/')) {
                 history.replaceState(null, null, `${window.location.pathname}#all`);
            } else {
                 history.replaceState(null, null, `${SITE_BASE_URL}/archive/#all`);
            }
        } else {
            history.pushState(null, null, `#${currentCategorySlug}/page/${currentCategoryPage}`);
        }
    }

    function activateCategoryView(targetCategorySlug, targetPage = 1) {
        console.log(`Activating category: ${targetCategorySlug}, page: ${targetPage}`);
        currentCategorySlug = targetCategorySlug;
        currentCategoryPage = parseInt(targetPage) || 1;

        categoryFilterLinks.forEach(link => {
            link.classList.toggle('is-active', link.dataset.category === currentCategorySlug);
        });

        if (currentCategorySlug === 'all') {
            archiveTitleEl.textContent = 'All Posts';
            jekyllPaginatedContentEl.style.display = 'block';
            categorySpecificContentEl.style.display = 'none';
            // If switching to "All Posts" and not already on a Jekyll paginated URL for "all", reload to it.
            const currentPath = window.location.pathname.replace(/\/$/, ''); // Normalize path
            const archivePath = (SITE_BASE_URL + '/archive').replace(/\/$/, '');
            if (!currentPath.startsWith(archivePath + '/page') && currentPath !== archivePath) {
                 console.log("Redirecting to main archive for 'all' posts view.");
                 window.location.href = `${SITE_BASE_URL}/archive/${targetPage > 1 ? 'page/' + targetPage + '/' : ''}#all`;
                 return; // Important: stop further JS execution as page will reload
            }
        } else {
            const categoryData = ALL_POSTS_DATA.find(p => p.category && p.category.toLowerCase().replace(/\s+/g, '-') === currentCategorySlug);
            const categoryDisplayName = categoryData ? categoryData.category : currentCategorySlug.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            archiveTitleEl.textContent = `Posts in: ${escapeHTML(categoryDisplayName)}`;
            
            currentCategoryPosts = ALL_POSTS_DATA.filter(post => post.category && post.category.toLowerCase().replace(/\s+/g, '-') === currentCategorySlug);
            currentCategoryPosts.sort((a, b) => new Date(b.date) - new Date(a.date)); // Sort newest first
            
            console.log(`Found ${currentCategoryPosts.length} posts for category ${currentCategorySlug}`);
            renderCategoryPosts();
        }
        updateURLHash(); // Update hash after potential redirection or rendering
    }

    categoryFilterLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const selectedSlug = e.target.dataset.category;
            activateCategoryView(selectedSlug, 1);
        });
    });

    categoryPrevButtonEl.addEventListener('click', (e) => {
        e.preventDefault();
        if (currentCategoryPage > 1) {
            currentCategoryPage--;
            renderCategoryPosts();
            updateURLHash();
        }
    });

    categoryNextButtonEl.addEventListener('click', (e) => {
        e.preventDefault();
        const totalPages = Math.ceil(currentCategoryPosts.length / POSTS_PER_PAGE);
        if (currentCategoryPage < totalPages) {
            currentCategoryPage++;
            renderCategoryPosts();
            updateURLHash();
        }
    });

    function handleInitialLoadFromHash() {
        const hash = window.location.hash.substring(1);
        let initialCategory = 'all';
        let initialPage = 1;

        if (hash) {
            const parts = hash.split('/page/');
            if (parts[0] && parts[0] !== 'all') {
                initialCategory = parts[0];
                if (parts.length > 1 && !isNaN(parseInt(parts[1]))) {
                    initialPage = parseInt(parts[1]);
                }
            }
        }
        console.log(`Initial load from hash - category: ${initialCategory}, page: ${initialPage}`);
        activateCategoryView(initialCategory, initialPage);
    }

    handleInitialLoadFromHash(); // Load view based on hash on page load
    window.addEventListener('hashchange', handleInitialLoadFromHash); // Listen for hash changes (e.g., back/forward buttons)
});
</script>
---
layout: default
---
{% comment %} The plugin provides page.paginator object {% endcomment %}
{% assign paginator = page.paginator %} {# <--- Changed from Paginator to paginator #}

<section class="section">
    <div class="container">
        <h1 class="title">{{ page.title }}</h1>
        <hr>

        <!-- Search and Filter Section -->
        <div class="box">
            <!-- ... (rest of your filter HTML) ... -->
            <!-- Make sure to use `paginator.docs` instead of `Paginator.docs` inside this box too -->
            <div class="column">
                <div class="field">
                    <label class="label">Filter by Author</label>
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select id="author-filter">
                                <option value="all">All Authors</option>
                                {% assign authors = paginator.docs | map: 'author' | compact | uniq | sort %} {# <-- paginator.docs #}
                                {% for author in authors %}
                                <option value="{{ author | slugify }}">{{ author }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ... and for categories and tags ... -->
            <div class="field">
                <label class="label">Filter by Tags</label>
                <div class="tags" id="tag-cloud">
                    {% assign all_tags_list = paginator.docs | map: 'tags' | compact | join: ',' | split: ',' | uniq | sort %} {# <-- paginator.docs #}
                    {% for tag in all_tags_list %}{% assign tag_clean = tag | strip %}{% if tag_clean != "" %}
                    <span class="tag is-rounded is-medium tag-filter" data-tag="{{ tag_clean | slugify }}">
                        {{ tag_clean }} <span class="tag-count">({{ paginator.docs | where_exp: "doc", "doc.tags contains tag_clean" | size }})</span> {# <-- paginator.docs #}
                    </span>
                    {% endif %}{% endfor %}
                </div>
            </div>
        </div>


        <!-- Item List -->
        <div id="item-list" class="columns is-multiline">
            {% if paginator.docs.size > 0 %} {# <-- paginator.docs #}
            {% for item in paginator.docs %} {# <-- paginator.docs #}
            {# ... rest of your item card HTML ... #}
            {% endfor %}
            {% else %}
            <div class="column">
                <p class="has-text-centered">No items found for this page.</p>
            </div>
            {% endif %}
        </div>

        <!-- Pagination Navigation -->
        {% if paginator.total_pages > 1 %} {# <-- paginator.total_pages #}
        <nav class="pagination is-centered" role="navigation" aria-label="pagination" style="margin-top: 2rem;">
            {% if paginator.previous_page %} {# <-- paginator.previous_page #}
            <a href="{{ paginator.previous_page_path | relative_url }}" class="pagination-previous">Previous</a> {# <-- paginator.previous_page_path #}
            {% else %}
            <a class="pagination-previous" disabled>Previous</a>
            {% endif %}

            {% if paginator.next_page %} {# <-- paginator.next_page #}
            <a href="{{ paginator.next_page_path | relative_url }}" class="pagination-next">Next page</a> {# <-- paginator.next_page_path #}
            {% else %}
            <a class="pagination-next" disabled>Next page</a>
            {% endif %}

            <ul class="pagination-list">
                {% for paginator_page_item in paginator.page_trail %} {# <-- paginator.page_trail, changed loop var name #}
                <li>
                    <a href="{{ paginator_page_item.path | relative_url }}"
                       class="pagination-link {% if paginator_page_item.is_current %}is-current{% endif %}"
                       aria-label="Goto page {{ paginator_page_item.num }}"
                       {% if paginator_page_item.is_current %}aria-current="page"{% endif %}>
                        {{ paginator_page_item.num }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </nav>
        {% endif %}

        <div id="no-results" class="notification is-warning is-light" style="display: none; margin-top: 2rem;">
            No items match your search criteria on this page.
        </div>
    </div>
</section>

<!-- JavaScript and CSS remain the same -->
<!-- ... -->
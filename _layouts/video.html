---
layout: default
---
  <style>
        /*------------------------------------------------------------------------------
         * 0. IM Theme CSS Custom Properties (Simulating your :root from SCSS)
         *------------------------------------------------------------------------------*/
        :root {
            /* Primary Colors (Red Theme) */
            --im-color-primary-rgb: 229, 57, 53;
            --im-color-primary: rgb(var(--im-color-primary-rgb));
            --im-color-primary-light: #ef5350;
            --im-color-primary-dark: #c62828;

            /* Text Colors - Light Mode */
            --im-color-text: #2D3748;
            --im-color-text-headings: #1A202C;
            --im-color-text-muted: #718096;
            --im-color-text-on-primary: #FFFFFF;
            --im-color-text-on-surface: var(--im-color-text);

            /* Background & Surface Colors - Light Mode */
            --im-color-background: #F9FAFB;
            --im-color-surface: #FFFFFF;
            --im-color-border: #E2E8F0;
            --im-color-input-bg: var(--im-color-surface);
            --im-color-input-border: var(--im-color-border);

            /* Button Specifics - Light Mode */
            --im-button-light-bg: #FEEBEE;
            --im-button-light-border: #FEEBEE;
            --im-button-light-text: var(--im-color-primary-dark);
            --im-button-light-hover-bg: #FFCDD2;
            --im-button-light-hover-border: #FFCDD2;

            /* IM Theme Variables (Hardcoded values from your SCSS) */
            --im-font-primary: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            --im-font-weight-normal: 400;
            --im-font-weight-medium: 500;
            --im-font-weight-semibold: 600;
            --im-font-weight-bold: 700;
            --im-base-font-size: 16px;
            --im-line-height-base: 1.65;
            --im-border-radius: 8px;
            --im-spacing-unit: 1rem;
            --im-content-padding: 1.75rem; /* calc(var(--im-spacing-unit) * 1.75) */
        }

        html.im-is-dark-mode {
            --im-color-text: #CBD5E0;
            --im-color-text-headings: #E2E8F0;
            --im-color-text-muted: #A0AEC0;
            --im-color-background: #1A202C;
            --im-color-surface: #2D3748;
            --im-color-border: #4A5568;
            --im-color-input-bg: var(--im-color-surface);
            --im-color-input-border: var(--im-color-border);
            --im-color-text-on-surface: var(--im-color-text-headings);
            --im-button-light-bg: #4A5568;
            --im-button-light-border: #4A5568;
            --im-button-light-text: var(--im-color-text-headings);
            --im-button-light-hover-bg: #718096;
            --im-button-light-hover-border: #718096;
        }

        /*------------------------------------------------------------------------------
         * 1. Global IM Theme Styles (Applied to Bulma elements)
         *------------------------------------------------------------------------------*/
        body {
            font-family: var(--im-font-primary);
            color: var(--im-color-text);
            background-color: var(--im-color-background);
            font-weight: var(--im-font-weight-normal);
            line-height: var(--im-line-height-base);
            font-size: var(--im-base-font-size);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .title {
            font-family: var(--im-font-primary);
            color: var(--im-color-text-headings) !important; /* Override Bulma if needed */
            font-weight: var(--im-font-weight-bold) !important;
        }
        .subtitle {
            font-family: var(--im-font-primary);
            color: var(--im-color-text-muted) !important;
            font-weight: var(--im-font-weight-normal) !important;
        }

        .button {
            font-family: var(--im-font-primary);
            font-weight: var(--im-font-weight-semibold) !important;
            border-radius: var(--im-border-radius) !important;
            border-width: 1px !important;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease !important;
        }
        .button:active {
            transform: translateY(1px);
            box-shadow: none;
        }
        .button.is-primary {
            background-color: var(--im-color-primary) !important;
            border-color: var(--im-color-primary) !important;
            color: var(--im-color-text-on-primary) !important;
        }
        .button.is-primary:hover {
            background-color: var(--im-color-primary-dark) !important;
            border-color: var(--im-color-primary-dark) !important;
        }
        .button.is-light {
            background-color: var(--im-button-light-bg) !important;
            border-color: var(--im-button-light-border) !important;
            color: var(--im-button-light-text) !important;
        }
        .button.is-light:hover {
            background-color: var(--im-button-light-hover-bg) !important;
            border-color: var(--im-button-light-hover-border) !important;
        }

        .box, .panel, .modal-card { /* Add .modal-card here for consistent theming */
            background-color: var(--im-color-surface) !important;
            border-radius: var(--im-border-radius) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04), 0 2px 4px rgba(0,0,0,0.04) !important;
            border: 1px solid var(--im-color-border) !important;
            color: var(--im-color-text-on-surface) !important;
        }
        html.im-is-dark-mode .box, html.im-is-dark-mode .panel, html.im-is-dark-mode .modal-card {
             box-shadow: 0 6px 15px rgba(0,0,0,0.2), 0 3px 6px rgba(0,0,0,0.15) !important;
        }
        .box {
            padding: var(--im-content-padding) !important;
        }

        .panel .panel-heading {
            background-color: var(--im-color-surface) !important; /* Or a slightly different shade */
            color: var(--im-color-text-headings) !important;
            border-bottom: 1px solid var(--im-color-border) !important;
            font-weight: var(--im-font-weight-semibold);
            border-top-left-radius: var(--im-border-radius); /* Bulma handles this, but ensure */
            border-top-right-radius: var(--im-border-radius);
        }
        .panel .panel-block, .panel .panel-tabs a {
            border-color: var(--im-color-border) !important;
            color: var(--im-color-text-on-surface) !important;
        }
        .panel .panel-block:hover, .panel .panel-tabs a:hover {
            background-color: rgba(var(--im-color-primary-rgb), 0.05) !important;
        }
        .panel .panel-tabs a.is-active {
            color: var(--im-color-primary) !important;
            border-bottom-color: var(--im-color-primary) !important;
        }
        .panel .panel-icon { /* For icons in panel-block */
            color: var(--im-color-text-muted) !important;
        }
        .panel .panel-heading .icon i { /* For icons in panel-heading */
             color: var(--im-color-primary);
        }


        .content { /* For Markdown generated content */
            font-family: var(--im-font-primary);
            color: var(--im-color-text);
            line-height: var(--im-line-height-base);
        }
        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            color: var(--im-color-text-headings);
            font-weight: var(--im-font-weight-semibold);
        }
        .content strong {
            color: var(--im-color-text-headings);
            font-weight: var(--im-font-weight-semibold);
        }
        .content a {
            color: var(--im-color-primary);
        }
        .content a:hover {
            color: var(--im-color-primary-dark);
        }
        .content code {
            background-color: var(--im-color-surface);
            border: 1px solid var(--im-color-border);
            color: var(--im-color-primary-dark);
            padding: 0.15em 0.4em;
            border-radius: calc(var(--im-border-radius) / 2);
            font-size: 0.9em;
        }
        .content pre {
            background-color: var(--im-color-surface);
            border: 1px solid var(--im-color-border);
            border-radius: var(--im-border-radius);
            padding: var(--im-spacing-unit);
        }
        .content pre code {
            background-color: transparent;
            border: none;
            padding: 0;
            color: var(--im-color-text-on-surface);
        }

        .section {
            padding-top: calc(var(--im-spacing-unit) * 2); /* py-5 equivalent */
            padding-bottom: calc(var(--im-spacing-unit) * 2);
            /* For the grid lines, a pseudo-element would be needed.
               It's complex for inline CSS without SCSS mixins.
               If essential, background-image on .section could be attempted. */
        }

        .tag.is-light {
            background-color: rgba(var(--im-color-primary-rgb), 0.08) !important;
            color: var(--im-color-primary-dark) !important;
            font-weight: var(--im-font-weight-medium);
        }
        html.im-is-dark-mode .tag.is-light {
            background-color: rgba(var(--im-color-primary-rgb), 0.18) !important;
            color: var(--im-color-primary-light) !important;
        }

        /*------------------------------------------------------------------------------
         * 2. Video Page Specific Styles (Bulma-centric with IM Theme)
         *    Targeting elements within .im-video-page
         *------------------------------------------------------------------------------*/
        .im-video-page .image.is-16by9 { /* Video Player Figure */
            border-radius: calc(var(--im-border-radius) * 1.25);
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            overflow: hidden; /* To clip iframe */
        }
        .im-video-page .image.is-16by9 iframe { /* Iframe inside */
            border-radius: calc(var(--im-border-radius) * 1.25); /* Match figure */
        }
        html.im-is-dark-mode .im-video-page .image.is-16by9 {
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .im-video-page .level-item .icon-text {
            color: var(--im-color-text-muted);
        }
        .im-video-page .level-item .icon-text .icon i {
             color: var(--im-color-text-muted); /* Or var(--im-color-primary) */
        }

        /* Author Box (using .media.box) */
        .im-video-page .media.box .media-left .image img.is-rounded {
            border: 2px solid var(--im-color-border);
        }
        .im-video-page .media.box .media-content .content strong.is-block {
            color: var(--im-color-text-headings);
        }

        /* Sidebar Panel Content Styling */
        .im-video-page .panel .im-panel-scrollable-content {
            max-height: 380px;
            overflow-y: auto;
        }
        .im-video-page .panel .im-panel-scrollable-content::-webkit-scrollbar { width: 6px; }
        .im-video-page .panel .im-panel-scrollable-content::-webkit-scrollbar-track { background: transparent; }
        .im-video-page .panel .im-panel-scrollable-content::-webkit-scrollbar-thumb {
            background-color: rgba(113, 128, 150, 0.3); /* Muted text rgb light */
            border-radius: var(--im-border-radius);
        }
        html.im-is-dark-mode .im-video-page .panel .im-panel-scrollable-content::-webkit-scrollbar-thumb {
            background-color: rgba(160, 174, 192, 0.4); /* Muted text rgb dark */
        }

        .im-video-page .panel .panel-block.media .image.is-128x72 {
            width: 128px; /* Ensure fixed width for thumbnail layout */
            height: 72px;
        }
        .im-video-page .panel .panel-block.media img.im-related-thumb {
           border-radius: calc(var(--im-border-radius) * 0.75);
           object-fit: cover; /* Ensure thumbs fill their container */
        }
        .im-video-page .panel .panel-block .is-clipped-2 { /* Helper for 2-line text clip */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            max-height: 2.8em; /* Approx 2 lines based on line-height */
        }
         .im-video-page .panel .panel-block.is-active {
            background-color: var(--im-button-light-bg) !important;
            color: var(--im-button-light-text) !important;
        }
        .im-video-page .panel .panel-block.is-active span,
        .im-video-page .panel .panel-block.is-active strong,
        .im-video-page .panel .panel-block.is-active .has-text-primary {
            color: inherit !important;
        }


        /* Mobile Timestamps */
        .im-mobile-timestamps-container.is-fixed-bottom {
            background-color: var(--im-color-surface);
            border-top: 1px solid var(--im-color-border);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.07);
            z-index: 100;
        }
        .im-mobile-timestamps-container .im-timestamps-toggle.button.is-primary {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }
        .im-mobile-timestamps-container .im-mobile-timestamps-list.box {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            border-top: none;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 0; /* Remove default box margin */
        }
        .im-mobile-timestamps-container .im-mobile-timestamps-list .button.is-light.is-active {
            background-color: var(--im-button-light-hover-bg) !important;
            color: var(--im-button-light-text) !important;
            font-weight: var(--im-font-weight-semibold);
        }
        .im-mobile-timestamps-container .im-mobile-timestamps-list .button.is-light.is-active .has-text-primary {
             color: inherit !important;
        }

        /* Share Modal */
        .im-share-modal.modal .modal-card-head {
            background-color: var(--im-color-surface);
            border-bottom: 1px solid var(--im-color-border);
        }
        .im-share-modal.modal .modal-card-head .modal-card-title {
            color: var(--im-color-text-headings);
        }
        .im-share-modal.modal .modal-card-body {
            background-color: var(--im-color-surface);
            color: var(--im-color-text);
        }
        .im-share-modal.modal .buttons .button.is-outlined {
            border-color: var(--im-color-border);
            color: var(--im-color-text-muted);
        }
        .im-share-modal.modal .buttons .button.is-outlined:hover {
            background-color: var(--im-color-surface);
            border-color: var(--im-color-text-muted);
            color: var(--im-color-primary);
        }
        .im-share-modal.modal .buttons .im-copy-link-button.is-light.is-success {
            background-color: #48c78e !important; /* Bulma success */
            border-color: #48c78e !important;
            color: white !important;
        }

        /* Suggestions FAB */
        .button.is-primary.is-rounded.is-large.is-fixed-bottom-right {
            width: 56px !important;
            height: 56px !important;
            padding: 0 !important;
            box-shadow: 0 4px 12px rgba(var(--im-color-primary-rgb), 0.35);
        }
        .button.is-primary.is-rounded.is-large.is-fixed-bottom-right:hover {
            box-shadow: 0 6px 18px rgba(var(--im-color-primary-rgb), 0.45);
            transform: translateY(-2px) scale(1.05);
        }

        /* Fix for Bulma .is-fixed-bottom on mobile when content below is scrollable */
        /* This can be tricky and might depend on overall page structure */
        @media screen and (max-width: 768px) {
            .is-fixed-bottom {
                /* If using with a navbar that's also fixed, adjust bottom accordingly */
            }
            .im-video-page {
                padding-bottom: 100px; /* Add padding to body/main container to prevent overlap with fixed mobile timestamps */
            }
        }

    </style>
    <main>
        <section class="section im-video-page py-5">
          <div class="container">
            <div class="columns is-variable is-1-mobile is-5-tablet">
              <!-- Main Content Column -->
              <div class="column is-8-tablet">
                <div class="im-video-main-content-wrapper">

                  <!-- Video Player -->
                  <figure class="image is-16by9 mb-5 im-video-player-figure">
                    <iframe
                      id="mainVideo"
                      src="https://www.youtube.com/embed/{{ page.videoId | default: 'dQw4w9WgXcQ' }}?autoplay=1&modestbranding=1&rel=0"
                      frameborder="0"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                      allowfullscreen
                      loading="lazy"
                      title="{{ page.title | escape | default: 'Video Player' }}"
                    ></iframe>
                  </figure>

                  <!-- Video Title, Description, Stats -->
                  <div class="mb-5 px-1">
                    <h1 class="title is-3 has-text-weight-bold">{{ page.title | default: "Sample Video Title" }}</h1>
                    {% if page.description %}
                      <p class="subtitle is-5 has-text-grey-dark">{{ page.description }}</p>
                    {% else %}
                       <p class="subtitle is-5 has-text-grey-dark">This is a sample video description. Watch to learn more about this exciting topic.</p>
                    {% endif %}
                    <div class="level is-mobile mt-4">
                      <div class="level-left">
                        <div class="level-item">
                          <span class="icon-text">
                            <span class="icon"><i class="ph ph-eye"></i></span>
                            <span>{{ page.views | default: "123K" }} views</span>
                          </span>
                        </div>
                        <div class="level-item">
                          <span class="icon-text">
                            <span class="icon"><i class="ph ph-calendar-blank"></i></span>
                            <span>{{ page.date | default: "Oct 27, 2023" | date: "%b %d, %Y" }}</span>
                          </span>
                        </div>
                      </div>
                      <div class="level-right">
                        <div class="level-item">
                           <span class="icon-text">
                            <span class="icon"><i class="ph ph-thumbs-up"></i></span>
                            <span>{{ page.likes | default: "5.2K" }}</span>
                          </span>
                        </div>
                        <div class="level-item">
                            <button class="button is-light is-small" onclick="toggleShareModal()" aria-label="Share video">
                                <span class="icon"><i class="ph ph-share-network"></i></span>
                                <span class="is-hidden-mobile">Share</span>
                            </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Author Section -->
                  <div class="media box p-4 mb-5">
                    <figure class="media-left">
                      <p class="image is-48x48">
                        <img class="is-rounded" src="{{ page.author_avatar | default: 'https://via.placeholder.com/48?text=A' }}" alt="{{ page.author | escape | default: 'Author' }}">
                      </p>
                    </figure>
                    <div class="media-content">
                      <div class="content is-small">
                        <p>
                          <strong class="is-block">{{ page.author | default: "Video Author" }}</strong>
                          <span class="has-text-grey">{{ page.author_subscribers | default: "100K subscribers" }}</span>
                        </p>
                      </div>
                    </div>
                    <div class="media-right">
                      <button class="button is-primary is-rounded">Subscribe</button>
                    </div>
                  </div>

                  <!-- Video Full Description & Tags -->
                  <div class="content box p-4">
                      <p>This is the main content of the video description. It can include several paragraphs explaining what the video is about, providing context, links, or any other relevant information. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                      {{ content }} {# Actual Jekyll content will be injected here if provided #}

                      {% assign demo_tags = "bulma,jekyll,tutorial,webdev" | split: "," %}
                      <div class="tags mt-4">
                        {% for tag_item in page.tags | default: demo_tags %}
                          <span class="tag is-light">#{{ tag_item }}</span>
                        {% endfor %}
                      </div>
                  </div>

                </div>
              </div>

              <!-- Sidebar Column -->
              <div class="column is-4-tablet">
                <div class="im-video-sidebar-wrapper">
                  <!-- Timestamps - Desktop -->
                  {% assign demo_timestamps = '[{"time":"0:00","title":"Introduction to Awesomeness"},{"time":"1:35","title":"Deep Dive into Features"},{"time":"4:50","title":"Practical Examples & Use Cases"},{"time":"8:12","title":"Advanced Techniques"},{"time":"10:30","title":"Conclusion & Next Steps"}]' | parse_json %}
                  <div class="panel mb-5 is-hidden-touch">
                    <p class="panel-heading">
                      <span class="icon-text">
                        <span class="icon"><i class="ph ph-clock"></i></span>
                        <span>Timestamps</span>
                      </span>
                    </p>
                    <div class="im-panel-scrollable-content">
                      {% for timestamp in page.timestamps | default: demo_timestamps %}
                        <a class="panel-block is-flex is-justify-content-space-between" onclick="seekToTime('{{ timestamp.time }}')" role="button" tabindex="0"
                           onkeypress="if(event.key === 'Enter' || event.key === ' ') { seekToTime('{{ timestamp.time }}'); event.preventDefault(); }">
                          <span class="has-text-primary has-text-weight-semibold">{{ timestamp.time }}</span>
                          <span class="ml-2 has-text-right is-flex-grow-1">{{ timestamp.title }}</span>
                        </a>
                      {% endfor %}
                    </div>
                  </div>

                  <!-- Related Videos -->
                  <div class="panel">
                     <p class="panel-heading">
                        <span class="icon-text">
                            <span class="icon"><i class="ph ph-stack"></i></span>
                            <span>More Videos</span>
                        </span>
                    </p>
                    <div class="im-panel-scrollable-content">
                        {% assign demo_related_videos_count = 0 %}
                        {% for i in (1..5) %}
                            <a href="#" class="panel-block media">
                              <figure class="media-left is-marginless">
                                <p class="image is-128x72">
                                  <img src="https://picsum.photos/seed/related{{i}}/128/72" alt="Related Video {{i}}" class="im-related-thumb">
                                </p>
                              </figure>
                              <div class="media-content ml-3">
                                <div class="content is-small">
                                  <p class="has-text-weight-semibold mb-1 is-clipped-2">Engaging Title for Related Video Number {{i}} That Might Be Quite Long</p>
                                  <p class="is-size-7 has-text-grey mb-1">Another Channel</p>
                                  <p class="is-size-7 has-text-grey-light">{{ 100 | plus: i }}K views</p>
                                </div>
                              </div>
                            </a>
                        {% endfor %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
    </main>

    <!-- Timestamps - Mobile (Fixed Bottom) -->
    <div class="is-fixed-bottom has-background-surface p-2 is-hidden-tablet im-mobile-timestamps-container">
      <button class="button is-primary is-fullwidth im-timestamps-toggle" aria-expanded="false" aria-controls="mobileTimestampsList">
        <span class="icon"><i class="ph ph-clock"></i></span>
        <span>Jump To</span>
      </button>
      <div class="is-hidden mt-2 box p-2 im-mobile-timestamps-list" id="mobileTimestampsList">
        {% for timestamp in page.timestamps | default: demo_timestamps %}
          <a class="button is-fullwidth is-light mb-1 is-justify-content-flex-start" onclick="seekToTime('{{ timestamp.time }}')" role="button">
            <span class="has-text-primary has-text-weight-semibold mr-2">{{ timestamp.time }}</span>
            <span>{{ timestamp.title }}</span>
          </a>
        {% endfor %}
      </div>
    </div>

    <!-- Share Modal -->
    <div class="modal im-share-modal">
      <div class="modal-background" onclick="toggleShareModal()"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Share this video</p>
          <button class="delete" aria-label="close" onclick="toggleShareModal()"></button>
        </header>
        <section class="modal-card-body has-text-centered">
          <p class="mb-4">Share this video with your friends!</p>
          <div class="buttons are-small is-centered field is-grouped is-grouped-multiline is-grouped-centered">
            <div class="control"><a href="#" class="button is-outlined" aria-label="Share on Facebook"><span class="icon"><i class="ph ph-facebook-logo"></i></span><span>Facebook</span></a></div>
            <div class="control"><a href="#" class="button is-outlined" aria-label="Share on Twitter"><span class="icon"><i class="ph ph-twitter-logo"></i></span><span>Twitter</span></a></div>
            <div class="control"><a href="#" class="button is-outlined" aria-label="Share on LinkedIn"><span class="icon"><i class="ph ph-linkedin-logo"></i></span><span>LinkedIn</span></a></div>
            <div class="control"><a href="#" class="button is-outlined" aria-label="Share on WhatsApp"><span class="icon"><i class="ph ph-whatsapp-logo"></i></span><span>WhatsApp</span></a></div>
            <div class="control"><a href="#" class="button is-outlined" aria-label="Share on Reddit"><span class="icon"><i class="ph ph-reddit-logo"></i></span><span>Reddit</span></a></div>
            <div class="control"><a href="#" class="button is-outlined" aria-label="Share on Telegram"><span class="icon"><i class="ph ph-telegram-logo"></i></span><span>Telegram</span></a></div>
            <div class="control"><a href="#" class="button is-light im-copy-link-button" aria-label="Copy link"><span class="icon"><i class="ph ph-link"></i></span><span>Copy Link</span></a></div>
          </div>
          <input type="text" class="input mt-4 is-sr-only im-share-link-input" value="https://example.com{{ page.url | default: '/sample-video-url' }}" readonly>
        </section>
      </div>
    </div>

    <!-- Suggestions Button (FAB) -->
    <button class="button is-primary is-rounded is-large is-fixed-bottom-right m-4">
        <span class="icon is-medium"><i class="ph ph-lightbulb"></i></span>
    </button>

    <script>
        // Dark Mode Toggle (Example - reuse your existing logic)
        const themeToggleLink = document.getElementById('im-dark-mode-toggle');
        const themeIcon = document.getElementById('im-theme-icon');
        const htmlElement = document.documentElement;

        function applyTheme(theme) {
            if (theme === 'dark') {
                htmlElement.classList.add('im-is-dark-mode');
                if (themeIcon) { themeIcon.className = 'ph ph-sun'; }
                if (themeToggleLink) themeToggleLink.setAttribute('aria-pressed', 'true');
            } else {
                htmlElement.classList.remove('im-is-dark-mode');
                if (themeIcon) { themeIcon.className = 'ph ph-moon'; }
                if (themeToggleLink) themeToggleLink.setAttribute('aria-pressed', 'false');
            }
            localStorage.setItem('im-theme', theme);
        }

        const savedTheme = localStorage.getItem('im-theme');
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        let initialTheme = 'light';
        if (savedTheme) { initialTheme = savedTheme; }
        else if (prefersDark) { initialTheme = 'dark'; }
        applyTheme(initialTheme);

        if (themeToggleLink) {
            themeToggleLink.addEventListener('click', (event) => {
                event.preventDefault();
                const isDarkMode = htmlElement.classList.contains('im-is-dark-mode');
                applyTheme(isDarkMode ? 'light' : 'dark');
            });
        }
        // Bulma Burger Menu
        const burger = document.querySelector('.navbar-burger');
        const menu = document.querySelector('.navbar-menu');
        if (burger && menu) {
            burger.addEventListener('click', () => {
                burger.classList.toggle('is-active');
                menu.classList.toggle('is-active');
            });
        }


        // --- Video Page Specific JS ---
        function seekToTime(timestamp) {
            const iframe = document.getElementById('mainVideo');
            if (!iframe) return;
            const timeParts = timestamp.split(':');
            let seconds = 0;
            if (timeParts.length === 2) { seconds = parseInt(timeParts[0], 10) * 60 + parseInt(timeParts[1], 10); }
            else if (timeParts.length === 3) { seconds = parseInt(timeParts[0], 10) * 3600 + parseInt(timeParts[1], 10) * 60 + parseInt(timeParts[2], 10); }
            if (isNaN(seconds)) return;

            const currentSrc = iframe.src;
            let baseUrl = currentSrc.split('?')[0];
            let params = new URLSearchParams(currentSrc.split('?')[1] || '');
            params.set('start', seconds);
            params.set('autoplay', '1');
            iframe.src = `${baseUrl}?${params.toString()}`;

            document.querySelectorAll('.panel-block.is-active, .im-mobile-timestamps-list .button.is-active').forEach(item => item.classList.remove('is-active'));
            if (event && event.currentTarget) { event.currentTarget.classList.add('is-active'); }
        }

        const mobileTimestampsToggle = document.querySelector('.im-timestamps-toggle');
        const mobileTimestampsList = document.getElementById('mobileTimestampsList');
        if (mobileTimestampsToggle && mobileTimestampsList) {
            mobileTimestampsToggle.addEventListener('click', function() {
            const isHidden = mobileTimestampsList.classList.toggle('is-hidden');
            this.setAttribute('aria-expanded', !isHidden);
            });
        }

        const shareModal = document.querySelector('.im-share-modal');
        const shareLinkInput = document.querySelector('.im-share-link-input');
        function toggleShareModal() {
            if (shareModal) {
            shareModal.classList.toggle('is-active');
            const isActive = shareModal.classList.contains('is-active');
            shareModal.setAttribute('aria-hidden', !isActive);
            if (isActive && shareLinkInput) {
                shareLinkInput.value = window.location.href; // Update link on open
                setTimeout(() => shareModal.querySelector('.delete, .button').focus(), 50); // Allow modal to render
            }
            }
        }
        const copyLinkButton = document.querySelector('.im-copy-link-button');
        if(copyLinkButton && shareLinkInput) {
            copyLinkButton.addEventListener('click', function(e) {
                e.preventDefault();
                shareLinkInput.classList.remove('is-sr-only'); // Make it visible to select
                shareLinkInput.select();
                shareLinkInput.setSelectionRange(0, 99999); /* For mobile devices */
                try {
                    document.execCommand('copy');
                    const originalTextElement = this.querySelector('span:last-child');
                    const originalText = originalTextElement.textContent;
                    originalTextElement.textContent = 'Copied!';
                    this.classList.add('is-success'); this.classList.remove('is-light');
                    setTimeout(() => {
                        originalTextElement.textContent = originalText;
                        this.classList.remove('is-success'); this.classList.add('is-light');
                        shareLinkInput.classList.add('is-sr-only'); // Hide again
                    }, 2000);
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                    alert('Failed to copy. Please copy manually.');
                    shareLinkInput.classList.remove('is-sr-only'); // Keep visible if copy failed
                }
            });
        }

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape' || event.key === 'Esc') {
            if (shareModal && shareModal.classList.contains('is-active')) {
                toggleShareModal();
            }
            }
        });
    </script>
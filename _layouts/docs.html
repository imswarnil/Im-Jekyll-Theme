<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  {% include im-head.html %}
  <body>
    {% include im-navbar.html %}
    
    <!-- Documentation Layout -->
    <div class="container">
      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      
      <!-- Left Sidebar - Documentation Menu -->
      <aside class="sidebar-left" id="docsSidebar">
        <div class="sidebar-left-inner">
          <!-- Brand Logo -->
          <div class="brand">
            <a href="{{ site.baseurl }}/" class="docs-brand-link">
              <img src="{{ site.logo | default: '/assets/logos/logo.svg' }}" alt="{{ site.title }} Logo">
              <span>Documentation</span>
            </a>
          </div>

          <!-- Search Box -->
          <div class="search">
            <input type="text" placeholder="Search documentation..." id="docsSearchInput">
          </div>

          <!-- Documentation Menu -->
          <nav class="docs-menu">
            {% for item in site.data.documentation.docs %}
              <div class="menu-section">
                <h3>{{ item.label }}</h3>
                <ul>
                  {% for subitem in item.items %}
                    {% if subitem.items %}
                      <li class="menu-item">
                        <a>{{ subitem.name }}</a>
                        <div class="submenu">
                          {% for subsubitem in subitem.items %}
                            <div class="menu-item {% if page.url == subsubitem.link %}active{% endif %}">
                              <a href="{{ site.baseurl }}{{ subsubitem.link }}" 
                                 data-search="{{ subsubitem.name | downcase }} {{ subitem.name | downcase }} {{ item.label | downcase }}">
                                {{ subsubitem.name }}
                              </a>
                            </div>
                          {% endfor %}
                        </div>
                      </li>
                    {% else %}
                      <li class="menu-item {% if page.url == subitem.link %}active{% endif %}">
                        <a href="{{ site.baseurl }}{{ subitem.link }}" 
                           data-search="{{ subitem.name | downcase }} {{ item.label | downcase }}">
                          {{ subitem.name }}
                        </a>
                      </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </div>
            {% endfor %}
          </nav>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="main-content">
        <!-- Breadcrumbs -->
        <nav class="breadcrumbs">
          <ul>
            <li><a href="{{ site.baseurl }}/">Home</a></li>
            <li><a href="{{ site.baseurl }}/docs/">Documentation</a></li>
            {% if page.category %}
              <li><a href="#">{{ page.category }}</a></li>
            {% endif %}
            <li>{{ page.title }}</li>
          </ul>
        </nav>

        <!-- Page Header -->
        <header class="content-header">
          <h1>{{ page.title }}</h1>
          {% if page.subtitle %}
            <p>{{ page.subtitle }}</p>
          {% endif %}
          
          {% if page.last_modified_at %}
            <div class="last-updated">
              Last updated: {{ page.last_modified_at | date: "%B %d, %Y" }}
            </div>
          {% endif %}
        </header>

        <!-- Content -->
        <div class="content-body">
          {{ content }}
        </div>

        <!-- Page Footer with Feedback and Navigation -->
        <footer class="content-footer">
          <div class="pagination">
            {% if page.previous %}
              <a href="{{ site.baseurl }}{{ page.previous.url }}" class="prev">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                Previous: {{ page.previous.title }}
              </a>
            {% endif %}
            {% if page.next %}
              <a href="{{ site.baseurl }}{{ page.next.url }}" class="next">
                Next: {{ page.next.title }}
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </a>
            {% endif %}
          </div>
          
          <div class="feedback">
            <p>Was this helpful?</p>
            <button class="docs-feedback-button like">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
              </svg>
              Yes
            </button>
            <button class="docs-feedback-button dislike">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>
              </svg>
              No
            </button>
          </div>
        </footer>
      </main>

      <!-- Right Sidebar - Table of Contents -->
      <aside class="sidebar-right">
        <div class="toc">
          <h3>On this page</h3>
          {% include utility/toc.html html=content class="menu-list" h_min=2 h_max=3 %}
        </div>

        {% if site.docs.show_ads %}
        <div class="ad-container">
          <span class="ad-label">Sponsored</span>
          <img src="https://via.placeholder.com/250" alt="Advertisement">
        </div>
        {% endif %}

        <div class="author-card">
          <img src="{{ page.author_image | default: 'https://via.placeholder.com/48' }}" alt="Author Avatar" class="author-avatar">
          <div class="author-info">
            <h4>{{ page.author | default: 'Documentation Team' }}</h4>
            <p>{{ page.author_role | default: 'Technical Writer' }}</p>
          </div>
        </div>

        <div class="social-share">
          <h4>Share this page</h4>
          <div class="social-icons">
            <a href="#" class="docs-share-twitter" aria-label="Share on Twitter">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
              </svg>
            </a>
            <a href="#" class="docs-share-linkedin" aria-label="Share on LinkedIn">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                <rect x="2" y="9" width="4" height="12"></rect>
                <circle cx="4" cy="4" r="2"></circle>
              </svg>
            </a>
            <a href="#" class="docs-share-facebook" aria-label="Share on Facebook">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
              </svg>
            </a>
            <a href="#" class="docs-share-copy" aria-label="Copy link">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
              </svg>
            </a>
          </div>
        </div>
      </aside>
    </div>

    {% include footer.html %}

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Mobile menu toggle functionality
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const docsSidebar = document.getElementById('docsSidebar');
        
        if (mobileMenuToggle && docsSidebar) {
          mobileMenuToggle.addEventListener('click', function() {
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            this.setAttribute('aria-expanded', !isExpanded);
            docsSidebar.classList.toggle('active');
            
            // Toggle body overflow when menu is open
            document.body.style.overflow = isExpanded ? '' : 'hidden';
          });
        }

        // Close menu when clicking outside or pressing Escape
        document.addEventListener('click', function(e) {
          if (docsSidebar && docsSidebar.classList.contains('active')) {
            const isClickInsideSidebar = docsSidebar.contains(e.target);
            const isClickOnToggle = mobileMenuToggle && mobileMenuToggle.contains(e.target);
            
            if (!isClickInsideSidebar && !isClickOnToggle) {
              docsSidebar.classList.remove('active');
              if (mobileMenuToggle) {
                mobileMenuToggle.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
              }
            }
          }
        });

        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && docsSidebar && docsSidebar.classList.contains('active')) {
            docsSidebar.classList.remove('active');
            if (mobileMenuToggle) {
              mobileMenuToggle.setAttribute('aria-expanded', 'false');
              document.body.style.overflow = '';
            }
          }
        });

        // Search functionality
        const docsSearchInput = document.getElementById('docsSearchInput');
        const docsMenuSections = document.querySelectorAll('.docs-menu > .menu-section');
        
        if (docsSearchInput) {
          docsSearchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase().trim();
            
            if (searchTerm.length > 0) {
              docsMenuSections.forEach(section => {
                const menuLabel = section.querySelector('h3');
                const menuItems = section.querySelectorAll('.menu-item');
                
                let hasVisibleItems = false;
                
                menuItems.forEach(item => {
                  const link = item.querySelector('a');
                  const searchData = link.getAttribute('data-search');
                  
                  if (searchData.includes(searchTerm)) {
                    item.style.display = 'block';
                    hasVisibleItems = true;
                  } else {
                    item.style.display = 'none';
                  }
                });
                
                if (hasVisibleItems) {
                  section.style.display = 'block';
                  menuLabel.style.display = 'block';
                } else {
                  section.style.display = 'none';
                }
              });
            } else {
              // Show all items when search is empty
              docsMenuSections.forEach(section => {
                section.style.display = 'block';
                const menuLabel = section.querySelector('h3');
                const menuItems = section.querySelectorAll('.menu-item');
                
                menuLabel.style.display = 'block';
                menuItems.forEach(item => {
                  item.style.display = 'block';
                });
              });
            }
          });
        }

        // Smooth scrolling for TOC links
        document.querySelectorAll('.